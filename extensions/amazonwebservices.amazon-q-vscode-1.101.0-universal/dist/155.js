"use strict";exports.id=155,exports.ids=[155],exports.modules={39155:(m,l,o)=>{o.r(l),o.d(l,{fromTokenFile:()=>T,fromWebToken:()=>i});var a=o(71500),g=o(3631),E=o(79896);const i=e=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");const{roleArn:n,roleSessionName:s,webIdentityToken:t,providerId:r,policyArns:y,policy:A,durationSeconds:I}=e;let{roleAssumerWithWebIdentity:d}=e;if(!d){const{getDefaultRoleAssumerWithWebIdentity:f}=await Promise.resolve().then(o.bind(o,80738));d=f({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:e.parentClientConfig},e.clientPlugins)}return d({RoleArn:n,RoleSessionName:s??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:t,ProviderId:r,PolicyArns:y,Policy:A,DurationSeconds:I})},c="AWS_WEB_IDENTITY_TOKEN_FILE",S="AWS_ROLE_ARN",N="AWS_ROLE_SESSION_NAME",T=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");const n=e?.webIdentityTokenFile??process.env[c],s=e?.roleArn??process.env[S],t=e?.roleSessionName??process.env[N];if(!n||!s)throw new g.C1("Web identity configuration not specified",{logger:e.logger});const r=await i({...e,webIdentityToken:(0,E.readFileSync)(n,{encoding:"ascii"}),roleArn:s,roleSessionName:t})();return n===process.env[c]&&(0,a.g)(r,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),r}}};
