"use strict";var xt=Object.defineProperty;var vt=(x,y,a)=>y in x?xt(x,y,{enumerable:!0,configurable:!0,writable:!0,value:a}):x[y]=a;var i=(x,y,a)=>(vt(x,typeof y!="symbol"?y+"":y,a),a);exports.id=352,exports.ids=[352],exports.modules={4352:(x,y,a)=>{a.d(y,{CreateTokenCommand:()=>me,SSOOIDCClient:()=>he});var V=a(24383),fe=a(16103),xe=a(47425),G=a(20505),w=a(54855),I=a(94344),ve=a(99329),B=a(5717),C=a(92146),r=a(12799),Se=a(47072),J=a(44487);const ge=async(e,n,t)=>({operation:(0,J.u)(n).operation,region:await(0,J.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Ee(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(n,t)=>({signingProperties:{config:n,context:t}})}}function we(e){return{schemeId:"smithy.api#noAuth"}}const Ie=e=>{const n=[];switch(e.operation){case"CreateToken":{n.push(we(e));break}default:n.push(Ee(e))}return n},Pe=e=>({...(0,Se.h)(e)}),Ce=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),Te={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var Ae=a(89474),be=a(19082),L=a(79119),$e=a(73469),v=a(83995),N=a(80167),De=a(52521),Oe=a(8275),Re=a(36124),je=a(89465),Z=a(84132),W=a(76053),ke=a(70292),A=a(18393);const Y="required",p="fn",h="argv",S="ref",X=!0,Q="isSet",P="booleanEquals",g="error",E="endpoint",f="tree",b="PartitionResult",$="getAttr",q={[Y]:!1,type:"String"},ee={[Y]:!0,default:!1,type:"Boolean"},te={[S]:"Endpoint"},re={[p]:P,[h]:[{[S]:"UseFIPS"},!0]},ne={[p]:P,[h]:[{[S]:"UseDualStack"},!0]},u={},oe={[p]:$,[h]:[{[S]:b},"supportsFIPS"]},se={[S]:b},ie={[p]:P,[h]:[!0,{[p]:$,[h]:[se,"supportsDualStack"]}]},ae=[re],ce=[ne],de=[{[S]:"Region"}],ze={version:"1.0",parameters:{Region:q,UseDualStack:ee,UseFIPS:ee,Endpoint:q},rules:[{conditions:[{[p]:Q,[h]:[te]}],rules:[{conditions:ae,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:g},{conditions:ce,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:g},{endpoint:{url:te,properties:u,headers:u},type:E}],type:f},{conditions:[{[p]:Q,[h]:de}],rules:[{conditions:[{[p]:"aws.partition",[h]:de,assign:b}],rules:[{conditions:[re,ne],rules:[{conditions:[{[p]:P,[h]:[X,oe]},ie],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:u,headers:u},type:E}],type:f},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:g}],type:f},{conditions:ae,rules:[{conditions:[{[p]:P,[h]:[oe,X]}],rules:[{conditions:[{[p]:"stringEquals",[h]:[{[p]:$,[h]:[se,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:u,headers:u},type:E},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:u,headers:u},type:E}],type:f},{error:"FIPS is enabled but this partition does not support FIPS",type:g}],type:f},{conditions:ce,rules:[{conditions:[ie],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:u,headers:u},type:E}],type:f},{error:"DualStack is enabled but this partition does not support DualStack",type:g}],type:f},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:u,headers:u},type:E}],type:f}],type:f},{error:"Invalid Configuration: Missing Region",type:g}]},Ke=new A.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Ue=(e,n={})=>Ke.get(e,()=>(0,A.sO)(ze,{endpointParams:e,logger:n.logger}));A.mw.aws=ke.UF;const He=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Z.E,base64Encoder:e?.base64Encoder??Z.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Ue,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Ie,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:n=>n.getIdentityProvider("aws.auth#sigv4"),signer:new Re.f2},{schemeId:"smithy.api#noAuth",identityProvider:n=>n.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new I.mR}],logger:e?.logger??new r.N4,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??je.D,utf8Decoder:e?.utf8Decoder??W.ar,utf8Encoder:e?.utf8Encoder??W.Pq});var Me=a(46793);const Fe=e=>{(0,r.I9)(process.version);const n=(0,Me.I)(e),t=()=>n().then(r.lT),o=He(e);(0,be.I)(process.version);const s={profile:e?.profile};return{...o,...e,runtime:"node",defaultsMode:n,bodyLengthChecker:e?.bodyLengthChecker??De.n,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,L.pf)({serviceId:o.serviceId,clientVersion:Ae.rE}),maxAttempts:e?.maxAttempts??(0,v.Z)(C.qs,e),region:e?.region??(0,v.Z)(w.GG,{...w.zH,...s}),requestHandler:N.$c.create(e?.requestHandler??t),retryMode:e?.retryMode??(0,v.Z)({...C.kN,default:async()=>(await t()).retryMode||Oe.L0},e),sha256:e?.sha256??$e.V.bind(null,"sha256"),streamCollector:e?.streamCollector??N.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,v.Z)(w.e$,s),useFipsEndpoint:e?.useFipsEndpoint??(0,v.Z)(w.Ko,s),userAgentAppId:e?.userAgentAppId??(0,v.Z)(L.hV,s)}};var le=a(63928),pe=a(91551);const _e=e=>{const n=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(s){const c=n.findIndex(d=>d.schemeId===s.schemeId);c===-1?n.push(s):n.splice(c,1,s)},httpAuthSchemes(){return n},setHttpAuthSchemeProvider(s){t=s},httpAuthSchemeProvider(){return t},setCredentials(s){o=s},credentials(){return o}}},Ve=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),T=e=>e,Ge=(e,n)=>{const t={...T((0,le.Rq)(e)),...T((0,r.xA)(e)),...T((0,pe.eS)(e)),...T(_e(e))};return n.forEach(o=>o.configure(t)),{...e,...(0,le.$3)(t),...(0,r.uv)(t),...(0,pe.jt)(t),...Ve(t)}};class he extends r.Kj{constructor(...[t]){const o=Fe(t||{}),s=Ce(o),c=(0,G.Dc)(s),d=(0,C.$z)(c),_=(0,w.TD)(d),ut=(0,V.OV)(_),mt=(0,B.Co)(ut),yt=Pe(mt),ye=Ge(yt,t?.extensions||[]);super(ye);i(this,"config");this.config=ye,this.middlewareStack.use((0,G.sM)(this.config)),this.middlewareStack.use((0,C.ey)(this.config)),this.middlewareStack.use((0,ve.vK)(this.config)),this.middlewareStack.use((0,V.TC)(this.config)),this.middlewareStack.use((0,fe.Y7)(this.config)),this.middlewareStack.use((0,xe.n4)(this.config)),this.middlewareStack.use((0,I.wB)(this.config,{httpAuthSchemeParametersProvider:ge,identityProviderConfigProvider:async ft=>new I.h$({"aws.auth#sigv4":ft.credentials})})),this.middlewareStack.use((0,I.lW)(this.config))}destroy(){super.destroy()}}var Be=a(96720);class l extends r.TJ{constructor(n){super(n),Object.setPrototypeOf(this,l.prototype)}}class D extends l{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t});i(this,"name","AccessDeniedException");i(this,"$fault","client");i(this,"error");i(this,"error_description");Object.setPrototypeOf(this,D.prototype),this.error=t.error,this.error_description=t.error_description}}class O extends l{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t});i(this,"name","AuthorizationPendingException");i(this,"$fault","client");i(this,"error");i(this,"error_description");Object.setPrototypeOf(this,O.prototype),this.error=t.error,this.error_description=t.error_description}}const Je=e=>({...e,...e.clientSecret&&{clientSecret:r.$H},...e.refreshToken&&{refreshToken:r.$H},...e.codeVerifier&&{codeVerifier:r.$H}}),Le=e=>({...e,...e.accessToken&&{accessToken:r.$H},...e.refreshToken&&{refreshToken:r.$H},...e.idToken&&{idToken:r.$H}});class R extends l{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t});i(this,"name","ExpiredTokenException");i(this,"$fault","client");i(this,"error");i(this,"error_description");Object.setPrototypeOf(this,R.prototype),this.error=t.error,this.error_description=t.error_description}}class j extends l{constructor(t){super({name:"InternalServerException",$fault:"server",...t});i(this,"name","InternalServerException");i(this,"$fault","server");i(this,"error");i(this,"error_description");Object.setPrototypeOf(this,j.prototype),this.error=t.error,this.error_description=t.error_description}}class k extends l{constructor(t){super({name:"InvalidClientException",$fault:"client",...t});i(this,"name","InvalidClientException");i(this,"$fault","client");i(this,"error");i(this,"error_description");Object.setPrototypeOf(this,k.prototype),this.error=t.error,this.error_description=t.error_description}}class z extends l{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t});i(this,"name","InvalidGrantException");i(this,"$fault","client");i(this,"error");i(this,"error_description");Object.setPrototypeOf(this,z.prototype),this.error=t.error,this.error_description=t.error_description}}class K extends l{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t});i(this,"name","InvalidRequestException");i(this,"$fault","client");i(this,"error");i(this,"error_description");Object.setPrototypeOf(this,K.prototype),this.error=t.error,this.error_description=t.error_description}}class U extends l{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t});i(this,"name","InvalidScopeException");i(this,"$fault","client");i(this,"error");i(this,"error_description");Object.setPrototypeOf(this,U.prototype),this.error=t.error,this.error_description=t.error_description}}class H extends l{constructor(t){super({name:"SlowDownException",$fault:"client",...t});i(this,"name","SlowDownException");i(this,"$fault","client");i(this,"error");i(this,"error_description");Object.setPrototypeOf(this,H.prototype),this.error=t.error,this.error_description=t.error_description}}class M extends l{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t});i(this,"name","UnauthorizedClientException");i(this,"$fault","client");i(this,"error");i(this,"error_description");Object.setPrototypeOf(this,M.prototype),this.error=t.error,this.error_description=t.error_description}}class F extends l{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t});i(this,"name","UnsupportedGrantTypeException");i(this,"$fault","client");i(this,"error");i(this,"error_description");Object.setPrototypeOf(this,F.prototype),this.error=t.error,this.error_description=t.error_description}}var Ne=a(38770);const ue=(e,n)=>(0,Ne.w)(e,n).then(t=>{if(t.length)try{return JSON.parse(t)}catch(o){throw o?.name==="SyntaxError"&&Object.defineProperty(o,"$responseBodyText",{value:t}),o}return{}}),Ze=async(e,n)=>{const t=await ue(e,n);return t.message=t.message??t.Message,t},We=(e,n)=>{const t=(c,d)=>Object.keys(c).find(_=>_.toLowerCase()===d.toLowerCase()),o=c=>{let d=c;return typeof d=="number"&&(d=d.toString()),d.indexOf(",")>=0&&(d=d.split(",")[0]),d.indexOf(":")>=0&&(d=d.split(":")[0]),d.indexOf("#")>=0&&(d=d.split("#")[1]),d},s=t(e.headers,"x-amzn-errortype");if(s!==void 0)return o(e.headers[s]);if(n.code!==void 0)return o(n.code);if(n.__type!==void 0)return o(n.__type)},Ye=async(e,n)=>{const t=(0,I.lI)(e,n),o={"content-type":"application/json"};t.bp("/token");let s;return s=JSON.stringify((0,r.s)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:c=>(0,r.Ss)(c)})),t.m("POST").h(o).b(s),t.build()},Xe=async(e,n)=>{if(e.statusCode!==200&&e.statusCode>=300)return Qe(e,n);const t=(0,r.Tj)({$metadata:m(e)}),o=(0,r.Y0)((0,r.Xk)(await ue(e.body,n)),"body"),s=(0,r.s)(o,{accessToken:r.lK,expiresIn:r.ET,idToken:r.lK,refreshToken:r.lK,tokenType:r.lK});return Object.assign(t,s),t},Qe=async(e,n)=>{const t={...e,body:await Ze(e.body,n)},o=We(e,t.body);switch(o){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await et(t,n);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await tt(t,n);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await rt(t,n);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await nt(t,n);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await ot(t,n);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await st(t,n);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await it(t,n);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await at(t,n);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await ct(t,n);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await dt(t,n);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await lt(t,n);default:const s=t.body;return qe({output:e,parsedBody:s,errorCode:o})}},qe=(0,r.jr)(l),et=async(e,n)=>{const t=(0,r.Tj)({}),o=e.body,s=(0,r.s)(o,{error:r.lK,error_description:r.lK});Object.assign(t,s);const c=new D({$metadata:m(e),...t});return(0,r.Mw)(c,e.body)},tt=async(e,n)=>{const t=(0,r.Tj)({}),o=e.body,s=(0,r.s)(o,{error:r.lK,error_description:r.lK});Object.assign(t,s);const c=new O({$metadata:m(e),...t});return(0,r.Mw)(c,e.body)},rt=async(e,n)=>{const t=(0,r.Tj)({}),o=e.body,s=(0,r.s)(o,{error:r.lK,error_description:r.lK});Object.assign(t,s);const c=new R({$metadata:m(e),...t});return(0,r.Mw)(c,e.body)},nt=async(e,n)=>{const t=(0,r.Tj)({}),o=e.body,s=(0,r.s)(o,{error:r.lK,error_description:r.lK});Object.assign(t,s);const c=new j({$metadata:m(e),...t});return(0,r.Mw)(c,e.body)},ot=async(e,n)=>{const t=(0,r.Tj)({}),o=e.body,s=(0,r.s)(o,{error:r.lK,error_description:r.lK});Object.assign(t,s);const c=new k({$metadata:m(e),...t});return(0,r.Mw)(c,e.body)},st=async(e,n)=>{const t=(0,r.Tj)({}),o=e.body,s=(0,r.s)(o,{error:r.lK,error_description:r.lK});Object.assign(t,s);const c=new z({$metadata:m(e),...t});return(0,r.Mw)(c,e.body)},it=async(e,n)=>{const t=(0,r.Tj)({}),o=e.body,s=(0,r.s)(o,{error:r.lK,error_description:r.lK});Object.assign(t,s);const c=new K({$metadata:m(e),...t});return(0,r.Mw)(c,e.body)},at=async(e,n)=>{const t=(0,r.Tj)({}),o=e.body,s=(0,r.s)(o,{error:r.lK,error_description:r.lK});Object.assign(t,s);const c=new U({$metadata:m(e),...t});return(0,r.Mw)(c,e.body)},ct=async(e,n)=>{const t=(0,r.Tj)({}),o=e.body,s=(0,r.s)(o,{error:r.lK,error_description:r.lK});Object.assign(t,s);const c=new H({$metadata:m(e),...t});return(0,r.Mw)(c,e.body)},dt=async(e,n)=>{const t=(0,r.Tj)({}),o=e.body,s=(0,r.s)(o,{error:r.lK,error_description:r.lK});Object.assign(t,s);const c=new M({$metadata:m(e),...t});return(0,r.Mw)(c,e.body)},lt=async(e,n)=>{const t=(0,r.Tj)({}),o=e.body,s=(0,r.s)(o,{error:r.lK,error_description:r.lK});Object.assign(t,s);const c=new F({$metadata:m(e),...t});return(0,r.Mw)(c,e.body)},m=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),gt=(e,n)=>collectBody(e,n).then(t=>n.utf8Encoder(t));class me extends r.uB.classBuilder().ep(Te).m(function(n,t,o,s){return[(0,Be.TM)(o,this.serialize,this.deserialize),(0,B.rD)(o,n.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(Je,Le).ser(Ye).de(Xe).build(){}const pt={CreateTokenCommand:me};class ht extends he{}(0,r.J1)(pt,ht)}};
