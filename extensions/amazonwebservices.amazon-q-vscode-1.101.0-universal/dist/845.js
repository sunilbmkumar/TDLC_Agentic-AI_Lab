"use strict";var Lc=Object.defineProperty;var Hc=(Y,k,S)=>k in Y?Lc(Y,k,{enumerable:!0,configurable:!0,writable:!0,value:S}):Y[k]=S;var x=(Y,k,S)=>(Hc(Y,typeof k!="symbol"?k+"":k,S),S);exports.id=845,exports.ids=[845],exports.modules={79845:(Y,k,S)=>{S.d(k,{GetRoleCredentialsCommand:()=>Mo,SSOClient:()=>Fc});const vr=async e=>{const t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),$r(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!kr(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Pr=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Dr=/(\d+\.){3}\d+/,xr=/\.\./,zc=/\./,jc=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,kr=e=>Pr.test(e)&&!Dr.test(e)&&!xr.test(e),$r=e=>{const[t,n,r,,,s]=e.split(":"),o=t==="arn"&&e.split(":").length>=6,i=Boolean(o&&n&&r&&s);if(o&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},Mr=(e,t,n)=>{const r=async()=>{const s=n[e]??n[t];return typeof s=="function"?s():s};return e==="credentialScope"||t==="CredentialScope"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.credentialScope??s?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.accountId??s?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{const s=await r();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:o,hostname:i,port:a,path:c}=s;return`${o}//${i}${a?":"+a:""}${c}`}}return s}:r};class ue extends Error{constructor(t,n=!0){let r,s=!0;typeof n=="boolean"?(r=void 0,s=n):n!=null&&typeof n=="object"&&(r=n.logger,s=n.tryNextLink??!0),super(t),this.name="ProviderError",this.tryNextLink=s,Object.setPrototypeOf(this,ue.prototype),r?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${t}`)}static from(t,n=!0){return Object.assign(new this(t.message,n),t)}}class _e extends ue{constructor(t,n=!0){super(t,n),this.name="CredentialsProviderError",Object.setPrototypeOf(this,_e.prototype)}}class Pt extends ue{constructor(t,n=!0){super(t,n),this.name="TokenProviderError",Object.setPrototypeOf(this,Pt.prototype)}}const Fr=(...e)=>async()=>{if(e.length===0)throw new ue("No providers in chain");let t;for(const n of e)try{return await n()}catch(r){if(t=r,r?.tryNextLink)continue;throw r}throw t},Ur=e=>()=>Promise.resolve(e),Dt=(e,t,n)=>{let r,s,o,i=!1;const a=async()=>{s||(s=e());try{r=await s,o=!0,i=!1}finally{s=void 0}return r};return t===void 0?async c=>((!o||c?.forceRefresh)&&(r=await a()),r):async c=>((!o||c?.forceRefresh)&&(r=await a()),i?r:n&&!n(r)?(i=!0,r):(t(r)&&await a(),r))};function xt(e){try{const t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}const Lr=(e,t)=>async()=>{try{const n=e(process.env);if(n===void 0)throw new Error;return n}catch(n){throw new _e(n.message||`Not found in ENV: ${xt(e.toString())}`,{logger:t})}};var We=S(70857),de=S(16928);const Ke={},Hr=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Xe=()=>{const{HOME:e,USERPROFILE:t,HOMEPATH:n,HOMEDRIVE:r=`C:${de.sep}`}=process.env;if(e)return e;if(t)return t;if(n)return`${r}${n}`;const s=Hr();return Ke[s]||(Ke[s]=(0,We.homedir)()),Ke[s]},zr="AWS_PROFILE",jr="default",Br=e=>e.profile||process.env[zr]||jr;var kt=S(76982);const Bc=e=>{const n=createHash("sha1").update(e).digest("hex");return join(getHomeDir(),".aws","sso","cache",`${n}.json`)};var be=S(79896);const{readFile:Gr}=be.promises,Gc=async e=>{const t=getSSOTokenFilepath(e),n=await Gr(t,"utf8");return JSON.parse(n)};var $t;(function(e){e.HEADER="header",e.QUERY="query"})($t||($t={}));var Mt;(function(e){e.HEADER="header",e.QUERY="query"})(Mt||(Mt={}));var le;(function(e){e.HTTP="http",e.HTTPS="https"})(le||(le={}));var J;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(J||(J={}));const qc=e=>{const t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>J.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>J.MD5,checksumConstructor:()=>e.md5}),{_checksumAlgorithms:t,addChecksumAlgorithm(n){this._checksumAlgorithms.push(n)},checksumAlgorithms(){return this._checksumAlgorithms}}},Vc=e=>{const t={};return e.checksumAlgorithms().forEach(n=>{t[n.algorithmId()]=n.checksumConstructor()}),t},Wc=e=>({...getChecksumConfiguration(e)}),Kc=e=>({...resolveChecksumRuntimeConfig(e)});var Ft;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Ft||(Ft={}));const Ye="__smithy_context";var fe;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(fe||(fe={}));var Ut;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Ut||(Ut={}));const qr=e=>Object.entries(e).filter(([t])=>{const n=t.indexOf(Q);return n===-1?!1:Object.values(fe).includes(t.substring(0,n))}).reduce((t,[n,r])=>{const s=n.indexOf(Q),o=n.substring(0,s)===fe.PROFILE?n.substring(s+1):n;return t[o]=r,t},{...e.default&&{default:e.default}}),Vr="AWS_CONFIG_FILE",Wr=()=>process.env[Vr]||(0,de.join)(Xe(),".aws","config"),Kr="AWS_SHARED_CREDENTIALS_FILE",Xr=()=>process.env[Kr]||(0,de.join)(Xe(),".aws","credentials"),Yr=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,Jr=["__proto__","profile __proto__"],Lt=e=>{const t={};let n,r;for(const s of e.split(/\r?\n/)){const o=s.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){n=void 0,r=void 0;const a=o.substring(1,o.length-1),c=Yr.exec(a);if(c){const[,u,,f]=c;Object.values(fe).includes(u)&&(n=[u,f].join(Q))}else n=a;if(Jr.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(n){const a=o.indexOf("=");if(![0,-1].includes(a)){const[c,u]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(u==="")r=c;else{r&&s.trimStart()===s&&(r=void 0),t[n]=t[n]||{};const f=r?[r,c].join(Q):c;t[n][f]=u}}}}return t},{readFile:Qr}=be.promises,Je={},Ht=(e,t)=>((!Je[e]||t?.ignoreCache)&&(Je[e]=Qr(e,"utf8")),Je[e]),zt=()=>({}),Q=".",Zr=async(e={})=>{const{filepath:t=Xr(),configFilepath:n=Wr()}=e,r=Xe(),s="~/";let o=t;t.startsWith(s)&&(o=(0,de.join)(r,t.slice(2)));let i=n;n.startsWith(s)&&(i=(0,de.join)(r,n.slice(2)));const a=await Promise.all([Ht(i,{ignoreCache:e.ignoreCache}).then(Lt).then(qr).catch(zt),Ht(o,{ignoreCache:e.ignoreCache}).then(Lt).catch(zt)]);return{configFile:a[0],credentialsFile:a[1]}},Xc=e=>Object.entries(e).filter(([t])=>t.startsWith(IniSectionType.SSO_SESSION+CONFIG_PREFIX_SEPARATOR)).reduce((t,[n,r])=>({...t,[n.substring(n.indexOf(CONFIG_PREFIX_SEPARATOR)+1)]:r}),{}),es=()=>({}),Yc=async(e={})=>slurpFile(e.configFilepath??getConfigFilepath()).then(parseIni).then(getSsoSessionData).catch(es),Jc=async e=>{const t=await loadSharedConfigFiles(e);return mergeConfigFiles(t.configFile,t.credentialsFile)},ts=(e,{preferredFile:t="config",...n}={})=>async()=>{const r=Br(n),{configFile:s,credentialsFile:o}=await Zr(n),i=o[r]||{},a=s[r]||{},c=t==="config"?{...i,...a}:{...a,...i};try{const f=e(c,t==="config"?s:o);if(f===void 0)throw new Error;return f}catch(u){throw new _e(u.message||`Not found in config files w/ profile [${r}]: ${xt(e.toString())}`,{logger:n.logger})}},ns=e=>typeof e=="function",rs=e=>ns(e)?async()=>await e():Ur(e),$=({environmentVariableSelector:e,configFileSelector:t,default:n},r={})=>Dt(Fr(Lr(e),ts(t,r),rs(n))),jt="AWS_ENDPOINT_URL",Bt="endpoint_url",ss=e=>({environmentVariableSelector:t=>{const n=e.split(" ").map(o=>o.toUpperCase()),r=t[[jt,...n].join("_")];if(r)return r;const s=t[jt];if(s)return s},configFileSelector:(t,n)=>{if(n&&t.services){const s=n[["services",t.services].join(Q)];if(s){const o=e.split(" ").map(a=>a.toLowerCase()),i=s[[o.join("_"),Bt].join(Q)];if(i)return i}}const r=t[Bt];if(r)return r},default:void 0}),Gt=async e=>$(ss(e??""))();var os=S(57413);const Ce=e=>{if(typeof e=="string")return Ce(new URL(e));const{hostname:t,pathname:n,port:r,protocol:s,search:o}=e;let i;return o&&(i=(0,os.J)(o)),{hostname:t,port:r?parseInt(r):void 0,protocol:s,path:n,query:i}},qt=e=>typeof e=="object"?"url"in e?Ce(e.url):e:Ce(e),is=async(e,t,n,r)=>{if(!n.endpoint){let i;n.serviceConfiguredEndpoint?i=await n.serviceConfiguredEndpoint():i=await Gt(n.serviceId),i&&(n.endpoint=()=>Promise.resolve(qt(i)))}const s=await as(e,t,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)},as=async(e,t,n)=>{const r={},s=t?.getEndpointParameterInstructions?.()||{};for(const[o,i]of Object.entries(s))switch(i.type){case"staticContextParams":r[o]=i.value;break;case"contextParams":r[o]=e[i.name];break;case"clientContextParams":case"builtInParams":r[o]=await Mr(i.name,o,n)();break;case"operationContextParams":r[o]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(s).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&await vr(r),r},Qc=e=>e[SMITHY_CONTEXT_KEY]||(e[SMITHY_CONTEXT_KEY]={}),Ie=e=>e[Ye]||(e[Ye]={}),U=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t};function cs(e){const t=new Map;for(const n of e)t.set(n.schemeId,n);return t}const us=(e,t)=>(n,r)=>async s=>{const o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,r,s.input)),i=cs(e.httpAuthSchemes),a=Ie(r),c=[];for(const u of o){const f=i.get(u.schemeId);if(!f){c.push(`HttpAuthScheme \`${u.schemeId}\` was not enabled for this service.`);continue}const d=f.identityProvider(await t.identityProviderConfigProvider(e));if(!d){c.push(`HttpAuthScheme \`${u.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:l={},signingProperties:h={}}=u.propertiesExtractor?.(e,r)||{};u.identityProperties=Object.assign(u.identityProperties||{},l),u.signingProperties=Object.assign(u.signingProperties||{},h),a.selectedHttpAuthScheme={httpAuthOption:u,identity:await d(u.identityProperties),signer:f.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(c.join(`
`));return n(s)},ds={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},ls=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(us(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),ds)}}),fs=(e,t)=>(n,r)=>async s=>{const{response:o}=await n(s);try{const i=await t(o,e);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){const a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(a):r.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText)}throw i}},hs=(e,t)=>(n,r)=>async s=>{const o=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const i=await t(s.input,{...e,endpoint:o});return n({...s,request:i})},ps={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Qe={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function gs(e,t,n){return{applyToStack:r=>{r.add(fs(e,n),ps),r.add(hs(e,t),Qe)}}}const ms={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Qe.name},Zc=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(httpAuthSchemeMiddleware(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),ms)}}),ys=e=>{let t=e.httpHandler;return{setHttpHandler(n){t=n},httpHandler(){return t},updateHttpClientConfig(n,r){t.updateHttpClientConfig(n,r)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},ws=e=>({httpHandler:e.httpHandler()});class eu{constructor({name:t,kind:n=FieldPosition.HEADER,values:r=[]}){this.name=t,this.kind=n,this.values=r}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(n=>n!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}}class T{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){const n=new T({...t,headers:{...t.headers}});return n.query&&(n.query=Es(n.query)),n}static isInstance(t){if(!t)return!1;const n=t;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return T.clone(this)}}function Es(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return{...t,[n]:Array.isArray(r)?[...r]:r}},{})}class Ne{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const n=t;return typeof n.statusCode=="number"&&typeof n.headers=="object"}}const Ss=e=>t=>{throw t},Rs=(e,t)=>{},As=e=>(t,n)=>async r=>{if(!T.isInstance(r.request))return t(r);const o=Ie(n).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=o,u=await t({...r,request:await c.sign(r.request,a,i)}).catch((c.errorHandler||Ss)(i));return(c.successHandler||Rs)(u.response,i),u},Ts={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},_s=e=>({applyToStack:t=>{t.addRelativeTo(As(e),Ts)}}),he=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t};var Ze=S(4902);const bs=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Ze.Mu.mutate(e);if(!e)return Ze.Mu.mutate(new Uint8Array);const n=t.streamCollector(e);return Ze.Mu.mutate(await n)};function Vt(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}const Cs=(e,t,n,r,s,o)=>{if(t!=null&&t[n]!==void 0){const i=r();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");e=e.replace(s,o?i.split("/").map(a=>Vt(a)).join("/"):Vt(i))}else throw new Error("No value provided for input HTTP label: "+n+".");return e};function Is(e,t){return new Ns(e,t)}class Ns{constructor(t,n){this.input=t,this.context=n,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:t,protocol:n="https",port:r,path:s}=await this.context.endpoint();this.path=s;for(const o of this.resolvePathStack)o(this.path);return new T({protocol:n,hostname:this.hostname||t,port:r,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(n=>{this.path=`${n?.endsWith("/")?n.slice(0,-1):n||""}`+t}),this}p(t,n,r,s){return this.resolvePathStack.push(o=>{this.path=Cs(o,this.input,t,n,r,s)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}function Os(e,t,n){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=n}class vs{constructor(t){this.authSchemes=new Map;for(const[n,r]of Object.entries(t))r!==void 0&&this.authSchemes.set(n,r)}getIdentityProvider(t){return this.authSchemes.get(t)}}class tu{async sign(t,n,r){if(!r)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!r.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!r.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!n.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");const s=HttpRequest.clone(t);if(r.in===HttpApiKeyAuthLocation.QUERY)s.query[r.name]=n.apiKey;else if(r.in===HttpApiKeyAuthLocation.HEADER)s.headers[r.name]=r.scheme?`${r.scheme} ${n.apiKey}`:n.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+r.in+"`");return s}}class nu{async sign(t,n,r){const s=HttpRequest.clone(t);if(!n.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${n.token}`,s}}class Ps{async sign(t,n,r){return t}}const Ds=(e=>t=>Wt(t)&&t.expiration.getTime()-Date.now()<e)(3e5),Wt=e=>e.expiration!==void 0,xs=(e,t,n)=>{if(e===void 0)return;const r=typeof e!="function"?async()=>Promise.resolve(e):e;let s,o,i,a=!1;const c=async u=>{o||(o=r(u));try{s=await o,i=!0,a=!1}finally{o=void 0}return s};return t===void 0?async u=>((!i||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!i||u?.forceRefresh)&&(s=await c(u)),a?s:n(s)?(t(s)&&await c(u),s):(a=!0,s))},ks=({config:e,instructions:t})=>(n,r)=>async s=>{e.endpoint&&Os(r,"ENDPOINT_OVERRIDE","N");const o=await is(s.input,{getEndpointParameterInstructions(){return t}},{...e},r);r.endpointV2=o,r.authSchemes=o.properties?.authSchemes;const i=r.authSchemes?.[0];if(i){r.signing_region=i.signingRegion,r.signing_service=i.signingName;const c=Ie(r)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return n({...s})},$s={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Qe.name},Ms=(e,t)=>({applyToStack:n=>{n.addRelativeTo(ks({config:e,instructions:t}),$s)}}),Fs=e=>{const t=e.tls??!0,{endpoint:n}=e,r=n!=null?async()=>qt(await U(n)()):void 0,o={...e,endpoint:r,tls:t,isCustomEndpoint:!!n,useDualstackEndpoint:U(e.useDualstackEndpoint??!1),useFipsEndpoint:U(e.useFipsEndpoint??!1)};let i;return o.serviceConfiguredEndpoint=async()=>(e.serviceId&&!i&&(i=Gt(e.serviceId)),i),o},V=(e,t)=>{const n=[];if(e&&n.push(e),t)for(const r of t)n.push(r);return n},L=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Oe=()=>{let e=[],t=[],n=!1;const r=new Set,s=d=>d.sort((l,h)=>Kt[h.step]-Kt[l.step]||Xt[h.priority||"normal"]-Xt[l.priority||"normal"]),o=d=>{let l=!1;const h=g=>{const w=V(g.name,g.aliases);if(w.includes(d)){l=!0;for(const p of w)r.delete(p);return!1}return!0};return e=e.filter(h),t=t.filter(h),l},i=d=>{let l=!1;const h=g=>{if(g.middleware===d){l=!0;for(const w of V(g.name,g.aliases))r.delete(w);return!1}return!0};return e=e.filter(h),t=t.filter(h),l},a=d=>(e.forEach(l=>{d.add(l.middleware,{...l})}),t.forEach(l=>{d.addRelativeTo(l.middleware,{...l})}),d.identifyOnResolve?.(f.identifyOnResolve()),d),c=d=>{const l=[];return d.before.forEach(h=>{h.before.length===0&&h.after.length===0?l.push(h):l.push(...c(h))}),l.push(d),d.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?l.push(h):l.push(...c(h))}),l},u=(d=!1)=>{const l=[],h=[],g={};return e.forEach(p=>{const m={...p,before:[],after:[]};for(const R of V(m.name,m.aliases))g[R]=m;l.push(m)}),t.forEach(p=>{const m={...p,before:[],after:[]};for(const R of V(m.name,m.aliases))g[R]=m;h.push(m)}),h.forEach(p=>{if(p.toMiddleware){const m=g[p.toMiddleware];if(m===void 0){if(d)return;throw new Error(`${p.toMiddleware} is not found when adding ${L(p.name,p.aliases)} middleware ${p.relation} ${p.toMiddleware}`)}p.relation==="after"&&m.after.push(p),p.relation==="before"&&m.before.push(p)}}),s(l).map(c).reduce((p,m)=>(p.push(...m),p),[])},f={add:(d,l={})=>{const{name:h,override:g,aliases:w}=l,p={step:"initialize",priority:"normal",middleware:d,...l},m=V(h,w);if(m.length>0){if(m.some(R=>r.has(R))){if(!g)throw new Error(`Duplicate middleware name '${L(h,w)}'`);for(const R of m){const y=e.findIndex(q=>q.name===R||q.aliases?.some(X=>X===R));if(y===-1)continue;const E=e[y];if(E.step!==p.step||p.priority!==E.priority)throw new Error(`"${L(E.name,E.aliases)}" middleware with ${E.priority} priority in ${E.step} step cannot be overridden by "${L(h,w)}" middleware with ${p.priority} priority in ${p.step} step.`);e.splice(y,1)}}for(const R of m)r.add(R)}e.push(p)},addRelativeTo:(d,l)=>{const{name:h,override:g,aliases:w}=l,p={middleware:d,...l},m=V(h,w);if(m.length>0){if(m.some(R=>r.has(R))){if(!g)throw new Error(`Duplicate middleware name '${L(h,w)}'`);for(const R of m){const y=t.findIndex(q=>q.name===R||q.aliases?.some(X=>X===R));if(y===-1)continue;const E=t[y];if(E.toMiddleware!==p.toMiddleware||E.relation!==p.relation)throw new Error(`"${L(E.name,E.aliases)}" middleware ${E.relation} "${E.toMiddleware}" middleware cannot be overridden by "${L(h,w)}" middleware ${p.relation} "${p.toMiddleware}" middleware.`);t.splice(y,1)}}for(const R of m)r.add(R)}t.push(p)},clone:()=>a(Oe()),use:d=>{d.applyToStack(f)},remove:d=>typeof d=="string"?o(d):i(d),removeByTag:d=>{let l=!1;const h=g=>{const{tags:w,name:p,aliases:m}=g;if(w&&w.includes(d)){const R=V(p,m);for(const y of R)r.delete(y);return l=!0,!1}return!0};return e=e.filter(h),t=t.filter(h),l},concat:d=>{const l=a(Oe());return l.use(d),l.identifyOnResolve(n||l.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),l},applyToStack:a,identify:()=>u(!0).map(d=>{const l=d.step??d.relation+" "+d.toMiddleware;return L(d.name,d.aliases)+" - "+l}),identifyOnResolve(d){return typeof d=="boolean"&&(n=d),n},resolve:(d,l)=>{for(const h of u().map(g=>g.middleware).reverse())d=h(d,l);return n&&console.log(f.identify()),d}};return f},Kt={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Xt={high:3,normal:2,low:1};class Us{constructor(t){this.config=t,this.middlewareStack=Oe()}send(t,n,r){const s=typeof n!="function"?n:void 0,o=typeof n=="function"?n:r,i=s===void 0&&this.config.cacheMiddleware===!0;let a;if(i){this.handlers||(this.handlers=new WeakMap);const c=this.handlers;c.has(t.constructor)?a=c.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,s),c.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,s);if(o)a(t).then(c=>o(null,c.output),c=>o(c)).catch(()=>{});else return a(t).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}class Yt{constructor(){this.middlewareStack=Oe()}static classBuilder(){return new Ls}resolveMiddlewareWithContext(t,n,r,{middlewareFn:s,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:f,CommandCtor:d}){for(const p of s.bind(this)(d,t,n,r))this.middlewareStack.use(p);const l=t.concat(this.middlewareStack),{logger:h}=n,g={logger:h,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[Ye]:{commandInstance:this,...u},...f},{requestHandler:w}=n;return l.resolve(p=>w.handle(p.request,r||{}),g)}}class Ls{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,n,r={}){return this._smithyContext={service:t,operation:n,...r},this}c(t={}){return this._additionalContext=t,this}n(t,n){return this._clientName=t,this._commandName=n,this}f(t=r=>r,n=r=>r){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=n,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){const t=this;let n;return n=class extends Yt{static getEndpointParameterInstructions(){return t._ep}constructor(...[r]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=r??{},t._init(this)}resolveMiddleware(r,s,o){return this.resolveMiddlewareWithContext(r,s,o,{CommandCtor:n,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}const et="***SensitiveInformation***",ou=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},iu=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&xe.warn(De(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){const t=e.toLowerCase();if((t==="false"||t==="true")&&xe.warn(De(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},ve=e=>{if(e!=null){if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&xe.warn(De(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},Hs=Math.ceil(2**127*(2-2**-23)),tt=e=>{const t=ve(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Hs)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},nt=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},au=null,Jt=e=>rt(e,32),Qt=e=>rt(e,16),Zt=e=>rt(e,8),rt=(e,t)=>{const n=nt(e);if(n!==void 0&&zs(n,t)!==n)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return n},zs=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},st=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},en=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},Pe=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return xe.warn(De(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},cu=e=>{if(e==null)return;const t=en(e),n=Object.entries(t).filter(([,r])=>r!=null).map(([r])=>r);if(n.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(n.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return t},uu=e=>ve(typeof e=="string"?Z(e):e),du=null,lu=e=>tt(typeof e=="string"?Z(e):e),js=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Z=e=>{const t=e.match(js);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},fu=e=>typeof e=="string"?tn(e):ve(e),hu=null,pu=null,gu=e=>typeof e=="string"?tn(e):tt(e),tn=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},mu=e=>nt(typeof e=="string"?Z(e):e),yu=null,wu=e=>Jt(typeof e=="string"?Z(e):e),Eu=e=>Qt(typeof e=="string"?Z(e):e),Su=e=>Zt(typeof e=="string"?Z(e):e),De=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),xe={warn:console.warn},Bs=null,ot=null;function Ru(e){const t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),s=e.getUTCDate(),o=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=o<10?`0${o}`:`${o}`,f=i<10?`0${i}`:`${i}`,d=a<10?`0${a}`:`${a}`;return`${Bs[r]}, ${c} ${ot[n]} ${t} ${u}:${f}:${d} GMT`}const Gs=null,Au=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=Gs.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[n,r,s,o,i,a,c,u]=t,f=strictParseShort(ee(r)),d=P(s,"month",1,12),l=P(o,"day",1,31);return pe(f,d,l,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})},qs=null,Tu=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=qs.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[n,r,s,o,i,a,c,u,f]=t,d=strictParseShort(ee(r)),l=P(s,"month",1,12),h=P(o,"day",1,31),g=pe(d,l,h,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u});return f.toUpperCase()!="Z"&&g.setTime(g.getTime()-no(f)),g},Vs=null,Ws=null,Ks=null,_u=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=Vs.exec(e);if(t){const[n,r,s,o,i,a,c,u]=t;return pe(strictParseShort(ee(o)),it(s),P(r,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})}if(t=Ws.exec(e),t){const[n,r,s,o,i,a,c,u]=t;return Js(pe(Xs(o),it(s),P(r,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(t=Ks.exec(e),t){const[n,r,s,o,i,a,c,u]=t;return pe(strictParseShort(ee(u)),it(r),P(s.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},bu=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=strictParseDouble(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},pe=(e,t,n,r)=>{const s=t-1;return Zs(e,s,n),new Date(Date.UTC(e,s,n,P(r.hours,"hour",0,23),P(r.minutes,"minute",0,59),P(r.seconds,"seconds",0,60),to(r.fractionalMilliseconds)))},Xs=e=>{const t=new Date().getUTCFullYear(),n=Math.floor(t/100)*100+strictParseShort(ee(e));return n<t?n+100:n},Ys=null,Js=e=>e.getTime()-new Date().getTime()>Ys?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,it=e=>{const t=ot.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},Qs=null,Zs=(e,t,n)=>{let r=Qs[t];if(t===1&&eo(e)&&(r=29),n>r)throw new TypeError(`Invalid day for ${ot[t]} in ${e}: ${n}`)},eo=e=>e%4===0&&(e%100!==0||e%400===0),P=(e,t,n,r)=>{const s=strictParseByte(ee(e));if(s<n||s>r)throw new TypeError(`${t} must be between ${n} and ${r}, inclusive`);return s},to=e=>e==null?0:strictParseFloat32("0."+e)*1e3,no=e=>{const t=e[0];let n=1;if(t=="+")n=1;else if(t=="-")n=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);const r=Number(e.substring(1,3)),s=Number(e.substring(4,6));return n*(r*60+s)*60*1e3},ee=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};class te extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;const n=t;return te.prototype.isPrototypeOf(n)||Boolean(n.$fault)&&Boolean(n.$metadata)&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;const n=t;return this===te?te.isInstance(t):te.isInstance(t)?n.name&&this.name?this.prototype.isPrototypeOf(t)||n.name===this.name:this.prototype.isPrototypeOf(t):!1}}const ge=(e,t={})=>{Object.entries(t).filter(([,r])=>r!==void 0).forEach(([r,s])=>{(e[r]==null||e[r]==="")&&(e[r]=s)});const n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},ro=({output:e,parsedBody:t,exceptionCtor:n,errorCode:r})=>{const s=oo(e),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new n({name:t?.code||t?.Code||r||o||"UnknownError",$fault:"client",$metadata:s});throw ge(i,t)},so=e=>({output:t,parsedBody:n,errorCode:r})=>{ro({output:t,parsedBody:n,exceptionCtor:e,errorCode:r})},oo=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),io=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};let nn=!1;const ao=e=>{e&&!nn&&parseInt(e.substring(1,e.indexOf(".")))<16&&(nn=!0)},co=e=>{const t=[];for(const n in J){const r=J[n];e[r]!==void 0&&t.push({algorithmId:()=>r,checksumConstructor:()=>e[r]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(n){this._checksumAlgorithms.push(n)},checksumAlgorithms(){return this._checksumAlgorithms}}},uo=e=>{const t={};return e.checksumAlgorithms().forEach(n=>{t[n.algorithmId()]=n.checksumConstructor()}),t},lo=e=>{let t=e.retryStrategy;return{setRetryStrategy(n){t=n},retryStrategy(){return t}}},fo=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},ho=e=>({...co(e),...lo(e)}),Cu=null,po=e=>({...uo(e),...fo(e)}),go=e=>e!=null,ne=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};ne.from=e=>e&&typeof e=="object"&&(e instanceof ne||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?ne(String(e)):ne(JSON.stringify(e)),ne.fromObject=ne.from;class rn{trace(){}debug(){}info(){}warn(){}error(){}}function H(e,t,n){let r,s,o;if(typeof t>"u"&&typeof n>"u")r={},o=e;else{if(r=e,typeof t=="function")return s=t,o=n,mo(r,s,o);o=t}for(const i of Object.keys(o)){if(!Array.isArray(o[i])){r[i]=o[i];continue}sn(r,null,o,i)}return r}const Iu=e=>{const t={};for(const[n,r]of Object.entries(e||{}))t[n]=[,r];return t},me=(e,t)=>{const n={};for(const r in t)sn(n,e,t,r);return n},mo=(e,t,n)=>H(e,Object.entries(n).reduce((r,[s,o])=>(Array.isArray(o)?r[s]=o:typeof o=="function"?r[s]=[t,o()]:r[s]=[t,o],r),{})),sn=(e,t,n,r)=>{if(t!==null){let i=n[r];typeof i=="function"&&(i=[,i]);const[a=yo,c=wo,u=r]=i;(typeof a=="function"&&a(t[u])||typeof a!="function"&&!!a)&&(e[r]=c(t[u]));return}let[s,o]=n[r];if(typeof o=="function"){let i;const a=s===void 0&&(i=o())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?e[r]=i:c&&(e[r]=o())}else{const i=s===void 0&&o!=null,a=typeof s=="function"&&!!s(o)||typeof s!="function"&&!!s;(i||a)&&(e[r]=o)}},yo=e=>e!=null,wo=e=>e,at=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(at);if(typeof e=="object"){const t={};for(const n of Object.keys(e))e[n]!=null&&(t[n]=at(e[n]));return t}return e},Eo=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),So={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class W extends te{constructor(t){super(t),Object.setPrototypeOf(this,W.prototype)}}class ct extends W{constructor(n){super({name:"InvalidRequestException",$fault:"client",...n});x(this,"name","InvalidRequestException");x(this,"$fault","client");Object.setPrototypeOf(this,ct.prototype)}}class ut extends W{constructor(n){super({name:"ResourceNotFoundException",$fault:"client",...n});x(this,"name","ResourceNotFoundException");x(this,"$fault","client");Object.setPrototypeOf(this,ut.prototype)}}class dt extends W{constructor(n){super({name:"TooManyRequestsException",$fault:"client",...n});x(this,"name","TooManyRequestsException");x(this,"$fault","client");Object.setPrototypeOf(this,dt.prototype)}}class lt extends W{constructor(n){super({name:"UnauthorizedException",$fault:"client",...n});x(this,"name","UnauthorizedException");x(this,"$fault","client");Object.setPrototypeOf(this,lt.prototype)}}const Ro=e=>({...e,...e.accessToken&&{accessToken:et}}),Ao=e=>({...e,...e.secretAccessKey&&{secretAccessKey:et},...e.sessionToken&&{sessionToken:et}}),To=e=>({...e,...e.roleCredentials&&{roleCredentials:Ao(e.roleCredentials)}}),Nu=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}}),Ou=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}}),vu=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}}),_o=(e,t)=>bs(e,t).then(n=>t.utf8Encoder(n)),on=(e,t)=>_o(e,t).then(n=>{if(n.length)try{return JSON.parse(n)}catch(r){throw r?.name==="SyntaxError"&&Object.defineProperty(r,"$responseBodyText",{value:n}),r}return{}}),bo=async(e,t)=>{const n=await on(e,t);return n.message=n.message??n.Message,n},Co=(e,t)=>{const n=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),r=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=n(e.headers,"x-amzn-errortype");if(s!==void 0)return r(e.headers[s]);if(t.code!==void 0)return r(t.code);if(t.__type!==void 0)return r(t.__type)},Io=async(e,t)=>{const n=Is(e,t),r=H({},go,{[Me]:e[$e]});n.bp("/federation/credentials");const s=H({[$o]:[,st(e[ko],"roleName")],[cn]:[,st(e[an],"accountId")]});let o;return n.m("GET").h(r).q(s).b(o),n.build()},Pu=async(e,t)=>{const n=rb(e,t),r=map({},isSerializableHeaderValue,{[Me]:e[$e]});n.bp("/assignment/roles");const s=map({[fn]:[,e[ln]],[dn]:[()=>e.maxResults!==void 0,()=>e[un].toString()],[cn]:[,__expectNonNull(e[an],"accountId")]});let o;return n.m("GET").h(r).q(s).b(o),n.build()},Du=async(e,t)=>{const n=rb(e,t),r=map({},isSerializableHeaderValue,{[Me]:e[$e]});n.bp("/assignment/accounts");const s=map({[fn]:[,e[ln]],[dn]:[()=>e.maxResults!==void 0,()=>e[un].toString()]});let o;return n.m("GET").h(r).q(s).b(o),n.build()},xu=async(e,t)=>{const n=rb(e,t),r=map({},isSerializableHeaderValue,{[Me]:e[$e]});n.bp("/logout");let s;return n.m("POST").h(r).b(s),n.build()},No=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ke(e,t);const n=H({$metadata:z(e)}),r=st(en(await on(e.body,t)),"body"),s=me(r,{roleCredentials:at});return Object.assign(n,s),n},ku=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ke(e,t);const n=map({$metadata:z(e)}),r=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),s=take(r,{nextToken:__expectString,roleList:_json});return Object.assign(n,s),n},$u=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ke(e,t);const n=map({$metadata:z(e)}),r=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),s=take(r,{accountList:_json,nextToken:__expectString});return Object.assign(n,s),n},Mu=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ke(e,t);const n=map({$metadata:z(e)});return await collectBody(e.body,t),n},ke=async(e,t)=>{const n={...e,body:await bo(e.body,t)},r=Co(e,n.body);switch(r){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await vo(n,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Po(n,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Do(n,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await xo(n,t);default:const s=n.body;return Oo({output:e,parsedBody:s,errorCode:r})}},Oo=so(W),vo=async(e,t)=>{const n=H({}),r=e.body,s=me(r,{message:Pe});Object.assign(n,s);const o=new ct({$metadata:z(e),...n});return ge(o,e.body)},Po=async(e,t)=>{const n=H({}),r=e.body,s=me(r,{message:Pe});Object.assign(n,s);const o=new ut({$metadata:z(e),...n});return ge(o,e.body)},Do=async(e,t)=>{const n=H({}),r=e.body,s=me(r,{message:Pe});Object.assign(n,s);const o=new dt({$metadata:z(e),...n});return ge(o,e.body)},xo=async(e,t)=>{const n=H({}),r=e.body,s=me(r,{message:Pe});Object.assign(n,s);const o=new lt({$metadata:z(e),...n});return ge(o,e.body)},z=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Fu=(e,t)=>collectBody(e,t).then(n=>t.utf8Encoder(n)),an="accountId",$e="accessToken",cn="account_id",un="maxResults",dn="max_result",ln="nextToken",fn="next_token",ko="roleName",$o="role_name",Me="x-amz-sso_bearer_token";class Mo extends Yt.classBuilder().ep(So).m(function(t,n,r,s){return[gs(r,this.serialize,this.deserialize),Ms(r,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(Ro,To).ser(Io).de(No).build(){}function Uu(e){return e}const Fo=e=>t=>async n=>{if(!T.isInstance(n.request))return t(n);const{request:r}=n,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let o=r.hostname;r.port!=null&&(o+=`:${r.port}`),r.headers.host=o}return t(n)},Uo={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Lo=e=>({applyToStack:t=>{t.add(Fo(e),Uo)}}),Ho=()=>(e,t)=>async n=>{try{const r=await e(n),{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,f=c??t.inputFilterSensitiveLog,d=u??t.outputFilterSensitiveLog,{$metadata:l,...h}=r.output;return i?.info?.({clientName:s,commandName:o,input:f(n.input),output:d(h),metadata:l}),r}catch(r){const{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,u=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:s,commandName:o,input:u(n.input),error:r,metadata:r.$metadata}),r}},zo={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},jo=e=>({applyToStack:t=>{t.add(Ho(),zo)}}),hn="X-Amzn-Trace-Id",Bo="AWS_LAMBDA_FUNCTION_NAME",Go="_X_AMZN_TRACE_ID",qo=e=>t=>async n=>{const{request:r}=n;if(!T.isInstance(r)||e.runtime!=="node"||r.headers.hasOwnProperty(hn))return t(n);const s=process.env[Bo],o=process.env[Go],i=a=>typeof a=="string"&&a.length>0;return i(s)&&i(o)&&(r.headers[hn]=o),t({...n,request:r})},Vo={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Wo=e=>({applyToStack:t=>{t.add(qo(e),Vo)}}),pn=void 0;function Ko(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function Xo(e){const t=he(e.userAgentAppId??pn);return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent,userAgentAppId:async()=>{const n=await t();if(!Ko(n)){const r=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?r?.warn("userAgentAppId must be a string or undefined."):n.length>50&&r?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}}}class Yo{constructor({size:t,params:n}){this.data=new Map,this.parameters=[],this.capacity=t??50,n&&(this.parameters=n)}get(t,n){const r=this.hash(t);if(r===!1)return n();if(!this.data.has(r)){if(this.data.size>this.capacity+10){const s=this.data.keys();let o=0;for(;;){const{value:i,done:a}=s.next();if(this.data.delete(i),a||++o>10)break}}this.data.set(r,n())}return this.data.get(r)}size(){return this.data.size}hash(t){let n="";const{parameters:r}=this;if(r.length===0)return!1;for(const s of r){const o=String(t[s]??"");if(o.includes("|;"))return!1;n+=o+"|;"}return n}}const Jo=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),gn=e=>Jo.test(e)||e.startsWith("[")&&e.endsWith("]"),Qo=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),ft=(e,t=!1)=>{if(!t)return Qo.test(e);const n=e.split(".");for(const r of n)if(!ft(r))return!1;return!0},Fe={},ye="endpoints";function j(e){return typeof e!="object"||e==null?e:"ref"in e?`$${j(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(j).join(", ")})`:JSON.stringify(e,null,2)}class b extends Error{constructor(t){super(t),this.name="EndpointError"}}const Zo=(e,t)=>e===t,ei=e=>{const t=e.split("."),n=[];for(const r of t){const s=r.indexOf("[");if(s!==-1){if(r.indexOf("]")!==r.length-1)throw new b(`Path: '${e}' does not end with ']'`);const o=r.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new b(`Invalid array index: '${o}' in path: '${e}'`);s!==0&&n.push(r.slice(0,s)),n.push(o)}else n.push(r)}return n},mn=(e,t)=>ei(t).reduce((n,r)=>{if(typeof n!="object")throw new b(`Index '${r}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},e),ti=e=>e!=null,ni=e=>!e,ht={[le.HTTP]:80,[le.HTTPS]:443},ri={booleanEquals:Zo,getAttr:mn,isSet:ti,isValidHostLabel:ft,not:ni,parseURL:e=>{const t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){const{hostname:l,port:h,protocol:g="",path:w="",query:p={}}=e,m=new URL(`${g}//${l}${h?`:${h}`:""}${w}`);return m.search=Object.entries(p).map(([R,y])=>`${R}=${y}`).join("&"),m}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const n=t.href,{host:r,hostname:s,pathname:o,protocol:i,search:a}=t;if(a)return null;const c=i.slice(0,-1);if(!Object.values(le).includes(c))return null;const u=gn(s),f=n.includes(`${r}:${ht[c]}`)||typeof e=="string"&&e.includes(`${r}:${ht[c]}`),d=`${r}${f?`:${ht[c]}`:""}`;return{scheme:c,authority:d,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:u}},stringEquals:(e,t)=>e===t,substring:(e,t,n,r)=>t>=n||e.length<n?null:r?e.substring(e.length-n,e.length-t):e.substring(t,n),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)},yn=(e,t)=>{const n=[],r={...t.endpointParams,...t.referenceRecord};let s=0;for(;s<e.length;){const o=e.indexOf("{",s);if(o===-1){n.push(e.slice(s));break}n.push(e.slice(s,o));const i=e.indexOf("}",o);if(i===-1){n.push(e.slice(o));break}e[o+1]==="{"&&e[i+1]==="}"&&(n.push(e.slice(o+1,i)),s=i+2);const a=e.substring(o+1,i);if(a.includes("#")){const[c,u]=a.split("#");n.push(mn(r[c],u))}else n.push(r[a]);s=i+1}return n.join("")},si=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],Ue=(e,t,n)=>{if(typeof e=="string")return yn(e,n);if(e.fn)return wn(e,n);if(e.ref)return si(e,n);throw new b(`'${t}': ${String(e)} is not a string, function or reference.`)},wn=({fn:e,argv:t},n)=>{const r=t.map(o=>["boolean","number"].includes(typeof o)?o:Ue(o,"arg",n)),s=e.split(".");return s[0]in Fe&&s[1]!=null?Fe[s[0]][s[1]](...r):ri[e](...r)},oi=({assign:e,...t},n)=>{if(e&&e in n.referenceRecord)throw new b(`'${e}' is already defined in Reference Record.`);const r=wn(t,n);return n.logger?.debug?.(`${ye} evaluateCondition: ${j(t)} = ${j(r)}`),{result:r===""?!0:!!r,...e!=null&&{toAssign:{name:e,value:r}}}},pt=(e=[],t)=>{const n={};for(const r of e){const{result:s,toAssign:o}=oi(r,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!s)return{result:s};o&&(n[o.name]=o.value,t.logger?.debug?.(`${ye} assign: ${o.name} := ${j(o.value)}`))}return{result:!0,referenceRecord:n}},ii=(e,t)=>Object.entries(e).reduce((n,[r,s])=>({...n,[r]:s.map(o=>{const i=Ue(o,"Header value entry",t);if(typeof i!="string")throw new b(`Header '${r}' value '${i}' is not a string`);return i})}),{}),En=(e,t)=>{if(Array.isArray(e))return e.map(n=>En(n,t));switch(typeof e){case"string":return yn(e,t);case"object":if(e===null)throw new b(`Unexpected endpoint property: ${e}`);return Sn(e,t);case"boolean":return e;default:throw new b(`Unexpected endpoint property type: ${typeof e}`)}},Sn=(e,t)=>Object.entries(e).reduce((n,[r,s])=>({...n,[r]:En(s,t)}),{}),ai=(e,t)=>{const n=Ue(e,"Endpoint URL",t);if(typeof n=="string")try{return new URL(n)}catch(r){throw console.error(`Failed to construct URL with ${n}`,r),r}throw new b(`Endpoint URL must be a string, got ${typeof n}`)},ci=(e,t)=>{const{conditions:n,endpoint:r}=e,{result:s,referenceRecord:o}=pt(n,t);if(!s)return;const i={...t,referenceRecord:{...t.referenceRecord,...o}},{url:a,properties:c,headers:u}=r;return t.logger?.debug?.(`${ye} Resolving endpoint from template: ${j(r)}`),{...u!=null&&{headers:ii(u,i)},...c!=null&&{properties:Sn(c,i)},url:ai(a,i)}},ui=(e,t)=>{const{conditions:n,error:r}=e,{result:s,referenceRecord:o}=pt(n,t);if(!!s)throw new b(Ue(r,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},di=(e,t)=>{const{conditions:n,rules:r}=e,{result:s,referenceRecord:o}=pt(n,t);if(!!s)return Rn(r,{...t,referenceRecord:{...t.referenceRecord,...o}})},Rn=(e,t)=>{for(const n of e)if(n.type==="endpoint"){const r=ci(n,t);if(r)return r}else if(n.type==="error")ui(n,t);else if(n.type==="tree"){const r=di(n,t);if(r)return r}else throw new b(`Unknown endpoint rule: ${n}`);throw new b("Rules evaluation failed")},li=(e,t)=>{const{endpointParams:n,logger:r}=t,{parameters:s,rules:o}=e;t.logger?.debug?.(`${ye} Initial EndpointParams: ${j(n)}`);const i=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,f])=>[u,f.default]);if(i.length>0)for(const[u,f]of i)n[u]=n[u]??f;const a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(const u of a)if(n[u]==null)throw new b(`Missing required parameter: '${u}'`);const c=Rn(o,{endpointParams:n,logger:r,referenceRecord:{}});return t.logger?.debug?.(`${ye} Resolved endpoint: ${j(c)}`),c},An=(e,t=!1)=>{if(t){for(const n of e.split("."))if(!An(n))return!1;return!0}return!(!ft(e)||e.length<3||e.length>63||e!==e.toLowerCase()||gn(e))},Tn=":",fi="/",hi=e=>{const t=e.split(Tn);if(t.length<6)return null;const[n,r,s,o,i,...a]=t;if(n!=="arn"||r===""||s===""||a.join(Tn)==="")return null;const c=a.map(u=>u.split(fi)).flat();return{partition:r,service:s,region:o,accountId:i,resourceId:c}};let _n=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il|mx)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"ap-southeast-5":{"description":"Asia Pacific (Malaysia)"},"ap-southeast-7":{"description":"Asia Pacific (Thailand)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"mx-central-1":{"description":"Mexico (Central)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-f-global":{"description":"AWS ISOF global region"},"us-isof-east-1":{"description":"US ISOF EAST"},"us-isof-south-1":{"description":"US ISOF SOUTH"}}}],"version":"1.1"}'),bn="";const pi=e=>{const{partitions:t}=_n;for(const r of t){const{regions:s,outputs:o}=r;for(const[i,a]of Object.entries(s))if(i===e)return{...o,...a}}for(const r of t){const{regionRegex:s,outputs:o}=r;if(new RegExp(s).test(e))return{...o}}const n=t.find(r=>r.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},gi=(e,t="")=>{_n=e,bn=t},Gu=()=>{gi(partitionsInfo,"")},mi=()=>bn,Cn={isVirtualHostableS3Bucket:An,parseArn:hi,partition:pi};Fe.aws=Cn;function D(e,t,n){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=n}const yi=/\d{12}\.ddb/;async function wi(e,t,n){if(n.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&D(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){const o=await t.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?D(e,"RETRY_MODE_ADAPTIVE","F"):D(e,"RETRY_MODE_STANDARD","E"):D(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){const o=e.endpointV2;switch(String(o?.url?.hostname).match(yi)&&D(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":D(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":D(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":D(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){const o=s;o.accountId&&D(e,"RESOLVED_ACCOUNT_ID","T");for(const[i,a]of Object.entries(o.$source??{}))D(e,i,a)}}const In="user-agent",gt="x-amz-user-agent",Nn=" ",mt="/",Ei=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Si=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,On="-",Ri=1024;function Ai(e){let t="";for(const n in e){const r=e[n];if(t.length+r.length+1<=Ri){t.length?t+=","+r:t+=r;continue}break}return t}const Ti=e=>(t,n)=>async r=>{const{request:s}=r;if(!T.isInstance(s))return t(r);const{headers:o}=s,i=n?.userAgent?.map(Le)||[],a=(await e.defaultUserAgentProvider()).map(Le);await wi(n,e,r);const c=n;a.push(`m/${Ai(Object.assign({},n.__smithy_context?.features,c.__aws_sdk_context?.features))}`);const u=e?.customUserAgent?.map(Le)||[],f=await e.userAgentAppId();f&&a.push(Le([`app/${f}`]));const d=mi(),l=(d?[d]:[]).concat([...a,...i,...u]).join(Nn),h=[...a.filter(g=>g.startsWith("aws-sdk-")),...u].join(Nn);return e.runtime!=="browser"?(h&&(o[gt]=o[gt]?`${o[In]} ${h}`:h),o[In]=l):o[gt]=l,t({...r,request:s})},Le=e=>{const t=e[0].split(mt).map(i=>i.replace(Ei,On)).join(mt),n=e[1]?.replace(Si,On),r=t.indexOf(mt),s=t.substring(0,r);let o=t.substring(r+1);return s==="api"&&(o=o.toLowerCase()),[s,o,n].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},_i={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},bi=e=>({applyToStack:t=>{t.add(Ti(e),_i)}}),He=(e,t,n)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${n} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var re;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(re||(re={}));const Ci="AWS_USE_DUALSTACK_ENDPOINT",Ii="use_dualstack_endpoint",qu=!1,Ni={environmentVariableSelector:e=>He(e,Ci,re.ENV),configFileSelector:e=>He(e,Ii,re.CONFIG),default:!1},Oi="AWS_USE_FIPS_ENDPOINT",vi="use_fips_endpoint",Vu=!1,Pi={environmentVariableSelector:e=>He(e,Oi,re.ENV),configFileSelector:e=>He(e,vi,re.CONFIG),default:!1},Wu=e=>{const{endpoint:t,urlParser:n}=e;return{...e,tls:e.tls??!0,endpoint:normalizeProvider(typeof t=="string"?n(t):t),isCustomEndpoint:!0,useDualstackEndpoint:normalizeProvider(e.useDualstackEndpoint??!1)}},Ku=e=>{const t=normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:n,useFipsEndpoint:r,urlParser:s}=e;return{...e,tls:e.tls??!0,endpoint:n?normalizeProvider(typeof n=="string"?s(n):n):()=>getEndpointFromRegion({...e,useDualstackEndpoint:t,useFipsEndpoint:r}),isCustomEndpoint:!!n,useDualstackEndpoint:t}},Di="AWS_REGION",xi="region",vn={environmentVariableSelector:e=>e[Di],configFileSelector:e=>e[xi],default:()=>{throw new Error("Region is missing")}},ki={preferredFile:"credentials"},Pn=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),Dn=e=>Pn(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,$i=e=>{const{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Dn(t);const r=await t();return Dn(r)},useFipsEndpoint:async()=>{const r=typeof t=="string"?t:await t();return Pn(r)?!0:typeof n!="function"?Promise.resolve(!!n):n()}}},xn="content-length";function Mi(e){return t=>async n=>{const r=n.request;if(T.isInstance(r)){const{body:s,headers:o}=r;if(s&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(xn)===-1)try{const i=e(s);r.headers={...r.headers,[xn]:String(i)}}catch{}}return t({...n,request:r})}}const Fi={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Ui=e=>({applyToStack:t=>{t.add(Mi(e.bodyLengthChecker),Fi)}});var B;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(B||(B={}));const we=3,kn=B.STANDARD;var M=S(16206);class Ee{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(!!this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const n=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>Ee.setTimeoutFn(r,n))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const n=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=t}updateClientSendingRate(t){let n;if(this.updateMeasuredRate(),(0,M.Qb)(t)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),n=Math.floor(t*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(t){return parseFloat(t.toFixed(8))}}Ee.setTimeoutFn=setTimeout;const Se=100,yt=20*1e3,$n=500,wt=500,Mn=5,Fn=10,Un=1,Ln="amz-sdk-invocation-id",Hn="amz-sdk-request",Li=()=>{let e=Se;return{computeNextBackoffDelay:r=>Math.floor(Math.min(yt,Math.random()*2**r*e)),setDelayBase:r=>{e=r}}},zn=({retryDelay:e,retryCount:t,retryCost:n})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(yt,e),getRetryCost:()=>n});class Et{constructor(t){this.maxAttempts=t,this.mode=B.STANDARD,this.capacity=wt,this.retryBackoffStrategy=Li(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return zn({retryDelay:Se,retryCount:0})}async refreshRetryTokenForRetry(t,n){const r=await this.getMaxAttempts();if(this.shouldRetry(t,n,r)){const s=n.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?$n:Se);const o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(s);return this.capacity-=a,zn({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(wt,this.capacity+(t.getRetryCost()??Un))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${we}`),we}}shouldRetry(t,n,r){return t.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(t){return t==="TRANSIENT"?Fn:Mn}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class Hi{constructor(t,n){this.maxAttemptsProvider=t,this.mode=B.ADAPTIVE;const{rateLimiter:r}=n??{};this.rateLimiter=r??new Ee,this.standardRetryStrategy=new Et(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(t,n)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}class Xu extends Et{constructor(t,n=Se){super(typeof t=="function"?t:async()=>t),typeof n=="number"?this.computeNextBackoffDelay=()=>n:this.computeNextBackoffDelay=n}async refreshRetryTokenForRetry(t,n){const r=await super.refreshRetryTokenForRetry(t,n);return r.getRetryDelay=()=>this.computeNextBackoffDelay(r.getRetryCount()),r}}var jn=S(3682);const zi=(e,t)=>{const n=e,r=t?.noRetryIncrement??Un,s=t?.retryCost??Mn,o=t?.timeoutRetryCost??Fn;let i=e;const a=d=>d.name==="TimeoutError"?o:s,c=d=>a(d)<=i;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:d=>{if(!c(d))throw new Error("No retry token available");const l=a(d);return i-=l,l},releaseRetryTokens:d=>{i+=d??r,i=Math.min(i,n)}})},ji=(e,t)=>Math.floor(Math.min(yt,Math.random()*2**t*e)),Bi=e=>e?(0,M.S0)(e)||(0,M.h5)(e)||(0,M.Qb)(e)||(0,M.bV)(e):!1,Bn=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);class Gi{constructor(t,n){this.maxAttemptsProvider=t,this.mode=B.STANDARD,this.retryDecider=n?.retryDecider??Bi,this.delayDecider=n?.delayDecider??ji,this.retryQuota=n?.retryQuota??zi(wt)}shouldRetry(t,n,r){return n<r&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=we}return t}async retry(t,n,r){let s,o=0,i=0;const a=await this.getMaxAttempts(),{request:c}=n;for(T.isInstance(c)&&(c.headers[Ln]=(0,jn.A)());;)try{T.isInstance(c)&&(c.headers[Hn]=`attempt=${o+1}; max=${a}`),r?.beforeRequest&&await r.beforeRequest();const{response:u,output:f}=await t(n);return r?.afterRequest&&r.afterRequest(u),this.retryQuota.releaseRetryTokens(s),f.$metadata.attempts=o+1,f.$metadata.totalRetryDelay=i,{response:u,output:f}}catch(u){const f=Bn(u);if(o++,this.shouldRetry(f,o,a)){s=this.retryQuota.retrieveRetryTokens(f);const d=this.delayDecider((0,M.Qb)(f)?$n:Se,o),l=qi(f.$response),h=Math.max(l||0,d);i+=h,await new Promise(g=>setTimeout(g,h));continue}throw f.$metadata||(f.$metadata={}),f.$metadata.attempts=o,f.$metadata.totalRetryDelay=i,f}}}const qi=e=>{if(!Ne.isInstance(e))return;const t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;const n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n).getTime()-Date.now():r*1e3};class Yu extends Gi{constructor(t,n){const{rateLimiter:r,...s}=n??{};super(t,s),this.rateLimiter=r??new Ee,this.mode=B.ADAPTIVE}async retry(t,n){return super.retry(t,n,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:r=>{this.rateLimiter.updateClientSendingRate(r)}})}}const Gn="AWS_MAX_ATTEMPTS",qn="max_attempts",Vi={environmentVariableSelector:e=>{const t=e[Gn];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Environment variable ${Gn} mast be a number, got "${t}"`);return n},configFileSelector:e=>{const t=e[qn];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Shared config file entry ${qn} mast be a number, got "${t}"`);return n},default:we},Wi=e=>{const{retryStrategy:t}=e,n=U(e.maxAttempts??we);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await U(e.retryMode)()===B.ADAPTIVE?new Hi(n):new Et(n))}},Ki="AWS_RETRY_MODE",Xi="retry_mode",Yi={environmentVariableSelector:e=>e[Ki],configFileSelector:e=>e[Xi],default:kn},Ji=()=>e=>async t=>{const{request:n}=t;return HttpRequest.isInstance(n)&&(delete n.headers[INVOCATION_ID_HEADER],delete n.headers[REQUEST_HEADER]),e(t)},Qi={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},Ju=e=>({applyToStack:t=>{t.addRelativeTo(Ji(),Qi)}});var St=S(2203);const Zi=e=>e?.body instanceof St.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream,ea=e=>(t,n)=>async r=>{let s=await e.retryStrategy();const o=await e.maxAttempts();if(ta(s)){s=s;let i=await s.acquireInitialRetryToken(n.partition_id),a=new Error,c=0,u=0;const{request:f}=r,d=T.isInstance(f);for(d&&(f.headers[Ln]=(0,jn.A)());;)try{d&&(f.headers[Hn]=`attempt=${c+1}; max=${o}`);const{response:l,output:h}=await t(r);return s.recordSuccess(i),h.$metadata.attempts=c+1,h.$metadata.totalRetryDelay=u,{response:l,output:h}}catch(l){const h=na(l);if(a=Bn(l),d&&Zi(f))throw(n.logger instanceof rn?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await s.refreshRetryTokenForRetry(i,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=i.getRetryCount();const g=i.getRetryDelay();u+=g,await new Promise(w=>setTimeout(w,g))}}else return s=s,s?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,r)},ta=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",na=e=>{const t={error:e,errorType:ra(e)},n=ia(e.$response);return n&&(t.retryAfterHint=n),t},ra=e=>(0,M.Qb)(e)?"THROTTLING":(0,M.bV)(e)?"TRANSIENT":(0,M.GQ)(e)?"SERVER_ERROR":"CLIENT_ERROR",sa={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},oa=e=>({applyToStack:t=>{t.add(ea(e),sa)}}),ia=e=>{if(!Ne.isInstance(e))return;const t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;const n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)};function aa(e,t,n){return e.$source||(e.$source={}),e.$source[t]=n,e}var G=S(73828),ze=S(21651),K=S(86170);const Re=e=>{const t=(0,K.s)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},se=e=>typeof e=="string"?Re(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),ca=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,K.Q)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},ua="X-Amz-Algorithm",da="X-Amz-Credential",Vn="X-Amz-Date",la="X-Amz-SignedHeaders",fa="X-Amz-Expires",Wn="X-Amz-Signature",Kn="X-Amz-Security-Token",Qu="X-Amz-Region-Set",Xn="authorization",Yn=Vn.toLowerCase(),ha=[Xn,Yn,"date"],pa=Wn.toLowerCase(),Rt="x-amz-content-sha256",ga=Kn.toLowerCase(),ed="host",ma={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},ya=/^proxy-/,wa=/^sec-/,td=null,At="AWS4-HMAC-SHA256",nd="AWS4-ECDSA-P256-SHA256",Ea="AWS4-HMAC-SHA256-PAYLOAD",Sa="UNSIGNED-PAYLOAD",Ra=50,Jn="aws4_request",Aa=60*60*24*7,oe={},je=[],Tt=(e,t,n)=>`${e}/${t}/${n}/${Jn}`,Ta=async(e,t,n,r,s)=>{const o=await Qn(e,t.secretAccessKey,t.accessKeyId),i=`${n}:${r}:${s}:${(0,G.n)(o)}:${t.sessionToken}`;if(i in oe)return oe[i];for(je.push(i);je.length>Ra;)delete oe[je.shift()];let a=`AWS4${t.secretAccessKey}`;for(const c of[n,r,s,Jn])a=await Qn(e,a,c);return oe[i]=a},rd=()=>{je.length=0,Object.keys(oe).forEach(e=>{delete oe[e]})},Qn=(e,t,n)=>{const r=new e(t);return r.update(se(n)),r.digest()},Zn=({headers:e},t,n)=>{const r={};for(const s of Object.keys(e).sort()){if(e[s]==null)continue;const o=s.toLowerCase();(o in ma||t?.has(o)||ya.test(o)||wa.test(o))&&(!n||n&&!n.has(o))||(r[o]=e[s].trim().replace(/\s+/g," "))}return r},_a=({query:e={}})=>{const t=[],n={};for(const r of Object.keys(e)){if(r.toLowerCase()===pa)continue;const s=(0,ze.o)(r);t.push(s);const o=e[r];typeof o=="string"?n[s]=`${s}=${(0,ze.o)(o)}`:Array.isArray(o)&&(n[s]=o.slice(0).reduce((i,a)=>i.concat([`${s}=${(0,ze.o)(a)}`]),[]).sort().join("&"))}return t.sort().map(r=>n[r]).filter(r=>r).join("&")};var ba=S(57487);const _t=async({headers:e,body:t},n)=>{for(const r of Object.keys(e))if(r.toLowerCase()===Rt)return e[r];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||(0,ba.m)(t)){const r=new n;return r.update(se(t)),(0,G.n)(await r.digest())}return Sa};class Ca{format(t){const n=[];for(const o of Object.keys(t)){const i=Re(o);n.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[o]))}const r=new Uint8Array(n.reduce((o,i)=>o+i.byteLength,0));let s=0;for(const o of n)r.set(o,s),s+=o.byteLength;return r}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,t.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,t.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":const o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);const i=new Uint8Array(o.buffer);return i.set(t.value,3),i;case"string":const a=Re(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":const f=new Uint8Array(9);return f[0]=8,f.set(bt.fromNumber(t.value.valueOf()).bytes,1),f;case"uuid":if(!Ia.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const d=new Uint8Array(17);return d[0]=9,d.set((0,G.a)(t.value.replace(/\-/g,"")),1),d}}}var er;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(er||(er={}));const Ia=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class bt{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(t));r>-1&&s>0;r--,s/=256)n[r]=s;return t<0&&tr(n),new bt(n)}valueOf(){const t=this.bytes.slice(0),n=t[0]&128;return n&&tr(t),parseInt((0,G.n)(t),16)*(n?-1:1)}toString(){return String(this.valueOf())}}function tr(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}const Na=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1},sd=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return t[n]},od=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))e===n.toLowerCase()&&delete t[n]},Oa=(e,t={})=>{const{headers:n,query:r={}}=T.clone(e);for(const s of Object.keys(n)){const o=s.toLowerCase();(o.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(o)||t.hoistableHeaders?.has(o))&&(r[s]=n[s],delete n[s])}return{...e,headers:n,query:r}},nr=e=>{e=T.clone(e);for(const t of Object.keys(e.headers))ha.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},va=e=>Pa(e).toISOString().replace(/\.\d{3}Z$/,"Z"),Pa=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class rr{constructor({applyChecksum:t,credentials:n,region:r,service:s,sha256:o,uriEscapePath:i=!0}){this.headerFormatter=new Ca,this.service=s,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=U(r),this.credentialProvider=U(n)}async presign(t,n={}){const{signingDate:r=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:c,signingRegion:u,signingService:f}=n,d=await this.credentialProvider();this.validateResolvedCredentials(d);const l=u??await this.regionProvider(),{longDate:h,shortDate:g}=Be(r);if(s>Aa)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const w=Tt(g,l,f??this.service),p=Oa(nr(t),{unhoistableHeaders:i,hoistableHeaders:c});d.sessionToken&&(p.query[Kn]=d.sessionToken),p.query[ua]=At,p.query[da]=`${d.accessKeyId}/${w}`,p.query[Vn]=h,p.query[fa]=s.toString(10);const m=Zn(p,o,a);return p.query[la]=sr(m),p.query[Wn]=await this.getSignature(h,w,this.getSigningKey(d,l,g,f),this.createCanonicalRequest(p,m,await _t(t,this.sha256))),p}async sign(t,n){return typeof t=="string"?this.signString(t,n):t.headers&&t.payload?this.signEvent(t,n):t.message?this.signMessage(t,n):this.signRequest(t,n)}async signEvent({headers:t,payload:n},{signingDate:r=new Date,priorSignature:s,signingRegion:o,signingService:i}){const a=o??await this.regionProvider(),{shortDate:c,longDate:u}=Be(r),f=Tt(c,a,i??this.service),d=await _t({headers:{},body:n},this.sha256),l=new this.sha256;l.update(t);const h=(0,G.n)(await l.digest()),g=[Ea,u,f,s,h,d].join(`
`);return this.signString(g,{signingDate:r,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:n=new Date,signingRegion:r,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:n,signingRegion:r,signingService:s,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:n=new Date,signingRegion:r,signingService:s}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const i=r??await this.regionProvider(),{shortDate:a}=Be(n),c=new this.sha256(await this.getSigningKey(o,i,a,s));return c.update(se(t)),(0,G.n)(await c.digest())}async signRequest(t,{signingDate:n=new Date,signableHeaders:r,unsignableHeaders:s,signingRegion:o,signingService:i}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const c=o??await this.regionProvider(),u=nr(t),{longDate:f,shortDate:d}=Be(n),l=Tt(d,c,i??this.service);u.headers[Yn]=f,a.sessionToken&&(u.headers[ga]=a.sessionToken);const h=await _t(u,this.sha256);!Na(Rt,u.headers)&&this.applyChecksum&&(u.headers[Rt]=h);const g=Zn(u,s,r),w=await this.getSignature(f,l,this.getSigningKey(a,c,d,i),this.createCanonicalRequest(u,g,h));return u.headers[Xn]=`${At} Credential=${a.accessKeyId}/${l}, SignedHeaders=${sr(g)}, Signature=${w}`,u}createCanonicalRequest(t,n,r){const s=Object.keys(n).sort();return`${t.method}
${this.getCanonicalPath(t)}
${_a(t)}
${s.map(o=>`${o}:${n[o]}`).join(`
`)}

${s.join(";")}
${r}`}async createStringToSign(t,n,r){const s=new this.sha256;s.update(se(r));const o=await s.digest();return`${At}
${t}
${n}
${(0,G.n)(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const n=[];for(const o of t.split("/"))o?.length!==0&&o!=="."&&(o===".."?n.pop():n.push(o));const r=`${t?.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&t?.endsWith("/")?"/":""}`;return(0,ze.o)(r).replace(/%2F/g,"/")}return t}async getSignature(t,n,r,s){const o=await this.createStringToSign(t,n,s),i=new this.sha256(await r);return i.update(se(o)),(0,G.n)(await i.digest())}getSigningKey(t,n,r,s){return Ta(this.sha256,t,r,n,s||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const Be=e=>{const t=va(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},sr=e=>Object.keys(e).sort().join(";"),Da=e=>{let t=!1,n;e.credentials&&(t=!0,n=xs(e.credentials,Ds,Wt)),n||(e.credentialDefaultProvider?n=he(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("`credentials` is missing")});const r=async()=>n({callerClientConfig:e}),{signingEscapePath:s=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e;let a;return e.signer?a=he(e.signer):e.regionInfoProvider?a=()=>he(e.region)().then(async c=>[await e.regionInfoProvider(c,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},c]).then(([c,u])=>{const{signingRegion:f,signingService:d}=c;e.signingRegion=e.signingRegion||f||u,e.signingName=e.signingName||d||e.serviceId;const l={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:s},h=e.signerConstructor||rr;return new h(l)}):a=async c=>{c=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await he(e.region)(),properties:{}},c);const u=c.signingRegion,f=c.signingName;e.signingRegion=e.signingRegion||u,e.signingName=e.signingName||f||e.serviceId;const d={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:s},l=e.signerConstructor||rr;return new l(d)},{...e,systemClockOffset:o,signingEscapePath:s,credentials:t?async()=>r().then(c=>aa(c,"CREDENTIALS_CODE","e")):r,signer:a}},id=null,xa=async(e,t,n)=>({operation:Ie(t).operation,region:await U(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function ka(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,n)=>({signingProperties:{config:t,context:n}})}}function Ge(e){return{schemeId:"smithy.api#noAuth"}}const $a=e=>{const t=[];switch(e.operation){case"GetRoleCredentials":{t.push(Ge(e));break}case"ListAccountRoles":{t.push(Ge(e));break}case"ListAccounts":{t.push(Ge(e));break}case"Logout":{t.push(Ge(e));break}default:t.push(ka(e))}return t},Ma=e=>({...Da(e)}),Fa={rE:"3.758.0"},or={warningEmitted:!1},Ua=e=>{e&&!or.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(or.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))};var Ct=S(932);const La={isCrtAvailable:!1},Ha=()=>La.isCrtAvailable?["md/crt-avail"]:null,za=({serviceId:e,clientVersion:t})=>async n=>{const r=[["aws-sdk-js",t],["ua","2.1"],[`os/${(0,We.platform)()}`,(0,We.release)()],["lang/js"],["md/nodejs",`${Ct.versions.node}`]],s=Ha();s&&r.push(s),e&&r.push([`api/${e}`,t]),Ct.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${Ct.env.AWS_EXECUTION_ENV}`]);const o=await n?.userAgentAppId?.();return o?[...r,[`app/${o}`]]:[...r]},ad=null,ja="AWS_SDK_UA_APP_ID",Ba="sdk_ua_app_id",Ga="sdk-ua-app-id",qa={environmentVariableSelector:e=>e[ja],configFileSelector:e=>e[Ba]??e[Ga],default:pn};var Va=S(20181);class Wa{constructor(t,n){this.algorithmIdentifier=t,this.secret=n,this.reset()}update(t,n){this.hash.update(se(ir(t,n)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,kt.createHmac)(this.algorithmIdentifier,ir(this.secret)):(0,kt.createHash)(this.algorithmIdentifier)}}function ir(e,t){return Va.Buffer.isBuffer(e)?e:typeof e=="string"?(0,K.s)(e,t):ArrayBuffer.isView(e)?(0,K.Q)(e.buffer,e.byteOffset,e.byteLength):(0,K.Q)(e)}var Ka=S(42445),It=S(58611),Nt=S(65692);const Xa=["ECONNRESET","EPIPE","ETIMEDOUT"],Ya=e=>{const t={};for(const n of Object.keys(e)){const r=e[n];t[n]=Array.isArray(r)?r.join(","):r}return t},_={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},ar=1e3,Ja=(e,t,n=0)=>{if(!n)return-1;const r=s=>{const o=_.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${n} ms`),{name:"TimeoutError"}))},n-s),i=a=>{a?.connecting?a.on("connect",()=>{_.clearTimeout(o)}):_.clearTimeout(o)};e.socket?i(e.socket):e.on("socket",i)};return n<2e3?(r(0),0):_.setTimeout(r.bind(null,ar),ar)},Qa=3e3,Za=(e,{keepAlive:t,keepAliveMsecs:n},r=Qa)=>{if(t!==!0)return-1;const s=()=>{e.socket?e.socket.setKeepAlive(t,n||0):e.on("socket",o=>{o.setKeepAlive(t,n||0)})};return r===0?(s(),0):_.setTimeout(s,r)},cr=3e3,ec=(e,t,n=rc)=>{const r=s=>{const o=n-s,i=()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${n} ms`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(o,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(o,i)};return 0<n&&n<6e3?(r(0),0):_.setTimeout(r.bind(null,n===0?0:cr),cr)},ur=6e3;async function tc(e,t,n=ur){const r=t.headers??{},s=r.Expect||r.expect;let o=-1,i=!0;s==="100-continue"&&(i=await Promise.race([new Promise(a=>{o=Number(_.setTimeout(()=>a(!0),Math.max(ur,n)))}),new Promise(a=>{e.on("continue",()=>{_.clearTimeout(o),a(!0)}),e.on("response",()=>{_.clearTimeout(o),a(!1)}),e.on("error",()=>{_.clearTimeout(o),a(!1)})})])),i&&nc(e,t.body)}function nc(e,t){if(t instanceof St.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}const n=t;if(typeof n=="object"&&n.buffer&&typeof n.byteOffset=="number"&&typeof n.byteLength=="number"){e.end(Buffer.from(n.buffer,n.byteOffset,n.byteLength));return}e.end(Buffer.from(t));return}e.end()}const rc=0;class qe{static create(t){return typeof t?.handle=="function"?t:new qe(t)}static checkSocketUsage(t,n,r=console){const{sockets:s,requests:o,maxSockets:i}=t;if(typeof i!="number"||i===1/0)return n;const a=15e3;if(Date.now()-a<n)return n;if(s&&o)for(const c in s){const u=s[c]?.length??0,f=o[c]?.length??0;if(u>=i&&f>=2*i)return r?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${f} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return n}constructor(t){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((n,r)=>{typeof t=="function"?t().then(s=>{n(this.resolveDefaultConfig(s))}).catch(r):n(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){const{requestTimeout:n,connectionTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:o,httpAgent:i,httpsAgent:a}=t||{},c=!0,u=50;return{connectionTimeout:r,requestTimeout:n??s,socketAcquisitionWarningTimeout:o,httpAgent:(()=>i instanceof It.Agent||typeof i?.destroy=="function"?i:new It.Agent({keepAlive:c,maxSockets:u,...i}))(),httpsAgent:(()=>a instanceof Nt.Agent||typeof a?.destroy=="function"?a:new Nt.Agent({keepAlive:c,maxSockets:u,...a}))(),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:n}={}){return this.config||(this.config=await this.configProvider),new Promise((r,s)=>{let o;const i=[],a=async y=>{await o,i.forEach(_.clearTimeout),r(y)},c=async y=>{await o,i.forEach(_.clearTimeout),s(y)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(n?.aborted){const y=new Error("Request aborted");y.name="AbortError",c(y);return}const u=t.protocol==="https:",f=u?this.config.httpsAgent:this.config.httpAgent;i.push(_.setTimeout(()=>{this.socketWarningTimestamp=qe.checkSocketUsage(f,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3)));const d=(0,Ka.G)(t.query||{});let l;if(t.username!=null||t.password!=null){const y=t.username??"",E=t.password??"";l=`${y}:${E}`}let h=t.path;d&&(h+=`?${d}`),t.fragment&&(h+=`#${t.fragment}`);let g=t.hostname??"";g[0]==="["&&g.endsWith("]")?g=t.hostname.slice(1,-1):g=t.hostname;const w={headers:t.headers,host:g,method:t.method,path:h,port:t.port,agent:f,auth:l},m=(u?Nt.request:It.request)(w,y=>{const E=new Ne({statusCode:y.statusCode||-1,reason:y.statusMessage,headers:Ya(y.headers),body:y});a({response:E})});if(m.on("error",y=>{Xa.includes(y.code)?c(Object.assign(y,{name:"TimeoutError"})):c(y)}),n){const y=()=>{m.destroy();const E=new Error("Request aborted");E.name="AbortError",c(E)};if(typeof n.addEventListener=="function"){const E=n;E.addEventListener("abort",y,{once:!0}),m.once("close",()=>E.removeEventListener("abort",y))}else n.onabort=y}i.push(Ja(m,c,this.config.connectionTimeout)),i.push(ec(m,c,this.config.requestTimeout));const R=w.agent;typeof R=="object"&&"keepAlive"in R&&i.push(Za(m,{keepAlive:R.keepAlive,keepAliveMsecs:R.keepAliveMsecs})),o=tc(m,t,this.config.requestTimeout).catch(y=>(i.forEach(_.clearTimeout),s(y)))})}updateHttpClientConfig(t,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>({...r,[t]:n}))}httpHandlerConfigs(){return this.config??{}}}var cd=S(85675);class ud{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(n=>n!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(const n of this.sessions)n===t&&(n.destroyed||n.destroy())}}class dd{constructor(t){if(this.sessionCache=new Map,this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(t,n){const r=this.getUrlString(t),s=this.sessionCache.get(r);if(s){const c=s.poll();if(c&&!this.config.disableConcurrency)return c}const o=http2.connect(r);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),o.unref();const i=()=>{o.destroy(),this.deleteSession(r,o)};o.on("goaway",i),o.on("error",i),o.on("frameError",i),o.on("close",()=>this.deleteSession(r,o)),n.requestTimeout&&o.setTimeout(n.requestTimeout,i);const a=this.sessionCache.get(r)||new NodeHttp2ConnectionPool;return a.offerLast(o),this.sessionCache.set(r,a),o}deleteSession(t,n){const r=this.sessionCache.get(t);!r||!r.contains(n)||(r.remove(n),this.sessionCache.set(t,r))}release(t,n){const r=this.getUrlString(t);this.sessionCache.get(r)?.offerLast(n)}destroy(){for(const[t,n]of this.sessionCache){for(const r of n)r.destroyed||r.destroy(),n.remove(r);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}}class dr{static create(t){return typeof t?.handle=="function"?t:new dr(t)}constructor(t){this.metadata={handlerProtocol:"h2"},this.connectionManager=new NodeHttp2ConnectionManager({}),this.configProvider=new Promise((n,r)=>{typeof t=="function"?t().then(s=>{n(s||{})}).catch(r):n(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));const{requestTimeout:r,disableConcurrentStreams:s}=this.config;return new Promise((o,i)=>{let a=!1,c;const u=async A=>{await c,o(A)},f=async A=>{await c,i(A)};if(n?.aborted){a=!0;const A=new Error("Request aborted");A.name="AbortError",f(A);return}const{hostname:d,method:l,port:h,protocol:g,query:w}=t;let p="";if(t.username!=null||t.password!=null){const A=t.username??"",v=t.password??"";p=`${A}:${v}@`}const m=`${g}//${p}${d}${h?`:${h}`:""}`,R={destination:new URL(m)},y=this.connectionManager.lease(R,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:s||!1}),E=A=>{s&&this.destroySession(y),a=!0,f(A)},q=buildQueryString(w||{});let X=t.path;q&&(X+=`?${q}`),t.fragment&&(X+=`#${t.fragment}`);const O=y.request({...t.headers,[constants.HTTP2_HEADER_PATH]:X,[constants.HTTP2_HEADER_METHOD]:l});if(y.ref(),O.on("response",A=>{const v=new HttpResponse({statusCode:A[":status"]||-1,headers:getTransformedHeaders(A),body:O});a=!0,u({response:v}),s&&(y.close(),this.connectionManager.deleteSession(m,y))}),r&&O.setTimeout(r,()=>{O.close();const A=new Error(`Stream timed out because of no activity for ${r} ms`);A.name="TimeoutError",E(A)}),n){const A=()=>{O.close();const v=new Error("Request aborted");v.name="AbortError",E(v)};if(typeof n.addEventListener=="function"){const v=n;v.addEventListener("abort",A,{once:!0}),O.once("close",()=>v.removeEventListener("abort",A))}else n.onabort=A}O.on("frameError",(A,v,Uc)=>{E(new Error(`Frame type id ${A} in stream id ${Uc} has failed with code ${v}.`))}),O.on("error",E),O.on("aborted",()=>{E(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${O.rstCode}.`))}),O.on("close",()=>{y.unref(),s&&y.destroy(),a||E(new Error("Unexpected error: http2 request did not get a response"))}),c=writeRequestBody(O,t,r)})}updateHttpClientConfig(t,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>({...r,[t]:n}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}}class sc extends St.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,n,r){this.bufferedBytes.push(t),r()}}const oc=e=>ic(e)?ac(e):new Promise((t,n)=>{const r=new sc;e.pipe(r),e.on("error",s=>{r.end(),n(s)}),r.on("error",n),r.on("finish",function(){const s=new Uint8Array(Buffer.concat(this.bufferedBytes));t(s)})}),ic=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function ac(e){const t=[],n=e.getReader();let r=!1,s=0;for(;!r;){const{done:a,value:c}=await n.read();c&&(t.push(c),s+=c.length),r=a}const o=new Uint8Array(s);let i=0;for(const a of t)o.set(a,i),i+=a.length;return o}const cc=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,be.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,be.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)},lr=e=>new Date(Date.now()+e),fr=e=>Ne.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,uc=(e,t)=>Math.abs(lr(t).getTime()-e)>=3e5,hr=(e,t)=>{const n=Date.parse(e);return uc(n,t)?n-Date.now():t},Ae=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},dc=async e=>{const t=Ae("context",e.context),n=Ae("config",e.config),r=t.endpointV2?.properties?.authSchemes?.[0],o=await Ae("signer",n.signer)(r),i=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:n,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}};class lc{async sign(t,n,r){if(!T.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await dc(r),{config:o,signer:i}=s;let{signingRegion:a,signingName:c}=s;const u=r.context;if(u?.authSchemes?.length??0>1){const[d,l]=u.authSchemes;d?.name==="sigv4a"&&l?.name==="sigv4"&&(a=l?.signingRegion??a,c=l?.signingName??c)}return await i.sign(t,{signingDate:lr(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return n=>{const r=n.ServerTime??fr(n.$response);if(r){const s=Ae("config",t.config),o=s.systemClockOffset;s.systemClockOffset=hr(r,s.systemClockOffset),s.systemClockOffset!==o&&n.$metadata&&(n.$metadata.clockSkewCorrected=!0)}throw n}}successHandler(t,n){const r=fr(t);if(r){const s=Ae("config",n.config);s.systemClockOffset=hr(r,s.systemClockOffset)}}}const ld=null,fc=/^[A-Za-z0-9+/]*={0,2}$/,hc=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!fc.exec(e))throw new TypeError("Invalid base64 string.");const t=(0,K.s)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},pc=e=>{let t;if(typeof e=="string"?t=Re(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,K.Q)(t.buffer,t.byteOffset,t.byteLength).toString("base64")},pr="required",C="fn",I="argv",ie="ref",gr=!0,mr="isSet",Te="booleanEquals",ae="error",ce="endpoint",F="tree",Ot="PartitionResult",vt="getAttr",yr={[pr]:!1,type:"String"},wr={[pr]:!0,default:!1,type:"Boolean"},Er={[ie]:"Endpoint"},Sr={[C]:Te,[I]:[{[ie]:"UseFIPS"},!0]},Rr={[C]:Te,[I]:[{[ie]:"UseDualStack"},!0]},N={},Ar={[C]:vt,[I]:[{[ie]:Ot},"supportsFIPS"]},Tr={[ie]:Ot},_r={[C]:Te,[I]:[!0,{[C]:vt,[I]:[Tr,"supportsDualStack"]}]},br=[Sr],Cr=[Rr],Ir=[{[ie]:"Region"}],gc={version:"1.0",parameters:{Region:yr,UseDualStack:wr,UseFIPS:wr,Endpoint:yr},rules:[{conditions:[{[C]:mr,[I]:[Er]}],rules:[{conditions:br,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ae},{conditions:Cr,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ae},{endpoint:{url:Er,properties:N,headers:N},type:ce}],type:F},{conditions:[{[C]:mr,[I]:Ir}],rules:[{conditions:[{[C]:"aws.partition",[I]:Ir,assign:Ot}],rules:[{conditions:[Sr,Rr],rules:[{conditions:[{[C]:Te,[I]:[gr,Ar]},_r],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:N,headers:N},type:ce}],type:F},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ae}],type:F},{conditions:br,rules:[{conditions:[{[C]:Te,[I]:[Ar,gr]}],rules:[{conditions:[{[C]:"stringEquals",[I]:[{[C]:vt,[I]:[Tr,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:N,headers:N},type:ce},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:N,headers:N},type:ce}],type:F},{error:"FIPS is enabled but this partition does not support FIPS",type:ae}],type:F},{conditions:Cr,rules:[{conditions:[_r],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:N,headers:N},type:ce}],type:F},{error:"DualStack is enabled but this partition does not support DualStack",type:ae}],type:F},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:N,headers:N},type:ce}],type:F}],type:F},{error:"Invalid Configuration: Missing Region",type:ae}]},mc=new Yo({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),yc=(e,t={})=>mc.get(e,()=>li(gc,{endpointParams:e,logger:t.logger}));Fe.aws=Cn;const wc=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??hc,base64Encoder:e?.base64Encoder??pc,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??yc,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??$a,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new lc},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ps}],logger:e?.logger??new rn,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??Ce,utf8Decoder:e?.utf8Decoder??Re,utf8Encoder:e?.utf8Encoder??ca}),Ec="AWS_EXECUTION_ENV",Nr="AWS_REGION",Or="AWS_DEFAULT_REGION",Sc="AWS_EC2_METADATA_DISABLED",Rc=["in-region","cross-region","mobile","standard","legacy"],Ac="/latest/meta-data/placement/region",Tc="AWS_DEFAULTS_MODE",_c="defaults_mode",bc={environmentVariableSelector:e=>e[Tc],configFileSelector:e=>e[_c],default:"legacy"},Cc=({region:e=$(vn),defaultsMode:t=$(bc)}={})=>Dt(async()=>{const n=typeof t=="function"?await t():t;switch(n?.toLowerCase()){case"auto":return Ic(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(n?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Rc.join(", ")}, got ${n}`)}}),Ic=async e=>{if(e){const t=typeof e=="function"?await e():e,n=await Nc();return n?t===n?"in-region":"cross-region":"standard"}return"standard"},Nc=async()=>{if(process.env[Ec]&&(process.env[Nr]||process.env[Or]))return process.env[Nr]??process.env[Or];if(!process.env[Sc])try{const{getInstanceMetadataEndpoint:e,httpRequest:t}=await S.e(172).then(S.bind(S,172)),n=await e();return(await t({...n,path:Ac})).toString()}catch{}},Oc=e=>{ao(process.version);const t=Cc(e),n=()=>t().then(io),r=wc(e);Ua(process.version);const s={profile:e?.profile};return{...r,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??cc,defaultUserAgentProvider:e?.defaultUserAgentProvider??za({serviceId:r.serviceId,clientVersion:Fa.rE}),maxAttempts:e?.maxAttempts??$(Vi,e),region:e?.region??$(vn,{...ki,...s}),requestHandler:qe.create(e?.requestHandler??n),retryMode:e?.retryMode??$({...Yi,default:async()=>(await n()).retryMode||kn},e),sha256:e?.sha256??Wa.bind(null,"sha256"),streamCollector:e?.streamCollector??oc,useDualstackEndpoint:e?.useDualstackEndpoint??$(Ni,s),useFipsEndpoint:e?.useFipsEndpoint??$(Pi,s),userAgentAppId:e?.userAgentAppId??$(qa,s)}},vc=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");const n=e.region;return typeof n=="string"?n:n()};return{setRegion(n){t=n},region(){return t}}},Pc=e=>({region:e.region()}),Dc="AWS_REGION",xc="region",hd={environmentVariableSelector:e=>e[Dc],configFileSelector:e=>e[xc],default:()=>{throw new Error("Region is missing")}},pd={preferredFile:"credentials"},kc=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(s){const o=t.findIndex(i=>i.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){r=s},credentials(){return r}}},$c=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Ve=e=>e,Mc=(e,t)=>{const n={...Ve(vc(e)),...Ve(ho(e)),...Ve(ys(e)),...Ve(kc(e))};return t.forEach(r=>r.configure(n)),{...e,...Pc(n),...po(n),...ws(n),...$c(n)}};class Fc extends Us{constructor(...[n]){const r=Oc(n||{}),s=Eo(r),o=Xo(s),i=Wi(o),a=$i(i),c=a,u=Fs(c),f=Ma(u),d=Mc(f,n?.extensions||[]);super(d);x(this,"config");this.config=d,this.middlewareStack.use(bi(this.config)),this.middlewareStack.use(oa(this.config)),this.middlewareStack.use(Ui(this.config)),this.middlewareStack.use(Lo(this.config)),this.middlewareStack.use(jo(this.config)),this.middlewareStack.use(Wo(this.config)),this.middlewareStack.use(ls(this.config,{httpAuthSchemeParametersProvider:xa,identityProviderConfigProvider:async l=>new vs({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(_s(this.config))}destroy(){super.destroy()}}}};
