"use strict";var ui=Object.defineProperty;var li=(U,A,p)=>A in U?ui(U,A,{enumerable:!0,configurable:!0,writable:!0,value:p}):U[A]=p;var k=(U,A,p)=>(li(U,typeof A!="symbol"?A+"":A,p),p);exports.id=700,exports.ids=[700],exports.modules={84700:(U,A,p)=>{p.d(A,{GetRoleCredentialsCommand:()=>fs,SSOClient:()=>ai});const x=async e=>{const t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),W(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!v(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},z=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,_=/(\d+\.){3}\d+/,R=/\.\./,V=/\./,w=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,v=e=>z.test(e)&&!_.test(e)&&!R.test(e),W=e=>{const[t,n,s,,,r]=e.split(":"),o=t==="arn"&&e.split(":").length>=6,i=Boolean(o&&n&&s&&r);if(o&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},y=(e,t,n)=>{const s=async()=>{const r=n[e]??n[t];return typeof r=="function"?r():r};return e==="credentialScope"||t==="CredentialScope"?async()=>{const r=typeof n.credentials=="function"?await n.credentials():n.credentials;return r?.credentialScope??r?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{const r=typeof n.credentials=="function"?await n.credentials():n.credentials;return r?.accountId??r?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{const r=await s();if(r&&typeof r=="object"){if("url"in r)return r.url.href;if("hostname"in r){const{protocol:o,hostname:i,port:a,path:c}=r;return`${o}//${i}${a?":"+a:""}${c}`}}return r}:s};var m=p(75033),T=p(39084);const F="AWS_ENDPOINT_URL",ee="endpoint_url",le=e=>({environmentVariableSelector:t=>{const n=e.split(" ").map(o=>o.toUpperCase()),s=t[[F,...n].join("_")];if(s)return s;const r=t[F];if(r)return r},configFileSelector:(t,n)=>{if(n&&t.services){const r=n[["services",t.services].join(T.QD)];if(r){const o=e.split(" ").map(a=>a.toLowerCase()),i=r[[o.join("_"),ee].join(T.QD)];if(i)return i}}const s=t[ee];if(s)return s},default:void 0}),te=async e=>(0,m.Z)(le(e??""))();var K=p(30183);const fe=e=>typeof e=="object"?"url"in e?(0,K.D)(e.url):e:(0,K.D)(e),pe=async(e,t,n,s)=>{if(!n.endpoint){let i;n.serviceConfiguredEndpoint?i=await n.serviceConfiguredEndpoint():i=await te(n.serviceId),i&&(n.endpoint=()=>Promise.resolve(fe(i)))}const r=await he(e,t,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(r,s)},he=async(e,t,n)=>{const s={},r=t?.getEndpointParameterInstructions?.()||{};for(const[o,i]of Object.entries(r))switch(i.type){case"staticContextParams":s[o]=i.value;break;case"contextParams":s[o]=e[i.name];break;case"clientContextParams":case"builtInParams":s[o]=await y(i.name,o,n)();break;case"operationContextParams":s[o]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(r).length===0&&Object.assign(s,n),String(n.serviceId).toLowerCase()==="s3"&&await x(s),s};var ne=p(72901);const fi=e=>e[SMITHY_CONTEXT_KEY]||(e[SMITHY_CONTEXT_KEY]={}),ge=e=>e[ne.Vf]||(e[ne.Vf]={}),L=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t};function _n(e){const t=new Map;for(const n of e)t.set(n.schemeId,n);return t}const vn=(e,t)=>(n,s)=>async r=>{const o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,s,r.input)),i=_n(e.httpAuthSchemes),a=ge(s),c=[];for(const d of o){const u=i.get(d.schemeId);if(!u){c.push(`HttpAuthScheme \`${d.schemeId}\` was not enabled for this service.`);continue}const l=u.identityProvider(await t.identityProviderConfigProvider(e));if(!l){c.push(`HttpAuthScheme \`${d.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:h={},signingProperties:g={}}=d.propertiesExtractor?.(e,s)||{};d.identityProperties=Object.assign(d.identityProperties||{},h),d.signingProperties=Object.assign(d.signingProperties||{},g),a.selectedHttpAuthScheme={httpAuthOption:d,identity:await l(d.identityProperties),signer:u.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(c.join(`
`));return n(r)},Cn={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Nn=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:s=>{s.addRelativeTo(vn(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),Cn)}}),On=(e,t)=>(n,s)=>async r=>{const{response:o}=await n(r);try{const i=await t(o,e);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){const a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!s.logger||s.logger?.constructor?.name==="NoOpLogger"?console.warn(a):s.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText)}throw i}},Dn=(e,t)=>(n,s)=>async r=>{const o=s.endpointV2?.url&&e.urlParser?async()=>e.urlParser(s.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const i=await t(r.input,{...e,endpoint:o});return n({...r,request:i})},bn={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},De={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Pn(e,t,n){return{applyToStack:s=>{s.add(On(e,n),bn),s.add(Dn(e,t),De)}}}const kn={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:De.name},pi=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:s=>{s.addRelativeTo(httpAuthSchemeMiddleware(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),kn)}});var S=p(78161);const xn=e=>t=>{throw t},Mn=(e,t)=>{},$n=e=>(t,n)=>async s=>{if(!S.Kd.isInstance(s.request))return t(s);const o=ge(n).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=o,d=await t({...s,request:await c.sign(s.request,a,i)}).catch((c.errorHandler||xn)(i));return(c.successHandler||Mn)(d.response,i),d},Un={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Fn=e=>({applyToStack:t=>{t.addRelativeTo($n(e),Un)}}),se=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t};var Ln=p(20477);function Hn(e,t,n){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=n}class Gn{constructor(t){this.authSchemes=new Map;for(const[n,s]of Object.entries(t))s!==void 0&&this.authSchemes.set(n,s)}getIdentityProvider(t){return this.authSchemes.get(t)}}class hi{async sign(t,n,s){if(!s)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!s.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!s.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!n.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");const r=HttpRequest.clone(t);if(s.in===HttpApiKeyAuthLocation.QUERY)r.query[s.name]=n.apiKey;else if(s.in===HttpApiKeyAuthLocation.HEADER)r.headers[s.name]=s.scheme?`${s.scheme} ${n.apiKey}`:n.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+s.in+"`");return r}}class gi{async sign(t,n,s){const r=HttpRequest.clone(t);if(!n.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return r.headers.Authorization=`Bearer ${n.token}`,r}}class Bn{async sign(t,n,s){return t}}const qn=(e=>t=>Ze(t)&&t.expiration.getTime()-Date.now()<e)(3e5),Ze=e=>e.expiration!==void 0,zn=(e,t,n)=>{if(e===void 0)return;const s=typeof e!="function"?async()=>Promise.resolve(e):e;let r,o,i,a=!1;const c=async d=>{o||(o=s(d));try{r=await o,i=!0,a=!1}finally{o=void 0}return r};return t===void 0?async d=>((!i||d?.forceRefresh)&&(r=await c(d)),r):async d=>((!i||d?.forceRefresh)&&(r=await c(d)),a?r:n(r)?(t(r)&&await c(d),r):(a=!0,r))},jn=({config:e,instructions:t})=>(n,s)=>async r=>{e.endpoint&&Hn(s,"ENDPOINT_OVERRIDE","N");const o=await pe(r.input,{getEndpointParameterInstructions(){return t}},{...e},s);s.endpointV2=o,s.authSchemes=o.properties?.authSchemes;const i=s.authSchemes?.[0];if(i){s.signing_region=i.signingRegion,s.signing_service=i.signingName;const c=ge(s)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return n({...r})},Vn={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:De.name},Wn=(e,t)=>({applyToStack:n=>{n.addRelativeTo(jn({config:e,instructions:t}),Vn)}}),Kn=e=>{const t=e.tls??!0,{endpoint:n}=e,s=n!=null?async()=>fe(await L(n)()):void 0,o={...e,endpoint:s,tls:t,isCustomEndpoint:!!n,useDualstackEndpoint:L(e.useDualstackEndpoint??!1),useFipsEndpoint:L(e.useFipsEndpoint??!1)};let i;return o.serviceConfiguredEndpoint=async()=>(e.serviceId&&!i&&(i=te(e.serviceId)),i),o};var f=p(93539);const Xn=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Yn={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class j extends f.TJ{constructor(t){super(t),Object.setPrototypeOf(this,j.prototype)}}class be extends j{constructor(n){super({name:"InvalidRequestException",$fault:"client",...n});k(this,"name","InvalidRequestException");k(this,"$fault","client");Object.setPrototypeOf(this,be.prototype)}}class Pe extends j{constructor(n){super({name:"ResourceNotFoundException",$fault:"client",...n});k(this,"name","ResourceNotFoundException");k(this,"$fault","client");Object.setPrototypeOf(this,Pe.prototype)}}class ke extends j{constructor(n){super({name:"TooManyRequestsException",$fault:"client",...n});k(this,"name","TooManyRequestsException");k(this,"$fault","client");Object.setPrototypeOf(this,ke.prototype)}}class xe extends j{constructor(n){super({name:"UnauthorizedException",$fault:"client",...n});k(this,"name","UnauthorizedException");k(this,"$fault","client");Object.setPrototypeOf(this,xe.prototype)}}const Qn=e=>({...e,...e.accessToken&&{accessToken:f.$H}}),Zn=e=>({...e,...e.secretAccessKey&&{secretAccessKey:f.$H},...e.sessionToken&&{sessionToken:f.$H}}),Jn=e=>({...e,...e.roleCredentials&&{roleCredentials:Zn(e.roleCredentials)}}),Si=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}}),Ei=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}}),Ri=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}}),es=(e,t)=>(0,f.Px)(e,t).then(n=>t.utf8Encoder(n)),Je=(e,t)=>es(e,t).then(n=>{if(n.length)try{return JSON.parse(n)}catch(s){throw s?.name==="SyntaxError"&&Object.defineProperty(s,"$responseBodyText",{value:n}),s}return{}}),ts=async(e,t)=>{const n=await Je(e,t);return n.message=n.message??n.Message,n},ns=(e,t)=>{const n=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),s=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},r=n(e.headers,"x-amzn-errortype");if(r!==void 0)return s(e.headers[r]);if(t.code!==void 0)return s(t.code);if(t.__type!==void 0)return s(t.__type)},ss=async(e,t)=>{const n=(0,Ln.lI)(e,t),s=(0,f.Tj)({},f.eU,{[Se]:e[ye]});n.bp("/federation/credentials");const r=(0,f.Tj)({[ls]:[,(0,f.Y0)(e[us],"roleName")],[tt]:[,(0,f.Y0)(e[et],"accountId")]});let o;return n.m("GET").h(s).q(r).b(o),n.build()},wi=async(e,t)=>{const n=rb(e,t),s=map({},isSerializableHeaderValue,{[Se]:e[ye]});n.bp("/assignment/roles");const r=map({[ot]:[,e[rt]],[st]:[()=>e.maxResults!==void 0,()=>e[nt].toString()],[tt]:[,__expectNonNull(e[et],"accountId")]});let o;return n.m("GET").h(s).q(r).b(o),n.build()},Ai=async(e,t)=>{const n=rb(e,t),s=map({},isSerializableHeaderValue,{[Se]:e[ye]});n.bp("/assignment/accounts");const r=map({[ot]:[,e[rt]],[st]:[()=>e.maxResults!==void 0,()=>e[nt].toString()]});let o;return n.m("GET").h(s).q(r).b(o),n.build()},Ti=async(e,t)=>{const n=rb(e,t),s=map({},isSerializableHeaderValue,{[Se]:e[ye]});n.bp("/logout");let r;return n.m("POST").h(s).b(r),n.build()},rs=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return me(e,t);const n=(0,f.Tj)({$metadata:H(e)}),s=(0,f.Y0)((0,f.Xk)(await Je(e.body,t)),"body"),r=(0,f.s)(s,{roleCredentials:f.Ss});return Object.assign(n,r),n},Ii=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return me(e,t);const n=map({$metadata:H(e)}),s=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),r=take(s,{nextToken:__expectString,roleList:_json});return Object.assign(n,r),n},_i=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return me(e,t);const n=map({$metadata:H(e)}),s=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),r=take(s,{accountList:_json,nextToken:__expectString});return Object.assign(n,r),n},vi=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return me(e,t);const n=map({$metadata:H(e)});return await collectBody(e.body,t),n},me=async(e,t)=>{const n={...e,body:await ts(e.body,t)},s=ns(e,n.body);switch(s){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await is(n,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await as(n,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await cs(n,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await ds(n,t);default:const r=n.body;return os({output:e,parsedBody:r,errorCode:s})}},os=(0,f.jr)(j),is=async(e,t)=>{const n=(0,f.Tj)({}),s=e.body,r=(0,f.s)(s,{message:f.lK});Object.assign(n,r);const o=new be({$metadata:H(e),...n});return(0,f.Mw)(o,e.body)},as=async(e,t)=>{const n=(0,f.Tj)({}),s=e.body,r=(0,f.s)(s,{message:f.lK});Object.assign(n,r);const o=new Pe({$metadata:H(e),...n});return(0,f.Mw)(o,e.body)},cs=async(e,t)=>{const n=(0,f.Tj)({}),s=e.body,r=(0,f.s)(s,{message:f.lK});Object.assign(n,r);const o=new ke({$metadata:H(e),...n});return(0,f.Mw)(o,e.body)},ds=async(e,t)=>{const n=(0,f.Tj)({}),s=e.body,r=(0,f.s)(s,{message:f.lK});Object.assign(n,r);const o=new xe({$metadata:H(e),...n});return(0,f.Mw)(o,e.body)},H=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Ci=(e,t)=>collectBody(e,t).then(n=>t.utf8Encoder(n)),et="accountId",ye="accessToken",tt="account_id",nt="maxResults",st="max_result",rt="nextToken",ot="next_token",us="roleName",ls="role_name",Se="x-amz-sso_bearer_token";class fs extends f.uB.classBuilder().ep(Yn).m(function(t,n,s,r){return[Pn(s,this.serialize,this.deserialize),Wn(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(Qn,Jn).ser(ss).de(rs).build(){}function Ni(e){return e}const ps=e=>t=>async n=>{if(!S.Kd.isInstance(n.request))return t(n);const{request:s}=n,{handlerProtocol:r=""}=e.requestHandler.metadata||{};if(r.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]=s.hostname+(s.port?":"+s.port:"");else if(!s.headers.host){let o=s.hostname;s.port!=null&&(o+=`:${s.port}`),s.headers.host=o}return t(n)},hs={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},gs=e=>({applyToStack:t=>{t.add(ps(e),hs)}}),ms=()=>(e,t)=>async n=>{try{const s=await e(n),{clientName:r,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:d}=a,u=c??t.inputFilterSensitiveLog,l=d??t.outputFilterSensitiveLog,{$metadata:h,...g}=s.output;return i?.info?.({clientName:r,commandName:o,input:u(n.input),output:l(g),metadata:h}),s}catch(s){const{clientName:r,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,d=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:r,commandName:o,input:d(n.input),error:s,metadata:s.$metadata}),s}},ys={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Ss=e=>({applyToStack:t=>{t.add(ms(),ys)}}),it="X-Amzn-Trace-Id",Es="AWS_LAMBDA_FUNCTION_NAME",Rs="_X_AMZN_TRACE_ID",ws=e=>t=>async n=>{const{request:s}=n;if(!S.Kd.isInstance(s)||e.runtime!=="node"||s.headers.hasOwnProperty(it))return t(n);const r=process.env[Es],o=process.env[Rs],i=a=>typeof a=="string"&&a.length>0;return i(r)&&i(o)&&(s.headers[it]=o),t({...n,request:s})},As={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Ts=e=>({applyToStack:t=>{t.add(ws(e),As)}}),at=void 0;function Is(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function _s(e){const t=se(e.userAgentAppId??at);return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent,userAgentAppId:async()=>{const n=await t();if(!Is(n)){const s=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}}}class vs{constructor({size:t,params:n}){this.data=new Map,this.parameters=[],this.capacity=t??50,n&&(this.parameters=n)}get(t,n){const s=this.hash(t);if(s===!1)return n();if(!this.data.has(s)){if(this.data.size>this.capacity+10){const r=this.data.keys();let o=0;for(;;){const{value:i,done:a}=r.next();if(this.data.delete(i),a||++o>10)break}}this.data.set(s,n())}return this.data.get(s)}size(){return this.data.size}hash(t){let n="";const{parameters:s}=this;if(s.length===0)return!1;for(const r of s){const o=String(t[r]??"");if(o.includes("|;"))return!1;n+=o+"|;"}return n}}const Cs=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),ct=e=>Cs.test(e)||e.startsWith("[")&&e.endsWith("]"),Ns=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Me=(e,t=!1)=>{if(!t)return Ns.test(e);const n=e.split(".");for(const s of n)if(!Me(s))return!1;return!0},Ee={},re="endpoints";function G(e){return typeof e!="object"||e==null?e:"ref"in e?`$${G(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(G).join(", ")})`:JSON.stringify(e,null,2)}class I extends Error{constructor(t){super(t),this.name="EndpointError"}}const Os=(e,t)=>e===t,Ds=e=>{const t=e.split("."),n=[];for(const s of t){const r=s.indexOf("[");if(r!==-1){if(s.indexOf("]")!==s.length-1)throw new I(`Path: '${e}' does not end with ']'`);const o=s.slice(r+1,-1);if(Number.isNaN(parseInt(o)))throw new I(`Invalid array index: '${o}' in path: '${e}'`);r!==0&&n.push(s.slice(0,r)),n.push(o)}else n.push(s)}return n},dt=(e,t)=>Ds(t).reduce((n,s)=>{if(typeof n!="object")throw new I(`Index '${s}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(s)]:n[s]},e),bs=e=>e!=null,Ps=e=>!e,$e={[ne.Ue.HTTP]:80,[ne.Ue.HTTPS]:443},ks={booleanEquals:Os,getAttr:dt,isSet:bs,isValidHostLabel:Me,not:Ps,parseURL:e=>{const t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){const{hostname:h,port:g,protocol:E="",path:$="",query:D={}}=e,ue=new URL(`${E}//${h}${g?`:${g}`:""}${$}`);return ue.search=Object.entries(D).map(([ci,di])=>`${ci}=${di}`).join("&"),ue}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const n=t.href,{host:s,hostname:r,pathname:o,protocol:i,search:a}=t;if(a)return null;const c=i.slice(0,-1);if(!Object.values(ne.Ue).includes(c))return null;const d=ct(r),u=n.includes(`${s}:${$e[c]}`)||typeof e=="string"&&e.includes(`${s}:${$e[c]}`),l=`${s}${u?`:${$e[c]}`:""}`;return{scheme:c,authority:l,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:d}},stringEquals:(e,t)=>e===t,substring:(e,t,n,s)=>t>=n||e.length<n?null:s?e.substring(e.length-n,e.length-t):e.substring(t,n),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)},ut=(e,t)=>{const n=[],s={...t.endpointParams,...t.referenceRecord};let r=0;for(;r<e.length;){const o=e.indexOf("{",r);if(o===-1){n.push(e.slice(r));break}n.push(e.slice(r,o));const i=e.indexOf("}",o);if(i===-1){n.push(e.slice(o));break}e[o+1]==="{"&&e[i+1]==="}"&&(n.push(e.slice(o+1,i)),r=i+2);const a=e.substring(o+1,i);if(a.includes("#")){const[c,d]=a.split("#");n.push(dt(s[c],d))}else n.push(s[a]);r=i+1}return n.join("")},xs=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],Re=(e,t,n)=>{if(typeof e=="string")return ut(e,n);if(e.fn)return lt(e,n);if(e.ref)return xs(e,n);throw new I(`'${t}': ${String(e)} is not a string, function or reference.`)},lt=({fn:e,argv:t},n)=>{const s=t.map(o=>["boolean","number"].includes(typeof o)?o:Re(o,"arg",n)),r=e.split(".");return r[0]in Ee&&r[1]!=null?Ee[r[0]][r[1]](...s):ks[e](...s)},Ms=({assign:e,...t},n)=>{if(e&&e in n.referenceRecord)throw new I(`'${e}' is already defined in Reference Record.`);const s=lt(t,n);return n.logger?.debug?.(`${re} evaluateCondition: ${G(t)} = ${G(s)}`),{result:s===""?!0:!!s,...e!=null&&{toAssign:{name:e,value:s}}}},Ue=(e=[],t)=>{const n={};for(const s of e){const{result:r,toAssign:o}=Ms(s,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!r)return{result:r};o&&(n[o.name]=o.value,t.logger?.debug?.(`${re} assign: ${o.name} := ${G(o.value)}`))}return{result:!0,referenceRecord:n}},$s=(e,t)=>Object.entries(e).reduce((n,[s,r])=>({...n,[s]:r.map(o=>{const i=Re(o,"Header value entry",t);if(typeof i!="string")throw new I(`Header '${s}' value '${i}' is not a string`);return i})}),{}),ft=(e,t)=>{if(Array.isArray(e))return e.map(n=>ft(n,t));switch(typeof e){case"string":return ut(e,t);case"object":if(e===null)throw new I(`Unexpected endpoint property: ${e}`);return pt(e,t);case"boolean":return e;default:throw new I(`Unexpected endpoint property type: ${typeof e}`)}},pt=(e,t)=>Object.entries(e).reduce((n,[s,r])=>({...n,[s]:ft(r,t)}),{}),Us=(e,t)=>{const n=Re(e,"Endpoint URL",t);if(typeof n=="string")try{return new URL(n)}catch(s){throw console.error(`Failed to construct URL with ${n}`,s),s}throw new I(`Endpoint URL must be a string, got ${typeof n}`)},Fs=(e,t)=>{const{conditions:n,endpoint:s}=e,{result:r,referenceRecord:o}=Ue(n,t);if(!r)return;const i={...t,referenceRecord:{...t.referenceRecord,...o}},{url:a,properties:c,headers:d}=s;return t.logger?.debug?.(`${re} Resolving endpoint from template: ${G(s)}`),{...d!=null&&{headers:$s(d,i)},...c!=null&&{properties:pt(c,i)},url:Us(a,i)}},Ls=(e,t)=>{const{conditions:n,error:s}=e,{result:r,referenceRecord:o}=Ue(n,t);if(!!r)throw new I(Re(s,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},Hs=(e,t)=>{const{conditions:n,rules:s}=e,{result:r,referenceRecord:o}=Ue(n,t);if(!!r)return ht(s,{...t,referenceRecord:{...t.referenceRecord,...o}})},ht=(e,t)=>{for(const n of e)if(n.type==="endpoint"){const s=Fs(n,t);if(s)return s}else if(n.type==="error")Ls(n,t);else if(n.type==="tree"){const s=Hs(n,t);if(s)return s}else throw new I(`Unknown endpoint rule: ${n}`);throw new I("Rules evaluation failed")},Gs=(e,t)=>{const{endpointParams:n,logger:s}=t,{parameters:r,rules:o}=e;t.logger?.debug?.(`${re} Initial EndpointParams: ${G(n)}`);const i=Object.entries(r).filter(([,d])=>d.default!=null).map(([d,u])=>[d,u.default]);if(i.length>0)for(const[d,u]of i)n[d]=n[d]??u;const a=Object.entries(r).filter(([,d])=>d.required).map(([d])=>d);for(const d of a)if(n[d]==null)throw new I(`Missing required parameter: '${d}'`);const c=ht(o,{endpointParams:n,logger:s,referenceRecord:{}});return t.logger?.debug?.(`${re} Resolved endpoint: ${G(c)}`),c},gt=(e,t=!1)=>{if(t){for(const n of e.split("."))if(!gt(n))return!1;return!0}return!(!Me(e)||e.length<3||e.length>63||e!==e.toLowerCase()||ct(e))},mt=":",Bs="/",qs=e=>{const t=e.split(mt);if(t.length<6)return null;const[n,s,r,o,i,...a]=t;if(n!=="arn"||s===""||r===""||a.join(mt)==="")return null;const c=a.map(d=>d.split(Bs)).flat();return{partition:s,service:r,region:o,accountId:i,resourceId:c}};let yt=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il|mx)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"ap-southeast-5":{"description":"Asia Pacific (Malaysia)"},"ap-southeast-7":{"description":"Asia Pacific (Thailand)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"mx-central-1":{"description":"Mexico (Central)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-f-global":{"description":"AWS ISOF global region"},"us-isof-east-1":{"description":"US ISOF EAST"},"us-isof-south-1":{"description":"US ISOF SOUTH"}}}],"version":"1.1"}'),St="";const zs=e=>{const{partitions:t}=yt;for(const s of t){const{regions:r,outputs:o}=s;for(const[i,a]of Object.entries(r))if(i===e)return{...o,...a}}for(const s of t){const{regionRegex:r,outputs:o}=s;if(new RegExp(r).test(e))return{...o}}const n=t.find(s=>s.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},js=(e,t="")=>{yt=e,St=t},xi=()=>{js(partitionsInfo,"")},Vs=()=>St,Et={isVirtualHostableS3Bucket:gt,parseArn:qs,partition:zs};Ee.aws=Et;function b(e,t,n){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=n}const Ws=/\d{12}\.ddb/;async function Ks(e,t,n){if(n.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&b(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){const o=await t.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?b(e,"RETRY_MODE_ADAPTIVE","F"):b(e,"RETRY_MODE_STANDARD","E"):b(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){const o=e.endpointV2;switch(String(o?.url?.hostname).match(Ws)&&b(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":b(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":b(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":b(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const r=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(r?.$source){const o=r;o.accountId&&b(e,"RESOLVED_ACCOUNT_ID","T");for(const[i,a]of Object.entries(o.$source??{}))b(e,i,a)}}const Rt="user-agent",Fe="x-amz-user-agent",wt=" ",Le="/",Xs=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Ys=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,At="-",Qs=1024;function Zs(e){let t="";for(const n in e){const s=e[n];if(t.length+s.length+1<=Qs){t.length?t+=","+s:t+=s;continue}break}return t}const Js=e=>(t,n)=>async s=>{const{request:r}=s;if(!S.Kd.isInstance(r))return t(s);const{headers:o}=r,i=n?.userAgent?.map(we)||[],a=(await e.defaultUserAgentProvider()).map(we);await Ks(n,e,s);const c=n;a.push(`m/${Zs(Object.assign({},n.__smithy_context?.features,c.__aws_sdk_context?.features))}`);const d=e?.customUserAgent?.map(we)||[],u=await e.userAgentAppId();u&&a.push(we([`app/${u}`]));const l=Vs(),h=(l?[l]:[]).concat([...a,...i,...d]).join(wt),g=[...a.filter(E=>E.startsWith("aws-sdk-")),...d].join(wt);return e.runtime!=="browser"?(g&&(o[Fe]=o[Fe]?`${o[Rt]} ${g}`:g),o[Rt]=h):o[Fe]=h,t({...s,request:r})},we=e=>{const t=e[0].split(Le).map(i=>i.replace(Xs,At)).join(Le),n=e[1]?.replace(Ys,At),s=t.indexOf(Le),r=t.substring(0,s);let o=t.substring(s+1);return r==="api"&&(o=o.toLowerCase()),[r,o,n].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},er={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},tr=e=>({applyToStack:t=>{t.add(Js(e),er)}}),Ae=(e,t,n)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${n} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var X;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(X||(X={}));const nr="AWS_USE_DUALSTACK_ENDPOINT",sr="use_dualstack_endpoint",Mi=!1,rr={environmentVariableSelector:e=>Ae(e,nr,X.ENV),configFileSelector:e=>Ae(e,sr,X.CONFIG),default:!1},or="AWS_USE_FIPS_ENDPOINT",ir="use_fips_endpoint",$i=!1,ar={environmentVariableSelector:e=>Ae(e,or,X.ENV),configFileSelector:e=>Ae(e,ir,X.CONFIG),default:!1},Ui=e=>{const{endpoint:t,urlParser:n}=e;return{...e,tls:e.tls??!0,endpoint:normalizeProvider(typeof t=="string"?n(t):t),isCustomEndpoint:!0,useDualstackEndpoint:normalizeProvider(e.useDualstackEndpoint??!1)}},Fi=e=>{const t=normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:n,useFipsEndpoint:s,urlParser:r}=e;return{...e,tls:e.tls??!0,endpoint:n?normalizeProvider(typeof n=="string"?r(n):n):()=>getEndpointFromRegion({...e,useDualstackEndpoint:t,useFipsEndpoint:s}),isCustomEndpoint:!!n,useDualstackEndpoint:t}},cr="AWS_REGION",dr="region",Tt={environmentVariableSelector:e=>e[cr],configFileSelector:e=>e[dr],default:()=>{throw new Error("Region is missing")}},ur={preferredFile:"credentials"},It=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),_t=e=>It(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,lr=e=>{const{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return _t(t);const s=await t();return _t(s)},useFipsEndpoint:async()=>{const s=typeof t=="string"?t:await t();return It(s)?!0:typeof n!="function"?Promise.resolve(!!n):n()}}},vt="content-length";function fr(e){return t=>async n=>{const s=n.request;if(S.Kd.isInstance(s)){const{body:r,headers:o}=s;if(r&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(vt)===-1)try{const i=e(r);s.headers={...s.headers,[vt]:String(i)}}catch{}}return t({...n,request:s})}}const pr={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},hr=e=>({applyToStack:t=>{t.add(fr(e.bodyLengthChecker),pr)}});var B;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(B||(B={}));const oe=3,Ct=B.STANDARD,gr=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],mr=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],yr=["TimeoutError","RequestTimeout","RequestTimeoutException"],Sr=[500,502,503,504],Er=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Rr=e=>e.$retryable!==void 0,wr=e=>gr.includes(e.name),Ar=e=>e.$metadata?.clockSkewCorrected,Te=e=>e.$metadata?.httpStatusCode===429||mr.includes(e.name)||e.$retryable?.throttling==!0,Ie=(e,t=0)=>Ar(e)||yr.includes(e.name)||Er.includes(e?.code||"")||Sr.includes(e.$metadata?.httpStatusCode||0)||e.cause!==void 0&&t<=10&&Ie(e.cause,t+1),Tr=e=>{if(e.$metadata?.httpStatusCode!==void 0){const t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Ie(e)}return!1};class ie{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(!!this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const n=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(s=>ie.setTimeoutFn(s,n))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const n=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=t}updateClientSendingRate(t){let n;if(this.updateMeasuredRate(),Te(t)){const r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const s=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(s)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),n=Math.floor(t*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const s=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(s*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(t){return parseFloat(t.toFixed(8))}}ie.setTimeoutFn=setTimeout;const ae=100,He=20*1e3,Nt=500,Ge=500,Ot=5,Dt=10,bt=1,Pt="amz-sdk-invocation-id",kt="amz-sdk-request",Ir=()=>{let e=ae;return{computeNextBackoffDelay:s=>Math.floor(Math.min(He,Math.random()*2**s*e)),setDelayBase:s=>{e=s}}},xt=({retryDelay:e,retryCount:t,retryCost:n})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(He,e),getRetryCost:()=>n});class Be{constructor(t){this.maxAttempts=t,this.mode=B.STANDARD,this.capacity=Ge,this.retryBackoffStrategy=Ir(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return xt({retryDelay:ae,retryCount:0})}async refreshRetryTokenForRetry(t,n){const s=await this.getMaxAttempts();if(this.shouldRetry(t,n,s)){const r=n.errorType;this.retryBackoffStrategy.setDelayBase(r==="THROTTLING"?Nt:ae);const o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(r);return this.capacity-=a,xt({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Ge,this.capacity+(t.getRetryCost()??bt))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${oe}`),oe}}shouldRetry(t,n,s){return t.getRetryCount()+1<s&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(t){return t==="TRANSIENT"?Dt:Ot}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class _r{constructor(t,n){this.maxAttemptsProvider=t,this.mode=B.ADAPTIVE;const{rateLimiter:s}=n??{};this.rateLimiter=s??new ie,this.standardRetryStrategy=new Be(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(t,n)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}class Li extends Be{constructor(t,n=ae){super(typeof t=="function"?t:async()=>t),typeof n=="number"?this.computeNextBackoffDelay=()=>n:this.computeNextBackoffDelay=n}async refreshRetryTokenForRetry(t,n){const s=await super.refreshRetryTokenForRetry(t,n);return s.getRetryDelay=()=>this.computeNextBackoffDelay(s.getRetryCount()),s}}var Mt=p(3682);const vr=(e,t)=>{const n=e,s=t?.noRetryIncrement??bt,r=t?.retryCost??Ot,o=t?.timeoutRetryCost??Dt;let i=e;const a=l=>l.name==="TimeoutError"?o:r,c=l=>a(l)<=i;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:l=>{if(!c(l))throw new Error("No retry token available");const h=a(l);return i-=h,h},releaseRetryTokens:l=>{i+=l??s,i=Math.min(i,n)}})},Cr=(e,t)=>Math.floor(Math.min(He,Math.random()*2**t*e)),Nr=e=>e?Rr(e)||wr(e)||Te(e)||Ie(e):!1,$t=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);class Or{constructor(t,n){this.maxAttemptsProvider=t,this.mode=B.STANDARD,this.retryDecider=n?.retryDecider??Nr,this.delayDecider=n?.delayDecider??Cr,this.retryQuota=n?.retryQuota??vr(Ge)}shouldRetry(t,n,s){return n<s&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=oe}return t}async retry(t,n,s){let r,o=0,i=0;const a=await this.getMaxAttempts(),{request:c}=n;for(S.Kd.isInstance(c)&&(c.headers[Pt]=(0,Mt.A)());;)try{S.Kd.isInstance(c)&&(c.headers[kt]=`attempt=${o+1}; max=${a}`),s?.beforeRequest&&await s.beforeRequest();const{response:d,output:u}=await t(n);return s?.afterRequest&&s.afterRequest(d),this.retryQuota.releaseRetryTokens(r),u.$metadata.attempts=o+1,u.$metadata.totalRetryDelay=i,{response:d,output:u}}catch(d){const u=$t(d);if(o++,this.shouldRetry(u,o,a)){r=this.retryQuota.retrieveRetryTokens(u);const l=this.delayDecider(Te(u)?Nt:ae,o),h=Dr(u.$response),g=Math.max(h||0,l);i+=g,await new Promise(E=>setTimeout(E,g));continue}throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=o,u.$metadata.totalRetryDelay=i,u}}}const Dr=e=>{if(!S.cS.isInstance(e))return;const t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;const n=e.headers[t],s=Number(n);return Number.isNaN(s)?new Date(n).getTime()-Date.now():s*1e3};class Hi extends Or{constructor(t,n){const{rateLimiter:s,...r}=n??{};super(t,r),this.rateLimiter=s??new ie,this.mode=B.ADAPTIVE}async retry(t,n){return super.retry(t,n,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:s=>{this.rateLimiter.updateClientSendingRate(s)}})}}const Ut="AWS_MAX_ATTEMPTS",Ft="max_attempts",br={environmentVariableSelector:e=>{const t=e[Ut];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Environment variable ${Ut} mast be a number, got "${t}"`);return n},configFileSelector:e=>{const t=e[Ft];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Shared config file entry ${Ft} mast be a number, got "${t}"`);return n},default:oe},Pr=e=>{const{retryStrategy:t}=e,n=L(e.maxAttempts??oe);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await L(e.retryMode)()===B.ADAPTIVE?new _r(n):new Be(n))}},kr="AWS_RETRY_MODE",xr="retry_mode",Mr={environmentVariableSelector:e=>e[kr],configFileSelector:e=>e[xr],default:Ct},$r=()=>e=>async t=>{const{request:n}=t;return HttpRequest.isInstance(n)&&(delete n.headers[INVOCATION_ID_HEADER],delete n.headers[REQUEST_HEADER]),e(t)},Ur={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},Gi=e=>({applyToStack:t=>{t.addRelativeTo($r(),Ur)}});var Fr=p(2203);const Lr=e=>e?.body instanceof Fr.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream,Hr=e=>(t,n)=>async s=>{let r=await e.retryStrategy();const o=await e.maxAttempts();if(Gr(r)){r=r;let i=await r.acquireInitialRetryToken(n.partition_id),a=new Error,c=0,d=0;const{request:u}=s,l=S.Kd.isInstance(u);for(l&&(u.headers[Pt]=(0,Mt.A)());;)try{l&&(u.headers[kt]=`attempt=${c+1}; max=${o}`);const{response:h,output:g}=await t(s);return r.recordSuccess(i),g.$metadata.attempts=c+1,g.$metadata.totalRetryDelay=d,{response:h,output:g}}catch(h){const g=Br(h);if(a=$t(h),l&&Lr(u))throw(n.logger instanceof f.N4?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await r.refreshRetryTokenForRetry(i,g)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();const E=i.getRetryDelay();d+=E,await new Promise($=>setTimeout($,E))}}else return r=r,r?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",r.mode]]),r.retry(t,s)},Gr=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Br=e=>{const t={error:e,errorType:qr(e)},n=Vr(e.$response);return n&&(t.retryAfterHint=n),t},qr=e=>Te(e)?"THROTTLING":Ie(e)?"TRANSIENT":Tr(e)?"SERVER_ERROR":"CLIENT_ERROR",zr={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},jr=e=>({applyToStack:t=>{t.add(Hr(e),zr)}}),Vr=e=>{if(!S.cS.isInstance(e))return;const t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;const n=e.headers[t],s=Number(n);return Number.isNaN(s)?new Date(n):new Date(s*1e3)};var Wr=p(15238),q=p(72981),_e=p(16309),P=p(25951);const Kr="X-Amz-Algorithm",Xr="X-Amz-Credential",Lt="X-Amz-Date",Yr="X-Amz-SignedHeaders",Qr="X-Amz-Expires",Ht="X-Amz-Signature",Gt="X-Amz-Security-Token",Bi="X-Amz-Region-Set",Bt="authorization",qt=Lt.toLowerCase(),Zr=[Bt,qt,"date"],Jr=Ht.toLowerCase(),qe="x-amz-content-sha256",eo=Gt.toLowerCase(),zi="host",to={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},no=/^proxy-/,so=/^sec-/,ji=null,ze="AWS4-HMAC-SHA256",Vi="AWS4-ECDSA-P256-SHA256",ro="AWS4-HMAC-SHA256-PAYLOAD",oo="UNSIGNED-PAYLOAD",io=50,zt="aws4_request",ao=60*60*24*7,Y={},ve=[],je=(e,t,n)=>`${e}/${t}/${n}/${zt}`,co=async(e,t,n,s,r)=>{const o=await jt(e,t.secretAccessKey,t.accessKeyId),i=`${n}:${s}:${r}:${(0,q.n)(o)}:${t.sessionToken}`;if(i in Y)return Y[i];for(ve.push(i);ve.length>io;)delete Y[ve.shift()];let a=`AWS4${t.secretAccessKey}`;for(const c of[n,s,r,zt])a=await jt(e,a,c);return Y[i]=a},Wi=()=>{ve.length=0,Object.keys(Y).forEach(e=>{delete Y[e]})},jt=(e,t,n)=>{const s=new e(t);return s.update((0,P.Fo)(n)),s.digest()},Vt=({headers:e},t,n)=>{const s={};for(const r of Object.keys(e).sort()){if(e[r]==null)continue;const o=r.toLowerCase();(o in to||t?.has(o)||no.test(o)||so.test(o))&&(!n||n&&!n.has(o))||(s[o]=e[r].trim().replace(/\s+/g," "))}return s},uo=({query:e={}})=>{const t=[],n={};for(const s of Object.keys(e)){if(s.toLowerCase()===Jr)continue;const r=(0,_e.o)(s);t.push(r);const o=e[s];typeof o=="string"?n[r]=`${r}=${(0,_e.o)(o)}`:Array.isArray(o)&&(n[r]=o.slice(0).reduce((i,a)=>i.concat([`${r}=${(0,_e.o)(a)}`]),[]).sort().join("&"))}return t.sort().map(s=>n[s]).filter(s=>s).join("&")};var lo=p(709);const Ve=async({headers:e,body:t},n)=>{for(const s of Object.keys(e))if(s.toLowerCase()===qe)return e[s];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||(0,lo.m)(t)){const s=new n;return s.update((0,P.Fo)(t)),(0,q.n)(await s.digest())}return oo};class fo{format(t){const n=[];for(const o of Object.keys(t)){const i=(0,P.ar)(o);n.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[o]))}const s=new Uint8Array(n.reduce((o,i)=>o+i.byteLength,0));let r=0;for(const o of n)s.set(o,r),r+=o.byteLength;return s}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,t.value,!1),new Uint8Array(n.buffer);case"integer":const s=new DataView(new ArrayBuffer(5));return s.setUint8(0,4),s.setInt32(1,t.value,!1),new Uint8Array(s.buffer);case"long":const r=new Uint8Array(9);return r[0]=5,r.set(t.value.bytes,1),r;case"binary":const o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);const i=new Uint8Array(o.buffer);return i.set(t.value,3),i;case"string":const a=(0,P.ar)(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);const d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":const u=new Uint8Array(9);return u[0]=8,u.set(We.fromNumber(t.value.valueOf()).bytes,1),u;case"uuid":if(!po.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const l=new Uint8Array(17);return l[0]=9,l.set((0,q.a)(t.value.replace(/\-/g,"")),1),l}}}var Wt;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Wt||(Wt={}));const po=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class We{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let s=7,r=Math.abs(Math.round(t));s>-1&&r>0;s--,r/=256)n[s]=r;return t<0&&Kt(n),new We(n)}valueOf(){const t=this.bytes.slice(0),n=t[0]&128;return n&&Kt(t),parseInt((0,q.n)(t),16)*(n?-1:1)}toString(){return String(this.valueOf())}}function Kt(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}const ho=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1},Ki=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return t[n]},Xi=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))e===n.toLowerCase()&&delete t[n]},go=(e,t={})=>{const{headers:n,query:s={}}=S.Kd.clone(e);for(const r of Object.keys(n)){const o=r.toLowerCase();(o.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(o)||t.hoistableHeaders?.has(o))&&(s[r]=n[r],delete n[r])}return{...e,headers:n,query:s}},Xt=e=>{e=S.Kd.clone(e);for(const t of Object.keys(e.headers))Zr.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},mo=e=>yo(e).toISOString().replace(/\.\d{3}Z$/,"Z"),yo=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class Yt{constructor({applyChecksum:t,credentials:n,region:s,service:r,sha256:o,uriEscapePath:i=!0}){this.headerFormatter=new fo,this.service=r,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=L(s),this.credentialProvider=L(n)}async presign(t,n={}){const{signingDate:s=new Date,expiresIn:r=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:c,signingRegion:d,signingService:u}=n,l=await this.credentialProvider();this.validateResolvedCredentials(l);const h=d??await this.regionProvider(),{longDate:g,shortDate:E}=Ce(s);if(r>ao)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const $=je(E,h,u??this.service),D=go(Xt(t),{unhoistableHeaders:i,hoistableHeaders:c});l.sessionToken&&(D.query[Gt]=l.sessionToken),D.query[Kr]=ze,D.query[Xr]=`${l.accessKeyId}/${$}`,D.query[Lt]=g,D.query[Qr]=r.toString(10);const ue=Vt(D,o,a);return D.query[Yr]=Qt(ue),D.query[Ht]=await this.getSignature(g,$,this.getSigningKey(l,h,E,u),this.createCanonicalRequest(D,ue,await Ve(t,this.sha256))),D}async sign(t,n){return typeof t=="string"?this.signString(t,n):t.headers&&t.payload?this.signEvent(t,n):t.message?this.signMessage(t,n):this.signRequest(t,n)}async signEvent({headers:t,payload:n},{signingDate:s=new Date,priorSignature:r,signingRegion:o,signingService:i}){const a=o??await this.regionProvider(),{shortDate:c,longDate:d}=Ce(s),u=je(c,a,i??this.service),l=await Ve({headers:{},body:n},this.sha256),h=new this.sha256;h.update(t);const g=(0,q.n)(await h.digest()),E=[ro,d,u,r,g,l].join(`
`);return this.signString(E,{signingDate:s,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:n=new Date,signingRegion:s,signingService:r}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:n,signingRegion:s,signingService:r,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:n=new Date,signingRegion:s,signingService:r}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const i=s??await this.regionProvider(),{shortDate:a}=Ce(n),c=new this.sha256(await this.getSigningKey(o,i,a,r));return c.update((0,P.Fo)(t)),(0,q.n)(await c.digest())}async signRequest(t,{signingDate:n=new Date,signableHeaders:s,unsignableHeaders:r,signingRegion:o,signingService:i}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const c=o??await this.regionProvider(),d=Xt(t),{longDate:u,shortDate:l}=Ce(n),h=je(l,c,i??this.service);d.headers[qt]=u,a.sessionToken&&(d.headers[eo]=a.sessionToken);const g=await Ve(d,this.sha256);!ho(qe,d.headers)&&this.applyChecksum&&(d.headers[qe]=g);const E=Vt(d,r,s),$=await this.getSignature(u,h,this.getSigningKey(a,c,l,i),this.createCanonicalRequest(d,E,g));return d.headers[Bt]=`${ze} Credential=${a.accessKeyId}/${h}, SignedHeaders=${Qt(E)}, Signature=${$}`,d}createCanonicalRequest(t,n,s){const r=Object.keys(n).sort();return`${t.method}
${this.getCanonicalPath(t)}
${uo(t)}
${r.map(o=>`${o}:${n[o]}`).join(`
`)}

${r.join(";")}
${s}`}async createStringToSign(t,n,s){const r=new this.sha256;r.update((0,P.Fo)(s));const o=await r.digest();return`${ze}
${t}
${n}
${(0,q.n)(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const n=[];for(const o of t.split("/"))o?.length!==0&&o!=="."&&(o===".."?n.pop():n.push(o));const s=`${t?.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&t?.endsWith("/")?"/":""}`;return(0,_e.o)(s).replace(/%2F/g,"/")}return t}async getSignature(t,n,s,r){const o=await this.createStringToSign(t,n,r),i=new this.sha256(await s);return i.update((0,P.Fo)(o)),(0,q.n)(await i.digest())}getSigningKey(t,n,s,r){return co(this.sha256,t,s,n,r||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const Ce=e=>{const t=mo(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Qt=e=>Object.keys(e).sort().join(";"),So=e=>{let t=!1,n;e.credentials&&(t=!0,n=zn(e.credentials,qn,Ze)),n||(e.credentialDefaultProvider?n=se(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("`credentials` is missing")});const s=async()=>n({callerClientConfig:e}),{signingEscapePath:r=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e;let a;return e.signer?a=se(e.signer):e.regionInfoProvider?a=()=>se(e.region)().then(async c=>[await e.regionInfoProvider(c,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},c]).then(([c,d])=>{const{signingRegion:u,signingService:l}=c;e.signingRegion=e.signingRegion||u||d,e.signingName=e.signingName||l||e.serviceId;const h={...e,credentials:s,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:r},g=e.signerConstructor||Yt;return new g(h)}):a=async c=>{c=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await se(e.region)(),properties:{}},c);const d=c.signingRegion,u=c.signingName;e.signingRegion=e.signingRegion||d,e.signingName=e.signingName||u||e.serviceId;const l={...e,credentials:s,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:r},h=e.signerConstructor||Yt;return new h(l)},{...e,systemClockOffset:o,signingEscapePath:r,credentials:t?async()=>s().then(c=>(0,Wr.g)(c,"CREDENTIALS_CODE","e")):s,signer:a}},Yi=null,Eo=async(e,t,n)=>({operation:ge(t).operation,region:await L(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Ro(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,n)=>({signingProperties:{config:t,context:n}})}}function Ne(e){return{schemeId:"smithy.api#noAuth"}}const wo=e=>{const t=[];switch(e.operation){case"GetRoleCredentials":{t.push(Ne(e));break}case"ListAccountRoles":{t.push(Ne(e));break}case"ListAccounts":{t.push(Ne(e));break}case"Logout":{t.push(Ne(e));break}default:t.push(Ro(e))}return t},Ao=e=>({...So(e)}),To={rE:"3.758.0"},Zt={warningEmitted:!1},Io=e=>{e&&!Zt.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(Zt.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))};var Jt=p(70857),Ke=p(932);const _o={isCrtAvailable:!1},vo=()=>_o.isCrtAvailable?["md/crt-avail"]:null,Co=({serviceId:e,clientVersion:t})=>async n=>{const s=[["aws-sdk-js",t],["ua","2.1"],[`os/${(0,Jt.platform)()}`,(0,Jt.release)()],["lang/js"],["md/nodejs",`${Ke.versions.node}`]],r=vo();r&&s.push(r),e&&s.push([`api/${e}`,t]),Ke.env.AWS_EXECUTION_ENV&&s.push([`exec-env/${Ke.env.AWS_EXECUTION_ENV}`]);const o=await n?.userAgentAppId?.();return o?[...s,[`app/${o}`]]:[...s]},Qi=null,No="AWS_SDK_UA_APP_ID",Oo="sdk_ua_app_id",Do="sdk-ua-app-id",bo={environmentVariableSelector:e=>e[No],configFileSelector:e=>e[Oo]??e[Do],default:at};var Xe=p(15932),Po=p(20181),en=p(76982);class ko{constructor(t,n){this.algorithmIdentifier=t,this.secret=n,this.reset()}update(t,n){this.hash.update((0,P.Fo)(tn(t,n)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,en.createHmac)(this.algorithmIdentifier,tn(this.secret)):(0,en.createHash)(this.algorithmIdentifier)}}function tn(e,t){return Po.Buffer.isBuffer(e)?e:typeof e=="string"?(0,Xe.s)(e,t):ArrayBuffer.isView(e)?(0,Xe.Q)(e.buffer,e.byteOffset,e.byteLength):(0,Xe.Q)(e)}var nn=p(57573),sn=p(79896);const xo=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,sn.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,sn.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)},rn=e=>new Date(Date.now()+e),on=e=>S.cS.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,Mo=(e,t)=>Math.abs(rn(t).getTime()-e)>=3e5,an=(e,t)=>{const n=Date.parse(e);return Mo(n,t)?n-Date.now():t},ce=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},$o=async e=>{const t=ce("context",e.context),n=ce("config",e.config),s=t.endpointV2?.properties?.authSchemes?.[0],o=await ce("signer",n.signer)(s),i=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:n,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}};class Uo{async sign(t,n,s){if(!S.Kd.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const r=await $o(s),{config:o,signer:i}=r;let{signingRegion:a,signingName:c}=r;const d=s.context;if(d?.authSchemes?.length??0>1){const[l,h]=d.authSchemes;l?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await i.sign(t,{signingDate:rn(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return n=>{const s=n.ServerTime??on(n.$response);if(s){const r=ce("config",t.config),o=r.systemClockOffset;r.systemClockOffset=an(s,r.systemClockOffset),r.systemClockOffset!==o&&n.$metadata&&(n.$metadata.clockSkewCorrected=!0)}throw n}}successHandler(t,n){const s=on(t);if(s){const r=ce("config",n.config);r.systemClockOffset=an(s,r.systemClockOffset)}}}const Zi=null;var cn=p(77354);const dn="required",C="fn",N="argv",Q="ref",un=!0,ln="isSet",de="booleanEquals",Z="error",J="endpoint",M="tree",Ye="PartitionResult",Qe="getAttr",fn={[dn]:!1,type:"String"},pn={[dn]:!0,default:!1,type:"Boolean"},hn={[Q]:"Endpoint"},gn={[C]:de,[N]:[{[Q]:"UseFIPS"},!0]},mn={[C]:de,[N]:[{[Q]:"UseDualStack"},!0]},O={},yn={[C]:Qe,[N]:[{[Q]:Ye},"supportsFIPS"]},Sn={[Q]:Ye},En={[C]:de,[N]:[!0,{[C]:Qe,[N]:[Sn,"supportsDualStack"]}]},Rn=[gn],wn=[mn],An=[{[Q]:"Region"}],Fo={version:"1.0",parameters:{Region:fn,UseDualStack:pn,UseFIPS:pn,Endpoint:fn},rules:[{conditions:[{[C]:ln,[N]:[hn]}],rules:[{conditions:Rn,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Z},{conditions:wn,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Z},{endpoint:{url:hn,properties:O,headers:O},type:J}],type:M},{conditions:[{[C]:ln,[N]:An}],rules:[{conditions:[{[C]:"aws.partition",[N]:An,assign:Ye}],rules:[{conditions:[gn,mn],rules:[{conditions:[{[C]:de,[N]:[un,yn]},En],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:O,headers:O},type:J}],type:M},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Z}],type:M},{conditions:Rn,rules:[{conditions:[{[C]:de,[N]:[yn,un]}],rules:[{conditions:[{[C]:"stringEquals",[N]:[{[C]:Qe,[N]:[Sn,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:O,headers:O},type:J},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:O,headers:O},type:J}],type:M},{error:"FIPS is enabled but this partition does not support FIPS",type:Z}],type:M},{conditions:wn,rules:[{conditions:[En],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:O,headers:O},type:J}],type:M},{error:"DualStack is enabled but this partition does not support DualStack",type:Z}],type:M},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:O,headers:O},type:J}],type:M}],type:M},{error:"Invalid Configuration: Missing Region",type:Z}]},Lo=new vs({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Ho=(e,t={})=>Lo.get(e,()=>Gs(Fo,{endpointParams:e,logger:t.logger}));Ee.aws=Et;const Go=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??cn.E,base64Encoder:e?.base64Encoder??cn.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Ho,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??wo,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Uo},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Bn}],logger:e?.logger??new f.N4,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??K.D,utf8Decoder:e?.utf8Decoder??P.ar,utf8Encoder:e?.utf8Encoder??P.Pq});var Bo=p(16506);const qo="AWS_EXECUTION_ENV",Tn="AWS_REGION",In="AWS_DEFAULT_REGION",zo="AWS_EC2_METADATA_DISABLED",jo=["in-region","cross-region","mobile","standard","legacy"],Vo="/latest/meta-data/placement/region",Wo="AWS_DEFAULTS_MODE",Ko="defaults_mode",Xo={environmentVariableSelector:e=>e[Wo],configFileSelector:e=>e[Ko],default:"legacy"},Yo=({region:e=(0,m.Z)(Tt),defaultsMode:t=(0,m.Z)(Xo)}={})=>(0,Bo.Bj)(async()=>{const n=typeof t=="function"?await t():t;switch(n?.toLowerCase()){case"auto":return Qo(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(n?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${jo.join(", ")}, got ${n}`)}}),Qo=async e=>{if(e){const t=typeof e=="function"?await e():e,n=await Zo();return n?t===n?"in-region":"cross-region":"standard"}return"standard"},Zo=async()=>{if(process.env[qo]&&(process.env[Tn]||process.env[In]))return process.env[Tn]??process.env[In];if(!process.env[zo])try{const{getInstanceMetadataEndpoint:e,httpRequest:t}=await p.e(416).then(p.bind(p,45035)),n=await e();return(await t({...n,path:Vo})).toString()}catch{}},Jo=e=>{(0,f.I9)(process.version);const t=Yo(e),n=()=>t().then(f.lT),s=Go(e);Io(process.version);const r={profile:e?.profile};return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??xo,defaultUserAgentProvider:e?.defaultUserAgentProvider??Co({serviceId:s.serviceId,clientVersion:To.rE}),maxAttempts:e?.maxAttempts??(0,m.Z)(br,e),region:e?.region??(0,m.Z)(Tt,{...ur,...r}),requestHandler:nn.$c.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,m.Z)({...Mr,default:async()=>(await n()).retryMode||Ct},e),sha256:e?.sha256??ko.bind(null,"sha256"),streamCollector:e?.streamCollector??nn.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,m.Z)(rr,r),useFipsEndpoint:e?.useFipsEndpoint??(0,m.Z)(ar,r),userAgentAppId:e?.userAgentAppId??(0,m.Z)(bo,r)}},ei=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");const n=e.region;return typeof n=="string"?n:n()};return{setRegion(n){t=n},region(){return t}}},ti=e=>({region:e.region()}),ni="AWS_REGION",si="region",ea={environmentVariableSelector:e=>e[ni],configFileSelector:e=>e[si],default:()=>{throw new Error("Region is missing")}},ta={preferredFile:"credentials"},ri=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(r){const o=t.findIndex(i=>i.schemeId===r.schemeId);o===-1?t.push(r):t.splice(o,1,r)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(r){n=r},httpAuthSchemeProvider(){return n},setCredentials(r){s=r},credentials(){return s}}},oi=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Oe=e=>e,ii=(e,t)=>{const n={...Oe(ei(e)),...Oe((0,f.xA)(e)),...Oe((0,S.eS)(e)),...Oe(ri(e))};return t.forEach(s=>s.configure(n)),{...e,...ti(n),...(0,f.uv)(n),...(0,S.jt)(n),...oi(n)}};class ai extends f.Kj{constructor(...[n]){const s=Jo(n||{}),r=Xn(s),o=_s(r),i=Pr(o),a=lr(i),c=a,d=Kn(c),u=Ao(d),l=ii(u,n?.extensions||[]);super(l);k(this,"config");this.config=l,this.middlewareStack.use(tr(this.config)),this.middlewareStack.use(jr(this.config)),this.middlewareStack.use(hr(this.config)),this.middlewareStack.use(gs(this.config)),this.middlewareStack.use(Ss(this.config)),this.middlewareStack.use(Ts(this.config)),this.middlewareStack.use(Nn(this.config,{httpAuthSchemeParametersProvider:Eo,identityProviderConfigProvider:async h=>new Gn({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Fn(this.config))}destroy(){super.destroy()}}},75033:(U,A,p)=>{p.d(A,{Z:()=>W});var x=p(16506);function z(y){try{const m=new Set(Array.from(y.match(/([A-Z_]){3,}/g)??[]));return m.delete("CONFIG"),m.delete("CONFIG_PREFIX_SEPARATOR"),m.delete("ENV"),[...m].join(", ")}catch{return y}}const _=(y,m)=>async()=>{try{const T=y(process.env);if(T===void 0)throw new Error;return T}catch(T){throw new x.C1(T.message||`Not found in ENV: ${z(y.toString())}`,{logger:m})}};var R=p(39084);const V=(y,{preferredFile:m="config",...T}={})=>async()=>{const F=(0,R.Bz)(T),{configFile:ee,credentialsFile:le}=await(0,R.p6)(T),te=le[F]||{},K=ee[F]||{},fe=m==="config"?{...te,...K}:{...K,...te};try{const he=y(fe,m==="config"?ee:le);if(he===void 0)throw new Error;return he}catch(pe){throw new x.C1(pe.message||`Not found in config files w/ profile [${F}]: ${z(y.toString())}`,{logger:T.logger})}},w=y=>typeof y=="function",v=y=>w(y)?async()=>await y():(0,x.VR)(y),W=({environmentVariableSelector:y,configFileSelector:m,default:T},F={})=>(0,x.Bj)((0,x.cy)(_(y),V(m,F),v(T)))},30183:(U,A,p)=>{p.d(A,{D:()=>z});function x(_){const R={};if(_=_.replace(/^\?/,""),_)for(const V of _.split("&")){let[w,v=null]=V.split("=");w=decodeURIComponent(w),v&&(v=decodeURIComponent(v)),w in R?Array.isArray(R[w])?R[w].push(v):R[w]=[R[w],v]:R[w]=v}return R}const z=_=>{if(typeof _=="string")return z(new URL(_));const{hostname:R,pathname:V,port:w,protocol:v,search:W}=_;let y;return W&&(y=x(W)),{hostname:R,port:w?parseInt(w):void 0,protocol:v,path:V,query:y}}}};
