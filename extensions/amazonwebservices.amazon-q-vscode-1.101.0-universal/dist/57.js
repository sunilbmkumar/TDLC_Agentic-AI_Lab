"use strict";var Jd=Object.defineProperty;var Zd=(oe,j,w)=>j in oe?Jd(oe,j,{enumerable:!0,configurable:!0,writable:!0,value:w}):oe[j]=w;var A=(oe,j,w)=>(Zd(oe,typeof j!="symbol"?j+"":j,w),w);exports.id=57,exports.ids=[57],exports.modules={37057:(oe,j,w)=>{w.d(j,{CreateTokenCommand:()=>Yd,SSOOIDCClient:()=>Cd});const V=e=>{let t=e.httpHandler;return{setHttpHandler(n){t=n},httpHandler(){return t},updateHttpClientConfig(n,r){t.updateHttpClientConfig(n,r)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},U=e=>({httpHandler:e.httpHandler()});var z;(function(e){e.HEADER="header",e.QUERY="query"})(z||(z={}));var X;(function(e){e.HEADER="header",e.QUERY="query"})(X||(X={}));var N;(function(e){e.HTTP="http",e.HTTPS="https"})(N||(N={}));var C;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(C||(C={}));const F=e=>{const t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>C.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>C.MD5,checksumConstructor:()=>e.md5}),{_checksumAlgorithms:t,addChecksumAlgorithm(n){this._checksumAlgorithms.push(n)},checksumAlgorithms(){return this._checksumAlgorithms}}},de=e=>{const t={};return e.checksumAlgorithms().forEach(n=>{t[n.algorithmId()]=n.checksumConstructor()}),t},pt=e=>({...getChecksumConfiguration(e)}),Ee=e=>({...resolveChecksumRuntimeConfig(e)});var ge;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(ge||(ge={}));const W="__smithy_context";var ue;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(ue||(ue={}));var Vt;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Vt||(Vt={}));class co{constructor({name:t,kind:n=FieldPosition.HEADER,values:r=[]}){this.name=t,this.kind=n,this.values=r}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(n=>n!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}}class Q{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){const n=new Q({...t,headers:{...t.headers}});return n.query&&(n.query=Yn(n.query)),n}static isInstance(t){if(!t)return!1;const n=t;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return Q.clone(this)}}function Yn(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return{...t,[n]:Array.isArray(r)?[...r]:r}},{})}class Je{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const n=t;return typeof n.statusCode=="number"&&typeof n.headers=="object"}}function uo(e){return e}const Qn=e=>t=>async n=>{if(!Q.isInstance(n.request))return t(n);const{request:r}=n,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let o=r.hostname;r.port!=null&&(o+=`:${r.port}`),r.headers.host=o}return t(n)},Gt={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},gt=e=>({applyToStack:t=>{t.add(Qn(e),Gt)}}),mt=()=>(e,t)=>async n=>{try{const r=await e(n),{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:c={}}=t,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:f}=c,y=u??t.inputFilterSensitiveLog,p=f??t.outputFilterSensitiveLog,{$metadata:g,...S}=r.output;return i?.info?.({clientName:s,commandName:o,input:y(n.input),output:p(S),metadata:g}),r}catch(r){const{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:c={}}=t,{overrideInputFilterSensitiveLog:u}=c,f=u??t.inputFilterSensitiveLog;throw i?.error?.({clientName:s,commandName:o,input:f(n.input),error:r,metadata:r.$metadata}),r}},yt={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Me=e=>({applyToStack:t=>{t.add(mt(),yt)}}),qt="X-Amzn-Trace-Id",Jn="AWS_LAMBDA_FUNCTION_NAME",Zn="_X_AMZN_TRACE_ID",er=e=>t=>async n=>{const{request:r}=n;if(!Q.isInstance(r)||e.runtime!=="node"||r.headers.hasOwnProperty(qt))return t(n);const s=process.env[Jn],o=process.env[Zn],i=c=>typeof c=="string"&&c.length>0;return i(s)&&i(o)&&(r.headers[qt]=o),t({...n,request:r})},Et={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},St=e=>({applyToStack:t=>{t.add(er(e),Et)}}),Kt=e=>e[SMITHY_CONTEXT_KEY]||(e[SMITHY_CONTEXT_KEY]={}),Ze=e=>e[W]||(e[W]={}),Te=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t};function tr(e){const t=new Map;for(const n of e)t.set(n.schemeId,n);return t}const nr=(e,t)=>(n,r)=>async s=>{const o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,r,s.input)),i=tr(e.httpAuthSchemes),c=Ze(r),u=[];for(const f of o){const y=i.get(f.schemeId);if(!y){u.push(`HttpAuthScheme \`${f.schemeId}\` was not enabled for this service.`);continue}const p=y.identityProvider(await t.identityProviderConfigProvider(e));if(!p){u.push(`HttpAuthScheme \`${f.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:g={},signingProperties:S={}}=f.propertiesExtractor?.(e,r)||{};f.identityProperties=Object.assign(f.identityProperties||{},g),f.signingProperties=Object.assign(f.signingProperties||{},S),c.selectedHttpAuthScheme={httpAuthOption:f,identity:await p(f.identityProperties),signer:y.signer};break}if(!c.selectedHttpAuthScheme)throw new Error(u.join(`
`));return n(s)},wt={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},rr=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(nr(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),wt)}}),Xt=(e,t)=>(n,r)=>async s=>{const{response:o}=await n(s);try{const i=await t(o,e);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){const c="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+c}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(c):r.logger?.warn?.(c)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText)}throw i}},sr=(e,t)=>(n,r)=>async s=>{const o=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const i=await t(s.input,{...e,endpoint:o});return n({...s,request:i})},Tt={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},_t={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Rt(e,t,n){return{applyToStack:r=>{r.add(Xt(e,n),Tt),r.add(sr(e,t),_t)}}}const or={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:_t.name},ir=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(httpAuthSchemeMiddleware(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),or)}}),ar=e=>t=>{throw t},et=(e,t)=>{},cr=e=>(t,n)=>async r=>{if(!Q.isInstance(r.request))return t(r);const o=Ze(n).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:i={}},identity:c,signer:u}=o,f=await t({...r,request:await u.sign(r.request,c,i)}).catch((u.errorHandler||ar)(i));return(u.successHandler||et)(f.response,i),f},dr={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},ur=e=>({applyToStack:t=>{t.addRelativeTo(cr(e),dr)}}),Ce=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t};var tt=w(4902);const Yt=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return tt.Mu.mutate(e);if(!e)return tt.Mu.mutate(new Uint8Array);const n=t.streamCollector(e);return tt.Mu.mutate(await n)};function At(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}const Qt=(e,t,n,r,s,o)=>{if(t!=null&&t[n]!==void 0){const i=r();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");e=e.replace(s,o?i.split("/").map(c=>At(c)).join("/"):At(i))}else throw new Error("No value provided for input HTTP label: "+n+".");return e};function nt(e,t){return new bt(e,t)}class bt{constructor(t,n){this.input=t,this.context=n,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:t,protocol:n="https",port:r,path:s}=await this.context.endpoint();this.path=s;for(const o of this.resolvePathStack)o(this.path);return new Q({protocol:n,hostname:this.hostname||t,port:r,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(n=>{this.path=`${n?.endsWith("/")?n.slice(0,-1):n||""}`+t}),this}p(t,n,r,s){return this.resolvePathStack.push(o=>{this.path=Qt(o,this.input,t,n,r,s)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}function Jt(e,t,n){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=n}class Zt{constructor(t){this.authSchemes=new Map;for(const[n,r]of Object.entries(t))r!==void 0&&this.authSchemes.set(n,r)}getIdentityProvider(t){return this.authSchemes.get(t)}}class lr{async sign(t,n,r){if(!r)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!r.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!r.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!n.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");const s=HttpRequest.clone(t);if(r.in===HttpApiKeyAuthLocation.QUERY)s.query[r.name]=n.apiKey;else if(r.in===HttpApiKeyAuthLocation.HEADER)s.headers[r.name]=r.scheme?`${r.scheme} ${n.apiKey}`:n.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+r.in+"`");return s}}class fr{async sign(t,n,r){const s=HttpRequest.clone(t);if(!n.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${n.token}`,s}}class en{async sign(t,n,r){return t}}const Ct=(e=>t=>It(t)&&t.expiration.getTime()-Date.now()<e)(3e5),It=e=>e.expiration!==void 0,vt=(e,t,n)=>{if(e===void 0)return;const r=typeof e!="function"?async()=>Promise.resolve(e):e;let s,o,i,c=!1;const u=async f=>{o||(o=r(f));try{s=await o,i=!0,c=!1}finally{o=void 0}return s};return t===void 0?async f=>((!i||f?.forceRefresh)&&(s=await u(f)),s):async f=>((!i||f?.forceRefresh)&&(s=await u(f)),c?s:n(s)?(t(s)&&await u(f),s):(c=!0,s))},rt=void 0;function nn(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function hr(e){const t=Ce(e.userAgentAppId??rt);return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent,userAgentAppId:async()=>{const n=await t();if(!nn(n)){const r=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?r?.warn("userAgentAppId must be a string or undefined."):n.length>50&&r?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}}}class d{constructor({size:t,params:n}){this.data=new Map,this.parameters=[],this.capacity=t??50,n&&(this.parameters=n)}get(t,n){const r=this.hash(t);if(r===!1)return n();if(!this.data.has(r)){if(this.data.size>this.capacity+10){const s=this.data.keys();let o=0;for(;;){const{value:i,done:c}=s.next();if(this.data.delete(i),c||++o>10)break}}this.data.set(r,n())}return this.data.get(r)}size(){return this.data.size}hash(t){let n="";const{parameters:r}=this;if(r.length===0)return!1;for(const s of r){const o=String(t[s]??"");if(o.includes("|;"))return!1;n+=o+"|;"}return n}}const a=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),l=e=>a.test(e)||e.startsWith("[")&&e.endsWith("]"),h=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),m=(e,t=!1)=>{if(!t)return h.test(e);const n=e.split(".");for(const r of n)if(!m(r))return!1;return!0},E={},_="endpoints";function R(e){return typeof e!="object"||e==null?e:"ref"in e?`$${R(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(R).join(", ")})`:JSON.stringify(e,null,2)}class T extends Error{constructor(t){super(t),this.name="EndpointError"}}const k=(e,t)=>e===t,L=e=>{const t=e.split("."),n=[];for(const r of t){const s=r.indexOf("[");if(s!==-1){if(r.indexOf("]")!==r.length-1)throw new T(`Path: '${e}' does not end with ']'`);const o=r.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new T(`Invalid array index: '${o}' in path: '${e}'`);s!==0&&n.push(r.slice(0,s)),n.push(o)}else n.push(r)}return n},ee=(e,t)=>L(t).reduce((n,r)=>{if(typeof n!="object")throw new T(`Index '${r}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},e),me=e=>e!=null,te=e=>!e,ie={[N.HTTP]:80,[N.HTTPS]:443},P={booleanEquals:k,getAttr:ee,isSet:me,isValidHostLabel:m,not:te,parseURL:e=>{const t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){const{hostname:g,port:S,protocol:I="",path:D="",query:b={}}=e,v=new URL(`${I}//${g}${S?`:${S}`:""}${D}`);return v.search=Object.entries(b).map(([M,O])=>`${M}=${O}`).join("&"),v}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const n=t.href,{host:r,hostname:s,pathname:o,protocol:i,search:c}=t;if(c)return null;const u=i.slice(0,-1);if(!Object.values(N).includes(u))return null;const f=l(s),y=n.includes(`${r}:${ie[u]}`)||typeof e=="string"&&e.includes(`${r}:${ie[u]}`),p=`${r}${y?`:${ie[u]}`:""}`;return{scheme:u,authority:p,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:f}},stringEquals:(e,t)=>e===t,substring:(e,t,n,r)=>t>=n||e.length<n?null:r?e.substring(e.length-n,e.length-t):e.substring(t,n),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)},B=(e,t)=>{const n=[],r={...t.endpointParams,...t.referenceRecord};let s=0;for(;s<e.length;){const o=e.indexOf("{",s);if(o===-1){n.push(e.slice(s));break}n.push(e.slice(s,o));const i=e.indexOf("}",o);if(i===-1){n.push(e.slice(o));break}e[o+1]==="{"&&e[i+1]==="}"&&(n.push(e.slice(o+1,i)),s=i+2);const c=e.substring(o+1,i);if(c.includes("#")){const[u,f]=c.split("#");n.push(ee(r[u],f))}else n.push(r[c]);s=i+1}return n.join("")},_e=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],Ie=(e,t,n)=>{if(typeof e=="string")return B(e,n);if(e.fn)return ne(e,n);if(e.ref)return _e(e,n);throw new T(`'${t}': ${String(e)} is not a string, function or reference.`)},ne=({fn:e,argv:t},n)=>{const r=t.map(o=>["boolean","number"].includes(typeof o)?o:Ie(o,"arg",n)),s=e.split(".");return s[0]in E&&s[1]!=null?E[s[0]][s[1]](...r):P[e](...r)},G=({assign:e,...t},n)=>{if(e&&e in n.referenceRecord)throw new T(`'${e}' is already defined in Reference Record.`);const r=ne(t,n);return n.logger?.debug?.(`${_} evaluateCondition: ${R(t)} = ${R(r)}`),{result:r===""?!0:!!r,...e!=null&&{toAssign:{name:e,value:r}}}},re=(e=[],t)=>{const n={};for(const r of e){const{result:s,toAssign:o}=G(r,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!s)return{result:s};o&&(n[o.name]=o.value,t.logger?.debug?.(`${_} assign: ${o.name} := ${R(o.value)}`))}return{result:!0,referenceRecord:n}},rn=(e,t)=>Object.entries(e).reduce((n,[r,s])=>({...n,[r]:s.map(o=>{const i=Ie(o,"Header value entry",t);if(typeof i!="string")throw new T(`Header '${r}' value '${i}' is not a string`);return i})}),{}),pr=(e,t)=>{if(Array.isArray(e))return e.map(n=>pr(n,t));switch(typeof e){case"string":return B(e,t);case"object":if(e===null)throw new T(`Unexpected endpoint property: ${e}`);return gr(e,t);case"boolean":return e;default:throw new T(`Unexpected endpoint property type: ${typeof e}`)}},gr=(e,t)=>Object.entries(e).reduce((n,[r,s])=>({...n,[r]:pr(s,t)}),{}),fo=(e,t)=>{const n=Ie(e,"Endpoint URL",t);if(typeof n=="string")try{return new URL(n)}catch(r){throw console.error(`Failed to construct URL with ${n}`,r),r}throw new T(`Endpoint URL must be a string, got ${typeof n}`)},ho=(e,t)=>{const{conditions:n,endpoint:r}=e,{result:s,referenceRecord:o}=re(n,t);if(!s)return;const i={...t,referenceRecord:{...t.referenceRecord,...o}},{url:c,properties:u,headers:f}=r;return t.logger?.debug?.(`${_} Resolving endpoint from template: ${R(r)}`),{...f!=null&&{headers:rn(f,i)},...u!=null&&{properties:gr(u,i)},url:fo(c,i)}},po=(e,t)=>{const{conditions:n,error:r}=e,{result:s,referenceRecord:o}=re(n,t);if(!!s)throw new T(Ie(r,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},go=(e,t)=>{const{conditions:n,rules:r}=e,{result:s,referenceRecord:o}=re(n,t);if(!!s)return mr(r,{...t,referenceRecord:{...t.referenceRecord,...o}})},mr=(e,t)=>{for(const n of e)if(n.type==="endpoint"){const r=ho(n,t);if(r)return r}else if(n.type==="error")po(n,t);else if(n.type==="tree"){const r=go(n,t);if(r)return r}else throw new T(`Unknown endpoint rule: ${n}`);throw new T("Rules evaluation failed")},mo=(e,t)=>{const{endpointParams:n,logger:r}=t,{parameters:s,rules:o}=e;t.logger?.debug?.(`${_} Initial EndpointParams: ${R(n)}`);const i=Object.entries(s).filter(([,f])=>f.default!=null).map(([f,y])=>[f,y.default]);if(i.length>0)for(const[f,y]of i)n[f]=n[f]??y;const c=Object.entries(s).filter(([,f])=>f.required).map(([f])=>f);for(const f of c)if(n[f]==null)throw new T(`Missing required parameter: '${f}'`);const u=mr(o,{endpointParams:n,logger:r,referenceRecord:{}});return t.logger?.debug?.(`${_} Resolved endpoint: ${R(u)}`),u},yr=(e,t=!1)=>{if(t){for(const n of e.split("."))if(!yr(n))return!1;return!0}return!(!m(e)||e.length<3||e.length>63||e!==e.toLowerCase()||l(e))},Er=":",yo="/",Eo=e=>{const t=e.split(Er);if(t.length<6)return null;const[n,r,s,o,i,...c]=t;if(n!=="arn"||r===""||s===""||c.join(Er)==="")return null;const u=c.map(f=>f.split(yo)).flat();return{partition:r,service:s,region:o,accountId:i,resourceId:u}};let Sr=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il|mx)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"ap-southeast-5":{"description":"Asia Pacific (Malaysia)"},"ap-southeast-7":{"description":"Asia Pacific (Thailand)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"mx-central-1":{"description":"Mexico (Central)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-f-global":{"description":"AWS ISOF global region"},"us-isof-east-1":{"description":"US ISOF EAST"},"us-isof-south-1":{"description":"US ISOF SOUTH"}}}],"version":"1.1"}'),wr="";const So=e=>{const{partitions:t}=Sr;for(const r of t){const{regions:s,outputs:o}=r;for(const[i,c]of Object.entries(s))if(i===e)return{...o,...c}}for(const r of t){const{regionRegex:s,outputs:o}=r;if(new RegExp(s).test(e))return{...o}}const n=t.find(r=>r.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},wo=(e,t="")=>{Sr=e,wr=t},tu=()=>{wo(partitionsInfo,"")},To=()=>wr,Tr={isVirtualHostableS3Bucket:yr,parseArn:Eo,partition:So};E.aws=Tr;function Se(e,t,n){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=n}const _o=/\d{12}\.ddb/;async function Ro(e,t,n){if(n.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Se(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){const o=await t.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?Se(e,"RETRY_MODE_ADAPTIVE","F"):Se(e,"RETRY_MODE_STANDARD","E"):Se(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){const o=e.endpointV2;switch(String(o?.url?.hostname).match(_o)&&Se(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Se(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Se(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Se(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){const o=s;o.accountId&&Se(e,"RESOLVED_ACCOUNT_ID","T");for(const[i,c]of Object.entries(o.$source??{}))Se(e,i,c)}}const _r="user-agent",sn="x-amz-user-agent",Rr=" ",on="/",Ao=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,bo=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Ar="-",Co=1024;function Io(e){let t="";for(const n in e){const r=e[n];if(t.length+r.length+1<=Co){t.length?t+=","+r:t+=r;continue}break}return t}const vo=e=>(t,n)=>async r=>{const{request:s}=r;if(!Q.isInstance(s))return t(r);const{headers:o}=s,i=n?.userAgent?.map(Ot)||[],c=(await e.defaultUserAgentProvider()).map(Ot);await Ro(n,e,r);const u=n;c.push(`m/${Io(Object.assign({},n.__smithy_context?.features,u.__aws_sdk_context?.features))}`);const f=e?.customUserAgent?.map(Ot)||[],y=await e.userAgentAppId();y&&c.push(Ot([`app/${y}`]));const p=To(),g=(p?[p]:[]).concat([...c,...i,...f]).join(Rr),S=[...c.filter(I=>I.startsWith("aws-sdk-")),...f].join(Rr);return e.runtime!=="browser"?(S&&(o[sn]=o[sn]?`${o[_r]} ${S}`:S),o[_r]=g):o[sn]=g,t({...r,request:s})},Ot=e=>{const t=e[0].split(on).map(i=>i.replace(Ao,Ar)).join(on),n=e[1]?.replace(bo,Ar),r=t.indexOf(on),s=t.substring(0,r);let o=t.substring(r+1);return s==="api"&&(o=o.toLowerCase()),[s,o,n].filter(i=>i&&i.length>0).reduce((i,c,u)=>{switch(u){case 0:return c;case 1:return`${i}/${c}`;default:return`${i}#${c}`}},"")},Oo={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Po=e=>({applyToStack:t=>{t.add(vo(e),Oo)}}),Pt=(e,t,n)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${n} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var Ue;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Ue||(Ue={}));const No="AWS_USE_DUALSTACK_ENDPOINT",xo="use_dualstack_endpoint",nu=!1,Do={environmentVariableSelector:e=>Pt(e,No,Ue.ENV),configFileSelector:e=>Pt(e,xo,Ue.CONFIG),default:!1},ko="AWS_USE_FIPS_ENDPOINT",$o="use_fips_endpoint",ru=!1,Fo={environmentVariableSelector:e=>Pt(e,ko,Ue.ENV),configFileSelector:e=>Pt(e,$o,Ue.CONFIG),default:!1},su=e=>{const{endpoint:t,urlParser:n}=e;return{...e,tls:e.tls??!0,endpoint:normalizeProvider(typeof t=="string"?n(t):t),isCustomEndpoint:!0,useDualstackEndpoint:normalizeProvider(e.useDualstackEndpoint??!1)}},ou=e=>{const t=normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:n,useFipsEndpoint:r,urlParser:s}=e;return{...e,tls:e.tls??!0,endpoint:n?normalizeProvider(typeof n=="string"?s(n):n):()=>getEndpointFromRegion({...e,useDualstackEndpoint:t,useFipsEndpoint:r}),isCustomEndpoint:!!n,useDualstackEndpoint:t}},Mo="AWS_REGION",Uo="region",br={environmentVariableSelector:e=>e[Mo],configFileSelector:e=>e[Uo],default:()=>{throw new Error("Region is missing")}},Lo={preferredFile:"credentials"},Cr=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),Ir=e=>Cr(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,Ho=e=>{const{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Ir(t);const r=await t();return Ir(r)},useFipsEndpoint:async()=>{const r=typeof t=="string"?t:await t();return Cr(r)?!0:typeof n!="function"?Promise.resolve(!!n):n()}}},vr="content-length";function Bo(e){return t=>async n=>{const r=n.request;if(Q.isInstance(r)){const{body:s,headers:o}=r;if(s&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(vr)===-1)try{const i=e(s);r.headers={...r.headers,[vr]:String(i)}}catch{}}return t({...n,request:r})}}const jo={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},zo=e=>({applyToStack:t=>{t.add(Bo(e.bodyLengthChecker),jo)}}),Wo=async e=>{const t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Xo(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Ko(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Vo=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Go=/(\d+\.){3}\d+/,qo=/\.\./,iu=/\./,au=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,Ko=e=>Vo.test(e)&&!Go.test(e)&&!qo.test(e),Xo=e=>{const[t,n,r,,,s]=e.split(":"),o=t==="arn"&&e.split(":").length>=6,i=Boolean(o&&n&&r&&s);if(o&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},Yo=(e,t,n)=>{const r=async()=>{const s=n[e]??n[t];return typeof s=="function"?s():s};return e==="credentialScope"||t==="CredentialScope"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.credentialScope??s?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.accountId??s?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{const s=await r();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:o,hostname:i,port:c,path:u}=s;return`${o}//${i}${c?":"+c:""}${u}`}}return s}:r};class st extends Error{constructor(t,n=!0){let r,s=!0;typeof n=="boolean"?(r=void 0,s=n):n!=null&&typeof n=="object"&&(r=n.logger,s=n.tryNextLink??!0),super(t),this.name="ProviderError",this.tryNextLink=s,Object.setPrototypeOf(this,st.prototype),r?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${t}`)}static from(t,n=!0){return Object.assign(new this(t.message,n),t)}}class Nt extends st{constructor(t,n=!0){super(t,n),this.name="CredentialsProviderError",Object.setPrototypeOf(this,Nt.prototype)}}class Or extends st{constructor(t,n=!0){super(t,n),this.name="TokenProviderError",Object.setPrototypeOf(this,Or.prototype)}}const Qo=(...e)=>async()=>{if(e.length===0)throw new st("No providers in chain");let t;for(const n of e)try{return await n()}catch(r){if(t=r,r?.tryNextLink)continue;throw r}throw t},Jo=e=>()=>Promise.resolve(e),Pr=(e,t,n)=>{let r,s,o,i=!1;const c=async()=>{s||(s=e());try{r=await s,o=!0,i=!1}finally{s=void 0}return r};return t===void 0?async u=>((!o||u?.forceRefresh)&&(r=await c()),r):async u=>((!o||u?.forceRefresh)&&(r=await c()),i?r:n&&!n(r)?(i=!0,r):(t(r)&&await c(),r))};function Nr(e){try{const t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}const Zo=(e,t)=>async()=>{try{const n=e(process.env);if(n===void 0)throw new Error;return n}catch(n){throw new Nt(n.message||`Not found in ENV: ${Nr(e.toString())}`,{logger:t})}};var an=w(70857),ot=w(16928);const cn={},ei=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",dn=()=>{const{HOME:e,USERPROFILE:t,HOMEPATH:n,HOMEDRIVE:r=`C:${ot.sep}`}=process.env;if(e)return e;if(t)return t;if(n)return`${r}${n}`;const s=ei();return cn[s]||(cn[s]=(0,an.homedir)()),cn[s]},ti="AWS_PROFILE",ni="default",ri=e=>e.profile||process.env[ti]||ni;var xr=w(76982);const cu=e=>{const n=createHash("sha1").update(e).digest("hex");return join(getHomeDir(),".aws","sso","cache",`${n}.json`)};var Le=w(79896);const{readFile:si}=Le.promises,du=async e=>{const t=getSSOTokenFilepath(e),n=await si(t,"utf8");return JSON.parse(n)},oi=e=>Object.entries(e).filter(([t])=>{const n=t.indexOf(He);return n===-1?!1:Object.values(ue).includes(t.substring(0,n))}).reduce((t,[n,r])=>{const s=n.indexOf(He),o=n.substring(0,s)===ue.PROFILE?n.substring(s+1):n;return t[o]=r,t},{...e.default&&{default:e.default}}),ii="AWS_CONFIG_FILE",ai=()=>process.env[ii]||(0,ot.join)(dn(),".aws","config"),ci="AWS_SHARED_CREDENTIALS_FILE",di=()=>process.env[ci]||(0,ot.join)(dn(),".aws","credentials"),ui=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,li=["__proto__","profile __proto__"],Dr=e=>{const t={};let n,r;for(const s of e.split(/\r?\n/)){const o=s.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){n=void 0,r=void 0;const c=o.substring(1,o.length-1),u=ui.exec(c);if(u){const[,f,,y]=u;Object.values(ue).includes(f)&&(n=[f,y].join(He))}else n=c;if(li.includes(c))throw new Error(`Found invalid profile name "${c}"`)}else if(n){const c=o.indexOf("=");if(![0,-1].includes(c)){const[u,f]=[o.substring(0,c).trim(),o.substring(c+1).trim()];if(f==="")r=u;else{r&&s.trimStart()===s&&(r=void 0),t[n]=t[n]||{};const y=r?[r,u].join(He):u;t[n][y]=f}}}}return t},{readFile:fi}=Le.promises,un={},kr=(e,t)=>((!un[e]||t?.ignoreCache)&&(un[e]=fi(e,"utf8")),un[e]),$r=()=>({}),He=".",hi=async(e={})=>{const{filepath:t=di(),configFilepath:n=ai()}=e,r=dn(),s="~/";let o=t;t.startsWith(s)&&(o=(0,ot.join)(r,t.slice(2)));let i=n;n.startsWith(s)&&(i=(0,ot.join)(r,n.slice(2)));const c=await Promise.all([kr(i,{ignoreCache:e.ignoreCache}).then(Dr).then(oi).catch($r),kr(o,{ignoreCache:e.ignoreCache}).then(Dr).catch($r)]);return{configFile:c[0],credentialsFile:c[1]}},uu=e=>Object.entries(e).filter(([t])=>t.startsWith(IniSectionType.SSO_SESSION+CONFIG_PREFIX_SEPARATOR)).reduce((t,[n,r])=>({...t,[n.substring(n.indexOf(CONFIG_PREFIX_SEPARATOR)+1)]:r}),{}),pi=()=>({}),lu=async(e={})=>slurpFile(e.configFilepath??getConfigFilepath()).then(parseIni).then(getSsoSessionData).catch(pi),fu=async e=>{const t=await loadSharedConfigFiles(e);return mergeConfigFiles(t.configFile,t.credentialsFile)},gi=(e,{preferredFile:t="config",...n}={})=>async()=>{const r=ri(n),{configFile:s,credentialsFile:o}=await hi(n),i=o[r]||{},c=s[r]||{},u=t==="config"?{...i,...c}:{...c,...i};try{const y=e(u,t==="config"?s:o);if(y===void 0)throw new Error;return y}catch(f){throw new Nt(f.message||`Not found in config files w/ profile [${r}]: ${Nr(e.toString())}`,{logger:n.logger})}},mi=e=>typeof e=="function",yi=e=>mi(e)?async()=>await e():Jo(e),Re=({environmentVariableSelector:e,configFileSelector:t,default:n},r={})=>Pr(Qo(Zo(e),gi(t,r),yi(n))),Fr="AWS_ENDPOINT_URL",Mr="endpoint_url",Ei=e=>({environmentVariableSelector:t=>{const n=e.split(" ").map(o=>o.toUpperCase()),r=t[[Fr,...n].join("_")];if(r)return r;const s=t[Fr];if(s)return s},configFileSelector:(t,n)=>{if(n&&t.services){const s=n[["services",t.services].join(He)];if(s){const o=e.split(" ").map(c=>c.toLowerCase()),i=s[[o.join("_"),Mr].join(He)];if(i)return i}}const r=t[Mr];if(r)return r},default:void 0}),Ur=async e=>Re(Ei(e??""))();var Si=w(57413);const xt=e=>{if(typeof e=="string")return xt(new URL(e));const{hostname:t,pathname:n,port:r,protocol:s,search:o}=e;let i;return o&&(i=(0,Si.J)(o)),{hostname:t,port:r?parseInt(r):void 0,protocol:s,path:n,query:i}},Lr=e=>typeof e=="object"?"url"in e?xt(e.url):e:xt(e),wi=async(e,t,n,r)=>{if(!n.endpoint){let i;n.serviceConfiguredEndpoint?i=await n.serviceConfiguredEndpoint():i=await Ur(n.serviceId),i&&(n.endpoint=()=>Promise.resolve(Lr(i)))}const s=await Ti(e,t,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)},Ti=async(e,t,n)=>{const r={},s=t?.getEndpointParameterInstructions?.()||{};for(const[o,i]of Object.entries(s))switch(i.type){case"staticContextParams":r[o]=i.value;break;case"contextParams":r[o]=e[i.name];break;case"clientContextParams":case"builtInParams":r[o]=await Yo(i.name,o,n)();break;case"operationContextParams":r[o]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(s).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&await Wo(r),r},_i=({config:e,instructions:t})=>(n,r)=>async s=>{e.endpoint&&Jt(r,"ENDPOINT_OVERRIDE","N");const o=await wi(s.input,{getEndpointParameterInstructions(){return t}},{...e},r);r.endpointV2=o,r.authSchemes=o.properties?.authSchemes;const i=r.authSchemes?.[0];if(i){r.signing_region=i.signingRegion,r.signing_service=i.signingName;const u=Ze(r)?.selectedHttpAuthScheme?.httpAuthOption;u&&(u.signingProperties=Object.assign(u.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return n({...s})},Ri={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:_t.name},Ai=(e,t)=>({applyToStack:n=>{n.addRelativeTo(_i({config:e,instructions:t}),Ri)}}),bi=e=>{const t=e.tls??!0,{endpoint:n}=e,r=n!=null?async()=>Lr(await Te(n)()):void 0,o={...e,endpoint:r,tls:t,isCustomEndpoint:!!n,useDualstackEndpoint:Te(e.useDualstackEndpoint??!1),useFipsEndpoint:Te(e.useFipsEndpoint??!1)};let i;return o.serviceConfiguredEndpoint=async()=>(e.serviceId&&!i&&(i=Ur(e.serviceId)),i),o};var ve;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(ve||(ve={}));const it=3,Hr=ve.STANDARD;var Ae=w(16206);class at{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(!!this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const n=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>at.setTimeoutFn(r,n))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const n=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=t}updateClientSendingRate(t){let n;if(this.updateMeasuredRate(),(0,Ae.Qb)(t)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),n=Math.floor(t*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(t){return parseFloat(t.toFixed(8))}}at.setTimeoutFn=setTimeout;const ct=100,ln=20*1e3,Br=500,fn=500,jr=5,zr=10,Wr=1,Vr="amz-sdk-invocation-id",Gr="amz-sdk-request",Ci=()=>{let e=ct;return{computeNextBackoffDelay:r=>Math.floor(Math.min(ln,Math.random()*2**r*e)),setDelayBase:r=>{e=r}}},qr=({retryDelay:e,retryCount:t,retryCost:n})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(ln,e),getRetryCost:()=>n});class hn{constructor(t){this.maxAttempts=t,this.mode=ve.STANDARD,this.capacity=fn,this.retryBackoffStrategy=Ci(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return qr({retryDelay:ct,retryCount:0})}async refreshRetryTokenForRetry(t,n){const r=await this.getMaxAttempts();if(this.shouldRetry(t,n,r)){const s=n.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?Br:ct);const o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,o):o,c=this.getCapacityCost(s);return this.capacity-=c,qr({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:c})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(fn,this.capacity+(t.getRetryCost()??Wr))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${it}`),it}}shouldRetry(t,n,r){return t.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(t){return t==="TRANSIENT"?zr:jr}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class Ii{constructor(t,n){this.maxAttemptsProvider=t,this.mode=ve.ADAPTIVE;const{rateLimiter:r}=n??{};this.rateLimiter=r??new at,this.standardRetryStrategy=new hn(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(t,n)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}class hu extends hn{constructor(t,n=ct){super(typeof t=="function"?t:async()=>t),typeof n=="number"?this.computeNextBackoffDelay=()=>n:this.computeNextBackoffDelay=n}async refreshRetryTokenForRetry(t,n){const r=await super.refreshRetryTokenForRetry(t,n);return r.getRetryDelay=()=>this.computeNextBackoffDelay(r.getRetryCount()),r}}var Kr=w(3682);const vi=(e,t)=>{const n=e,r=t?.noRetryIncrement??Wr,s=t?.retryCost??jr,o=t?.timeoutRetryCost??zr;let i=e;const c=p=>p.name==="TimeoutError"?o:s,u=p=>c(p)<=i;return Object.freeze({hasRetryTokens:u,retrieveRetryTokens:p=>{if(!u(p))throw new Error("No retry token available");const g=c(p);return i-=g,g},releaseRetryTokens:p=>{i+=p??r,i=Math.min(i,n)}})},Oi=(e,t)=>Math.floor(Math.min(ln,Math.random()*2**t*e)),Pi=e=>e?(0,Ae.S0)(e)||(0,Ae.h5)(e)||(0,Ae.Qb)(e)||(0,Ae.bV)(e):!1,Xr=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);class Ni{constructor(t,n){this.maxAttemptsProvider=t,this.mode=ve.STANDARD,this.retryDecider=n?.retryDecider??Pi,this.delayDecider=n?.delayDecider??Oi,this.retryQuota=n?.retryQuota??vi(fn)}shouldRetry(t,n,r){return n<r&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=it}return t}async retry(t,n,r){let s,o=0,i=0;const c=await this.getMaxAttempts(),{request:u}=n;for(Q.isInstance(u)&&(u.headers[Vr]=(0,Kr.A)());;)try{Q.isInstance(u)&&(u.headers[Gr]=`attempt=${o+1}; max=${c}`),r?.beforeRequest&&await r.beforeRequest();const{response:f,output:y}=await t(n);return r?.afterRequest&&r.afterRequest(f),this.retryQuota.releaseRetryTokens(s),y.$metadata.attempts=o+1,y.$metadata.totalRetryDelay=i,{response:f,output:y}}catch(f){const y=Xr(f);if(o++,this.shouldRetry(y,o,c)){s=this.retryQuota.retrieveRetryTokens(y);const p=this.delayDecider((0,Ae.Qb)(y)?Br:ct,o),g=xi(y.$response),S=Math.max(g||0,p);i+=S,await new Promise(I=>setTimeout(I,S));continue}throw y.$metadata||(y.$metadata={}),y.$metadata.attempts=o,y.$metadata.totalRetryDelay=i,y}}}const xi=e=>{if(!Je.isInstance(e))return;const t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;const n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n).getTime()-Date.now():r*1e3};class pu extends Ni{constructor(t,n){const{rateLimiter:r,...s}=n??{};super(t,s),this.rateLimiter=r??new at,this.mode=ve.ADAPTIVE}async retry(t,n){return super.retry(t,n,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:r=>{this.rateLimiter.updateClientSendingRate(r)}})}}const Yr="AWS_MAX_ATTEMPTS",Qr="max_attempts",Di={environmentVariableSelector:e=>{const t=e[Yr];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Environment variable ${Yr} mast be a number, got "${t}"`);return n},configFileSelector:e=>{const t=e[Qr];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Shared config file entry ${Qr} mast be a number, got "${t}"`);return n},default:it},ki=e=>{const{retryStrategy:t}=e,n=Te(e.maxAttempts??it);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await Te(e.retryMode)()===ve.ADAPTIVE?new Ii(n):new hn(n))}},$i="AWS_RETRY_MODE",Fi="retry_mode",Mi={environmentVariableSelector:e=>e[$i],configFileSelector:e=>e[Fi],default:Hr},Ui=()=>e=>async t=>{const{request:n}=t;return HttpRequest.isInstance(n)&&(delete n.headers[INVOCATION_ID_HEADER],delete n.headers[REQUEST_HEADER]),e(t)},Li={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},gu=e=>({applyToStack:t=>{t.addRelativeTo(Ui(),Li)}}),ke=(e,t)=>{const n=[];if(e&&n.push(e),t)for(const r of t)n.push(r);return n},Oe=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Dt=()=>{let e=[],t=[],n=!1;const r=new Set,s=p=>p.sort((g,S)=>Jr[S.step]-Jr[g.step]||Zr[S.priority||"normal"]-Zr[g.priority||"normal"]),o=p=>{let g=!1;const S=I=>{const D=ke(I.name,I.aliases);if(D.includes(p)){g=!0;for(const b of D)r.delete(b);return!1}return!0};return e=e.filter(S),t=t.filter(S),g},i=p=>{let g=!1;const S=I=>{if(I.middleware===p){g=!0;for(const D of ke(I.name,I.aliases))r.delete(D);return!1}return!0};return e=e.filter(S),t=t.filter(S),g},c=p=>(e.forEach(g=>{p.add(g.middleware,{...g})}),t.forEach(g=>{p.addRelativeTo(g.middleware,{...g})}),p.identifyOnResolve?.(y.identifyOnResolve()),p),u=p=>{const g=[];return p.before.forEach(S=>{S.before.length===0&&S.after.length===0?g.push(S):g.push(...u(S))}),g.push(p),p.after.reverse().forEach(S=>{S.before.length===0&&S.after.length===0?g.push(S):g.push(...u(S))}),g},f=(p=!1)=>{const g=[],S=[],I={};return e.forEach(b=>{const v={...b,before:[],after:[]};for(const M of ke(v.name,v.aliases))I[M]=v;g.push(v)}),t.forEach(b=>{const v={...b,before:[],after:[]};for(const M of ke(v.name,v.aliases))I[M]=v;S.push(v)}),S.forEach(b=>{if(b.toMiddleware){const v=I[b.toMiddleware];if(v===void 0){if(p)return;throw new Error(`${b.toMiddleware} is not found when adding ${Oe(b.name,b.aliases)} middleware ${b.relation} ${b.toMiddleware}`)}b.relation==="after"&&v.after.push(b),b.relation==="before"&&v.before.push(b)}}),s(g).map(u).reduce((b,v)=>(b.push(...v),b),[])},y={add:(p,g={})=>{const{name:S,override:I,aliases:D}=g,b={step:"initialize",priority:"normal",middleware:p,...g},v=ke(S,D);if(v.length>0){if(v.some(M=>r.has(M))){if(!I)throw new Error(`Duplicate middleware name '${Oe(S,D)}'`);for(const M of v){const O=e.findIndex(Ne=>Ne.name===M||Ne.aliases?.some(Fe=>Fe===M));if(O===-1)continue;const $=e[O];if($.step!==b.step||b.priority!==$.priority)throw new Error(`"${Oe($.name,$.aliases)}" middleware with ${$.priority} priority in ${$.step} step cannot be overridden by "${Oe(S,D)}" middleware with ${b.priority} priority in ${b.step} step.`);e.splice(O,1)}}for(const M of v)r.add(M)}e.push(b)},addRelativeTo:(p,g)=>{const{name:S,override:I,aliases:D}=g,b={middleware:p,...g},v=ke(S,D);if(v.length>0){if(v.some(M=>r.has(M))){if(!I)throw new Error(`Duplicate middleware name '${Oe(S,D)}'`);for(const M of v){const O=t.findIndex(Ne=>Ne.name===M||Ne.aliases?.some(Fe=>Fe===M));if(O===-1)continue;const $=t[O];if($.toMiddleware!==b.toMiddleware||$.relation!==b.relation)throw new Error(`"${Oe($.name,$.aliases)}" middleware ${$.relation} "${$.toMiddleware}" middleware cannot be overridden by "${Oe(S,D)}" middleware ${b.relation} "${b.toMiddleware}" middleware.`);t.splice(O,1)}}for(const M of v)r.add(M)}t.push(b)},clone:()=>c(Dt()),use:p=>{p.applyToStack(y)},remove:p=>typeof p=="string"?o(p):i(p),removeByTag:p=>{let g=!1;const S=I=>{const{tags:D,name:b,aliases:v}=I;if(D&&D.includes(p)){const M=ke(b,v);for(const O of M)r.delete(O);return g=!0,!1}return!0};return e=e.filter(S),t=t.filter(S),g},concat:p=>{const g=c(Dt());return g.use(p),g.identifyOnResolve(n||g.identifyOnResolve()||(p.identifyOnResolve?.()??!1)),g},applyToStack:c,identify:()=>f(!0).map(p=>{const g=p.step??p.relation+" "+p.toMiddleware;return Oe(p.name,p.aliases)+" - "+g}),identifyOnResolve(p){return typeof p=="boolean"&&(n=p),n},resolve:(p,g)=>{for(const S of f().map(I=>I.middleware).reverse())p=S(p,g);return n&&console.log(y.identify()),p}};return y},Jr={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Zr={high:3,normal:2,low:1};class Hi{constructor(t){this.config=t,this.middlewareStack=Dt()}send(t,n,r){const s=typeof n!="function"?n:void 0,o=typeof n=="function"?n:r,i=s===void 0&&this.config.cacheMiddleware===!0;let c;if(i){this.handlers||(this.handlers=new WeakMap);const u=this.handlers;u.has(t.constructor)?c=u.get(t.constructor):(c=t.resolveMiddleware(this.middlewareStack,this.config,s),u.set(t.constructor,c))}else delete this.handlers,c=t.resolveMiddleware(this.middlewareStack,this.config,s);if(o)c(t).then(u=>o(null,u.output),u=>o(u)).catch(()=>{});else return c(t).then(u=>u.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}class es{constructor(){this.middlewareStack=Dt()}static classBuilder(){return new Bi}resolveMiddlewareWithContext(t,n,r,{middlewareFn:s,clientName:o,commandName:i,inputFilterSensitiveLog:c,outputFilterSensitiveLog:u,smithyContext:f,additionalContext:y,CommandCtor:p}){for(const b of s.bind(this)(p,t,n,r))this.middlewareStack.use(b);const g=t.concat(this.middlewareStack),{logger:S}=n,I={logger:S,clientName:o,commandName:i,inputFilterSensitiveLog:c,outputFilterSensitiveLog:u,[W]:{commandInstance:this,...f},...y},{requestHandler:D}=n;return g.resolve(b=>D.handle(b.request,r||{}),I)}}class Bi{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,n,r={}){return this._smithyContext={service:t,operation:n,...r},this}c(t={}){return this._additionalContext=t,this}n(t,n){return this._clientName=t,this._commandName=n,this}f(t=r=>r,n=r=>r){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=n,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){const t=this;let n;return n=class extends es{static getEndpointParameterInstructions(){return t._ep}constructor(...[r]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=r??{},t._init(this)}resolveMiddleware(r,s,o){return this.resolveMiddlewareWithContext(r,s,o,{CommandCtor:n,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}const Be="***SensitiveInformation***",mu=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},yu=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&Ft.warn($t(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){const t=e.toLowerCase();if((t==="false"||t==="true")&&Ft.warn($t(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},kt=e=>{if(e!=null){if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Ft.warn($t(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},ji=Math.ceil(2**127*(2-2**-23)),pn=e=>{const t=kt(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>ji)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},gn=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},Eu=null,mn=e=>yn(e,32),ts=e=>yn(e,16),ns=e=>yn(e,8),yn=(e,t)=>{const n=gn(e);if(n!==void 0&&zi(n,t)!==n)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return n},zi=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Wi=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},rs=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},x=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Ft.warn($t(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},Su=e=>{if(e==null)return;const t=rs(e),n=Object.entries(t).filter(([,r])=>r!=null).map(([r])=>r);if(n.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(n.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return t},wu=e=>kt(typeof e=="string"?je(e):e),Tu=null,_u=e=>pn(typeof e=="string"?je(e):e),Vi=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,je=e=>{const t=e.match(Vi);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Ru=e=>typeof e=="string"?ss(e):kt(e),Au=null,bu=null,Cu=e=>typeof e=="string"?ss(e):pn(e),ss=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},Iu=e=>gn(typeof e=="string"?je(e):e),vu=null,Ou=e=>mn(typeof e=="string"?je(e):e),Pu=e=>ts(typeof e=="string"?je(e):e),Nu=e=>ns(typeof e=="string"?je(e):e),$t=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Ft={warn:console.warn},Gi=null,En=null;function xu(e){const t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),s=e.getUTCDate(),o=e.getUTCHours(),i=e.getUTCMinutes(),c=e.getUTCSeconds(),u=s<10?`0${s}`:`${s}`,f=o<10?`0${o}`:`${o}`,y=i<10?`0${i}`:`${i}`,p=c<10?`0${c}`:`${c}`;return`${Gi[r]}, ${u} ${En[n]} ${t} ${f}:${y}:${p} GMT`}const qi=null,Du=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=qi.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[n,r,s,o,i,c,u,f]=t,y=strictParseShort(ze(r)),p=we(s,"month",1,12),g=we(o,"day",1,31);return dt(y,p,g,{hours:i,minutes:c,seconds:u,fractionalMilliseconds:f})},Ki=null,ku=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=Ki.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[n,r,s,o,i,c,u,f,y]=t,p=strictParseShort(ze(r)),g=we(s,"month",1,12),S=we(o,"day",1,31),I=dt(p,g,S,{hours:i,minutes:c,seconds:u,fractionalMilliseconds:f});return y.toUpperCase()!="Z"&&I.setTime(I.getTime()-oa(y)),I},Xi=null,Yi=null,Qi=null,$u=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=Xi.exec(e);if(t){const[n,r,s,o,i,c,u,f]=t;return dt(strictParseShort(ze(o)),Sn(s),we(r,"day",1,31),{hours:i,minutes:c,seconds:u,fractionalMilliseconds:f})}if(t=Yi.exec(e),t){const[n,r,s,o,i,c,u,f]=t;return ea(dt(Ji(o),Sn(s),we(r,"day",1,31),{hours:i,minutes:c,seconds:u,fractionalMilliseconds:f}))}if(t=Qi.exec(e),t){const[n,r,s,o,i,c,u,f]=t;return dt(strictParseShort(ze(f)),Sn(r),we(s.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:c,fractionalMilliseconds:u})}throw new TypeError("Invalid RFC-7231 date-time value")},Fu=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=strictParseDouble(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},dt=(e,t,n,r)=>{const s=t-1;return na(e,s,n),new Date(Date.UTC(e,s,n,we(r.hours,"hour",0,23),we(r.minutes,"minute",0,59),we(r.seconds,"seconds",0,60),sa(r.fractionalMilliseconds)))},Ji=e=>{const t=new Date().getUTCFullYear(),n=Math.floor(t/100)*100+strictParseShort(ze(e));return n<t?n+100:n},Zi=null,ea=e=>e.getTime()-new Date().getTime()>Zi?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Sn=e=>{const t=En.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},ta=null,na=(e,t,n)=>{let r=ta[t];if(t===1&&ra(e)&&(r=29),n>r)throw new TypeError(`Invalid day for ${En[t]} in ${e}: ${n}`)},ra=e=>e%4===0&&(e%100!==0||e%400===0),we=(e,t,n,r)=>{const s=strictParseByte(ze(e));if(s<n||s>r)throw new TypeError(`${t} must be between ${n} and ${r}, inclusive`);return s},sa=e=>e==null?0:strictParseFloat32("0."+e)*1e3,oa=e=>{const t=e[0];let n=1;if(t=="+")n=1;else if(t=="-")n=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);const r=Number(e.substring(1,3)),s=Number(e.substring(4,6));return n*(r*60+s)*60*1e3},ze=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};class We extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;const n=t;return We.prototype.isPrototypeOf(n)||Boolean(n.$fault)&&Boolean(n.$metadata)&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;const n=t;return this===We?We.isInstance(t):We.isInstance(t)?n.name&&this.name?this.prototype.isPrototypeOf(t)||n.name===this.name:this.prototype.isPrototypeOf(t):!1}}const se=(e,t={})=>{Object.entries(t).filter(([,r])=>r!==void 0).forEach(([r,s])=>{(e[r]==null||e[r]==="")&&(e[r]=s)});const n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},ia=({output:e,parsedBody:t,exceptionCtor:n,errorCode:r})=>{const s=ca(e),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new n({name:t?.code||t?.Code||r||o||"UnknownError",$fault:"client",$metadata:s});throw se(i,t)},aa=e=>({output:t,parsedBody:n,errorCode:r})=>{ia({output:t,parsedBody:n,exceptionCtor:e,errorCode:r})},ca=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),da=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};let os=!1;const ua=e=>{e&&!os&&parseInt(e.substring(1,e.indexOf(".")))<16&&(os=!0)},la=e=>{const t=[];for(const n in C){const r=C[n];e[r]!==void 0&&t.push({algorithmId:()=>r,checksumConstructor:()=>e[r]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(n){this._checksumAlgorithms.push(n)},checksumAlgorithms(){return this._checksumAlgorithms}}},fa=e=>{const t={};return e.checksumAlgorithms().forEach(n=>{t[n.algorithmId()]=n.checksumConstructor()}),t},ha=e=>{let t=e.retryStrategy;return{setRetryStrategy(n){t=n},retryStrategy(){return t}}},pa=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},ga=e=>({...la(e),...ha(e)}),Mu=null,ma=e=>({...fa(e),...pa(e)}),Ve=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};Ve.from=e=>e&&typeof e=="object"&&(e instanceof Ve||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?Ve(String(e)):Ve(JSON.stringify(e)),Ve.fromObject=Ve.from;class is{trace(){}debug(){}info(){}warn(){}error(){}}function J(e,t,n){let r,s,o;if(typeof t>"u"&&typeof n>"u")r={},o=e;else{if(r=e,typeof t=="function")return s=t,o=n,ya(r,s,o);o=t}for(const i of Object.keys(o)){if(!Array.isArray(o[i])){r[i]=o[i];continue}as(r,null,o,i)}return r}const Uu=e=>{const t={};for(const[n,r]of Object.entries(e||{}))t[n]=[,r];return t},Z=(e,t)=>{const n={};for(const r in t)as(n,e,t,r);return n},ya=(e,t,n)=>J(e,Object.entries(n).reduce((r,[s,o])=>(Array.isArray(o)?r[s]=o:typeof o=="function"?r[s]=[t,o()]:r[s]=[t,o],r),{})),as=(e,t,n,r)=>{if(t!==null){let i=n[r];typeof i=="function"&&(i=[,i]);const[c=Ea,u=Sa,f=r]=i;(typeof c=="function"&&c(t[f])||typeof c!="function"&&!!c)&&(e[r]=u(t[f]));return}let[s,o]=n[r];if(typeof o=="function"){let i;const c=s===void 0&&(i=o())!=null,u=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;c?e[r]=i:u&&(e[r]=o())}else{const i=s===void 0&&o!=null,c=typeof s=="function"&&!!s(o)||typeof s!="function"&&!!s;(i||c)&&(e[r]=o)}},Ea=e=>e!=null,Sa=e=>e,wn=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(wn);if(typeof e=="object"){const t={};for(const n of Object.keys(e))e[n]!=null&&(t[n]=wn(e[n]));return t}return e};var Tn=w(2203);const wa=e=>e?.body instanceof Tn.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream,Ta=e=>(t,n)=>async r=>{let s=await e.retryStrategy();const o=await e.maxAttempts();if(_a(s)){s=s;let i=await s.acquireInitialRetryToken(n.partition_id),c=new Error,u=0,f=0;const{request:y}=r,p=Q.isInstance(y);for(p&&(y.headers[Vr]=(0,Kr.A)());;)try{p&&(y.headers[Gr]=`attempt=${u+1}; max=${o}`);const{response:g,output:S}=await t(r);return s.recordSuccess(i),S.$metadata.attempts=u+1,S.$metadata.totalRetryDelay=f,{response:g,output:S}}catch(g){const S=Ra(g);if(c=Xr(g),p&&wa(y))throw(n.logger instanceof is?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),c;try{i=await s.refreshRetryTokenForRetry(i,S)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=u+1,c.$metadata.totalRetryDelay=f,c}u=i.getRetryCount();const I=i.getRetryDelay();f+=I,await new Promise(D=>setTimeout(D,I))}}else return s=s,s?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,r)},_a=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Ra=e=>{const t={error:e,errorType:Aa(e)},n=Ia(e.$response);return n&&(t.retryAfterHint=n),t},Aa=e=>(0,Ae.Qb)(e)?"THROTTLING":(0,Ae.bV)(e)?"TRANSIENT":(0,Ae.GQ)(e)?"SERVER_ERROR":"CLIENT_ERROR",ba={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Ca=e=>({applyToStack:t=>{t.add(Ta(e),ba)}}),Ia=e=>{if(!Je.isInstance(e))return;const t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;const n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)};function va(e,t,n){return e.$source||(e.$source={}),e.$source[t]=n,e}var Pe=w(73828),Mt=w(21651),$e=w(86170);const ut=e=>{const t=(0,$e.s)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},Ge=e=>typeof e=="string"?ut(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),Oa=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,$e.Q)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},Pa="X-Amz-Algorithm",Na="X-Amz-Credential",cs="X-Amz-Date",xa="X-Amz-SignedHeaders",Da="X-Amz-Expires",ds="X-Amz-Signature",us="X-Amz-Security-Token",Lu="X-Amz-Region-Set",ls="authorization",fs=cs.toLowerCase(),ka=[ls,fs,"date"],$a=ds.toLowerCase(),_n="x-amz-content-sha256",Fa=us.toLowerCase(),Bu="host",Ma={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Ua=/^proxy-/,La=/^sec-/,ju=null,Rn="AWS4-HMAC-SHA256",zu="AWS4-ECDSA-P256-SHA256",Ha="AWS4-HMAC-SHA256-PAYLOAD",Ba="UNSIGNED-PAYLOAD",ja=50,hs="aws4_request",za=60*60*24*7,qe={},Ut=[],An=(e,t,n)=>`${e}/${t}/${n}/${hs}`,Wa=async(e,t,n,r,s)=>{const o=await ps(e,t.secretAccessKey,t.accessKeyId),i=`${n}:${r}:${s}:${(0,Pe.n)(o)}:${t.sessionToken}`;if(i in qe)return qe[i];for(Ut.push(i);Ut.length>ja;)delete qe[Ut.shift()];let c=`AWS4${t.secretAccessKey}`;for(const u of[n,r,s,hs])c=await ps(e,c,u);return qe[i]=c},Wu=()=>{Ut.length=0,Object.keys(qe).forEach(e=>{delete qe[e]})},ps=(e,t,n)=>{const r=new e(t);return r.update(Ge(n)),r.digest()},gs=({headers:e},t,n)=>{const r={};for(const s of Object.keys(e).sort()){if(e[s]==null)continue;const o=s.toLowerCase();(o in Ma||t?.has(o)||Ua.test(o)||La.test(o))&&(!n||n&&!n.has(o))||(r[o]=e[s].trim().replace(/\s+/g," "))}return r},Va=({query:e={}})=>{const t=[],n={};for(const r of Object.keys(e)){if(r.toLowerCase()===$a)continue;const s=(0,Mt.o)(r);t.push(s);const o=e[r];typeof o=="string"?n[s]=`${s}=${(0,Mt.o)(o)}`:Array.isArray(o)&&(n[s]=o.slice(0).reduce((i,c)=>i.concat([`${s}=${(0,Mt.o)(c)}`]),[]).sort().join("&"))}return t.sort().map(r=>n[r]).filter(r=>r).join("&")};var Ga=w(57487);const bn=async({headers:e,body:t},n)=>{for(const r of Object.keys(e))if(r.toLowerCase()===_n)return e[r];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||(0,Ga.m)(t)){const r=new n;return r.update(Ge(t)),(0,Pe.n)(await r.digest())}return Ba};class qa{format(t){const n=[];for(const o of Object.keys(t)){const i=ut(o);n.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[o]))}const r=new Uint8Array(n.reduce((o,i)=>o+i.byteLength,0));let s=0;for(const o of n)r.set(o,s),s+=o.byteLength;return r}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,t.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,t.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":const o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);const i=new Uint8Array(o.buffer);return i.set(t.value,3),i;case"string":const c=ut(t.value),u=new DataView(new ArrayBuffer(3+c.byteLength));u.setUint8(0,7),u.setUint16(1,c.byteLength,!1);const f=new Uint8Array(u.buffer);return f.set(c,3),f;case"timestamp":const y=new Uint8Array(9);return y[0]=8,y.set(Cn.fromNumber(t.value.valueOf()).bytes,1),y;case"uuid":if(!Ka.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const p=new Uint8Array(17);return p[0]=9,p.set((0,Pe.a)(t.value.replace(/\-/g,"")),1),p}}}var ms;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(ms||(ms={}));const Ka=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class Cn{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(t));r>-1&&s>0;r--,s/=256)n[r]=s;return t<0&&ys(n),new Cn(n)}valueOf(){const t=this.bytes.slice(0),n=t[0]&128;return n&&ys(t),parseInt((0,Pe.n)(t),16)*(n?-1:1)}toString(){return String(this.valueOf())}}function ys(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}const Xa=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1},Vu=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return t[n]},Gu=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))e===n.toLowerCase()&&delete t[n]},Ya=(e,t={})=>{const{headers:n,query:r={}}=Q.clone(e);for(const s of Object.keys(n)){const o=s.toLowerCase();(o.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(o)||t.hoistableHeaders?.has(o))&&(r[s]=n[s],delete n[s])}return{...e,headers:n,query:r}},Es=e=>{e=Q.clone(e);for(const t of Object.keys(e.headers))ka.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},Qa=e=>Ja(e).toISOString().replace(/\.\d{3}Z$/,"Z"),Ja=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class Ss{constructor({applyChecksum:t,credentials:n,region:r,service:s,sha256:o,uriEscapePath:i=!0}){this.headerFormatter=new qa,this.service=s,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=Te(r),this.credentialProvider=Te(n)}async presign(t,n={}){const{signingDate:r=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:c,hoistableHeaders:u,signingRegion:f,signingService:y}=n,p=await this.credentialProvider();this.validateResolvedCredentials(p);const g=f??await this.regionProvider(),{longDate:S,shortDate:I}=Lt(r);if(s>za)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const D=An(I,g,y??this.service),b=Ya(Es(t),{unhoistableHeaders:i,hoistableHeaders:u});p.sessionToken&&(b.query[us]=p.sessionToken),b.query[Pa]=Rn,b.query[Na]=`${p.accessKeyId}/${D}`,b.query[cs]=S,b.query[Da]=s.toString(10);const v=gs(b,o,c);return b.query[xa]=ws(v),b.query[ds]=await this.getSignature(S,D,this.getSigningKey(p,g,I,y),this.createCanonicalRequest(b,v,await bn(t,this.sha256))),b}async sign(t,n){return typeof t=="string"?this.signString(t,n):t.headers&&t.payload?this.signEvent(t,n):t.message?this.signMessage(t,n):this.signRequest(t,n)}async signEvent({headers:t,payload:n},{signingDate:r=new Date,priorSignature:s,signingRegion:o,signingService:i}){const c=o??await this.regionProvider(),{shortDate:u,longDate:f}=Lt(r),y=An(u,c,i??this.service),p=await bn({headers:{},body:n},this.sha256),g=new this.sha256;g.update(t);const S=(0,Pe.n)(await g.digest()),I=[Ha,f,y,s,S,p].join(`
`);return this.signString(I,{signingDate:r,signingRegion:c,signingService:i})}async signMessage(t,{signingDate:n=new Date,signingRegion:r,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:n,signingRegion:r,signingService:s,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:n=new Date,signingRegion:r,signingService:s}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const i=r??await this.regionProvider(),{shortDate:c}=Lt(n),u=new this.sha256(await this.getSigningKey(o,i,c,s));return u.update(Ge(t)),(0,Pe.n)(await u.digest())}async signRequest(t,{signingDate:n=new Date,signableHeaders:r,unsignableHeaders:s,signingRegion:o,signingService:i}={}){const c=await this.credentialProvider();this.validateResolvedCredentials(c);const u=o??await this.regionProvider(),f=Es(t),{longDate:y,shortDate:p}=Lt(n),g=An(p,u,i??this.service);f.headers[fs]=y,c.sessionToken&&(f.headers[Fa]=c.sessionToken);const S=await bn(f,this.sha256);!Xa(_n,f.headers)&&this.applyChecksum&&(f.headers[_n]=S);const I=gs(f,s,r),D=await this.getSignature(y,g,this.getSigningKey(c,u,p,i),this.createCanonicalRequest(f,I,S));return f.headers[ls]=`${Rn} Credential=${c.accessKeyId}/${g}, SignedHeaders=${ws(I)}, Signature=${D}`,f}createCanonicalRequest(t,n,r){const s=Object.keys(n).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Va(t)}
${s.map(o=>`${o}:${n[o]}`).join(`
`)}

${s.join(";")}
${r}`}async createStringToSign(t,n,r){const s=new this.sha256;s.update(Ge(r));const o=await s.digest();return`${Rn}
${t}
${n}
${(0,Pe.n)(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const n=[];for(const o of t.split("/"))o?.length!==0&&o!=="."&&(o===".."?n.pop():n.push(o));const r=`${t?.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&t?.endsWith("/")?"/":""}`;return(0,Mt.o)(r).replace(/%2F/g,"/")}return t}async getSignature(t,n,r,s){const o=await this.createStringToSign(t,n,s),i=new this.sha256(await r);return i.update(Ge(o)),(0,Pe.n)(await i.digest())}getSigningKey(t,n,r,s){return Wa(this.sha256,t,r,n,s||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const Lt=e=>{const t=Qa(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},ws=e=>Object.keys(e).sort().join(";"),Za=e=>{let t=!1,n;e.credentials&&(t=!0,n=vt(e.credentials,Ct,It)),n||(e.credentialDefaultProvider?n=Ce(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("`credentials` is missing")});const r=async()=>n({callerClientConfig:e}),{signingEscapePath:s=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e;let c;return e.signer?c=Ce(e.signer):e.regionInfoProvider?c=()=>Ce(e.region)().then(async u=>[await e.regionInfoProvider(u,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},u]).then(([u,f])=>{const{signingRegion:y,signingService:p}=u;e.signingRegion=e.signingRegion||y||f,e.signingName=e.signingName||p||e.serviceId;const g={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:s},S=e.signerConstructor||Ss;return new S(g)}):c=async u=>{u=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Ce(e.region)(),properties:{}},u);const f=u.signingRegion,y=u.signingName;e.signingRegion=e.signingRegion||f,e.signingName=e.signingName||y||e.serviceId;const p={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:s},g=e.signerConstructor||Ss;return new g(p)},{...e,systemClockOffset:o,signingEscapePath:s,credentials:t?async()=>r().then(u=>va(u,"CREDENTIALS_CODE","e")):r,signer:c}},qu=null,ec=async(e,t,n)=>({operation:Ze(t).operation,region:await Te(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function tc(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,n)=>({signingProperties:{config:t,context:n}})}}function In(e){return{schemeId:"smithy.api#noAuth"}}const nc=e=>{const t=[];switch(e.operation){case"CreateToken":{t.push(In(e));break}case"RegisterClient":{t.push(In(e));break}case"StartDeviceAuthorization":{t.push(In(e));break}default:t.push(tc(e))}return t},rc=e=>({...Za(e)}),sc=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),oc={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},ic={rE:"3.758.0"},Ts={warningEmitted:!1},ac=e=>{e&&!Ts.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(Ts.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))};function cc(e,t,n){return e.$source||(e.$source={}),e.$source[t]=n,e}class Ht extends Error{constructor(t,n=!0){let r,s=!0;typeof n=="boolean"?(r=void 0,s=n):n!=null&&typeof n=="object"&&(r=n.logger,s=n.tryNextLink??!0),super(t),this.name="ProviderError",this.tryNextLink=s,Object.setPrototypeOf(this,Ht.prototype),r?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${t}`)}static from(t,n=!0){return Object.assign(new this(t.message,n),t)}}class vn extends Ht{constructor(t,n=!0){super(t,n),this.name="CredentialsProviderError",Object.setPrototypeOf(this,vn.prototype)}}class _s extends Ht{constructor(t,n=!0){super(t,n),this.name="TokenProviderError",Object.setPrototypeOf(this,_s.prototype)}}const Ku=(...e)=>async()=>{if(e.length===0)throw new ProviderError("No providers in chain");let t;for(const n of e)try{return await n()}catch(r){if(t=r,r?.tryNextLink)continue;throw r}throw t},Rs="AWS_ACCESS_KEY_ID",As="AWS_SECRET_ACCESS_KEY",dc="AWS_SESSION_TOKEN",uc="AWS_CREDENTIAL_EXPIRATION",lc="AWS_CREDENTIAL_SCOPE",fc="AWS_ACCOUNT_ID",hc=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");const t=process.env[Rs],n=process.env[As],r=process.env[dc],s=process.env[uc],o=process.env[lc],i=process.env[fc];if(t&&n){const c={accessKeyId:t,secretAccessKey:n,...r&&{sessionToken:r},...s&&{expiration:new Date(s)},...o&&{credentialScope:o},...i&&{accountId:i}};return cc(c,"CREDENTIALS_ENV_VARS","g"),c}throw new vn("Unable to find environment variable credentials.",{logger:e?.logger})};class lt extends Error{constructor(t,n=!0){let r,s=!0;typeof n=="boolean"?(r=void 0,s=n):n!=null&&typeof n=="object"&&(r=n.logger,s=n.tryNextLink??!0),super(t),this.name="ProviderError",this.tryNextLink=s,Object.setPrototypeOf(this,lt.prototype),r?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${t}`)}static from(t,n=!0){return Object.assign(new this(t.message,n),t)}}class Ke extends lt{constructor(t,n=!0){super(t,n),this.name="CredentialsProviderError",Object.setPrototypeOf(this,Ke.prototype)}}class bs extends lt{constructor(t,n=!0){super(t,n),this.name="TokenProviderError",Object.setPrototypeOf(this,bs.prototype)}}const Cs=(...e)=>async()=>{if(e.length===0)throw new lt("No providers in chain");let t;for(const n of e)try{return await n()}catch(r){if(t=r,r?.tryNextLink)continue;throw r}throw t},pc=(e,t,n)=>{let r,s,o,i=!1;const c=async()=>{s||(s=e());try{r=await s,o=!0,i=!1}finally{s=void 0}return r};return t===void 0?async u=>((!o||u?.forceRefresh)&&(r=await c()),r):async u=>((!o||u?.forceRefresh)&&(r=await c()),i?r:n&&!n(r)?(i=!0,r):(t(r)&&await c(),r))},On={},gc=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Xu=()=>{const{HOME:e,USERPROFILE:t,HOMEPATH:n,HOMEDRIVE:r=`C:${sep}`}=process.env;if(e)return e;if(t)return t;if(n)return`${r}${n}`;const s=gc();return On[s]||(On[s]=homedir()),On[s]},Is="AWS_PROFILE",mc="default",Yu=e=>e.profile||process.env[Is]||mc,Qu=e=>{const n=createHash("sha1").update(e).digest("hex");return join(getHomeDir(),".aws","sso","cache",`${n}.json`)},{readFile:yc}=Le.promises,Ju=async e=>{const t=getSSOTokenFilepath(e),n=await yc(t,"utf8");return JSON.parse(n)};var vs;(function(e){e.HEADER="header",e.QUERY="query"})(vs||(vs={}));var Os;(function(e){e.HEADER="header",e.QUERY="query"})(Os||(Os={}));var Ps;(function(e){e.HTTP="http",e.HTTPS="https"})(Ps||(Ps={}));var Bt;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Bt||(Bt={}));const Zu=e=>{const t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>Bt.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>Bt.MD5,checksumConstructor:()=>e.md5}),{_checksumAlgorithms:t,addChecksumAlgorithm(n){this._checksumAlgorithms.push(n)},checksumAlgorithms(){return this._checksumAlgorithms}}},el=e=>{const t={};return e.checksumAlgorithms().forEach(n=>{t[n.algorithmId()]=n.checksumConstructor()}),t},tl=e=>({...getChecksumConfiguration(e)}),nl=e=>({...resolveChecksumRuntimeConfig(e)});var Ns;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Ns||(Ns={}));var xs;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(xs||(xs={}));var Ds;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Ds||(Ds={}));const rl=e=>Object.entries(e).filter(([t])=>{const n=t.indexOf(CONFIG_PREFIX_SEPARATOR);return n===-1?!1:Object.values(IniSectionType).includes(t.substring(0,n))}).reduce((t,[n,r])=>{const s=n.indexOf(CONFIG_PREFIX_SEPARATOR),o=n.substring(0,s)===IniSectionType.PROFILE?n.substring(s+1):n;return t[o]=r,t},{...e.default&&{default:e.default}}),Ec="AWS_CONFIG_FILE",sl=()=>process.env[Ec]||join(getHomeDir(),".aws","config"),Sc="AWS_SHARED_CREDENTIALS_FILE",ol=()=>process.env[Sc]||join(getHomeDir(),".aws","credentials"),wc=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,Tc=null,il=e=>{const t={};let n,r;for(const s of e.split(/\r?\n/)){const o=s.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){n=void 0,r=void 0;const c=o.substring(1,o.length-1),u=wc.exec(c);if(u){const[,f,,y]=u;Object.values(IniSectionType).includes(f)&&(n=[f,y].join(CONFIG_PREFIX_SEPARATOR))}else n=c;if(Tc.includes(c))throw new Error(`Found invalid profile name "${c}"`)}else if(n){const c=o.indexOf("=");if(![0,-1].includes(c)){const[u,f]=[o.substring(0,c).trim(),o.substring(c+1).trim()];if(f==="")r=u;else{r&&s.trimStart()===s&&(r=void 0),t[n]=t[n]||{};const y=r?[r,u].join(CONFIG_PREFIX_SEPARATOR):u;t[n][y]=f}}}}return t},{readFile:_c}=Le.promises,Pn={},al=(e,t)=>((!Pn[e]||t?.ignoreCache)&&(Pn[e]=_c(e,"utf8")),Pn[e]),ks=()=>({}),cl=".",dl=async(e={})=>{const{filepath:t=getCredentialsFilepath(),configFilepath:n=getConfigFilepath()}=e,r=getHomeDir(),s="~/";let o=t;t.startsWith(s)&&(o=join(r,t.slice(2)));let i=n;n.startsWith(s)&&(i=join(r,n.slice(2)));const c=await Promise.all([slurpFile(i,{ignoreCache:e.ignoreCache}).then(parseIni).then(getConfigData).catch(ks),slurpFile(o,{ignoreCache:e.ignoreCache}).then(parseIni).catch(ks)]);return{configFile:c[0],credentialsFile:c[1]}},ul=e=>Object.entries(e).filter(([t])=>t.startsWith(IniSectionType.SSO_SESSION+CONFIG_PREFIX_SEPARATOR)).reduce((t,[n,r])=>({...t,[n.substring(n.indexOf(CONFIG_PREFIX_SEPARATOR)+1)]:r}),{}),Rc=()=>({}),ll=async(e={})=>slurpFile(e.configFilepath??getConfigFilepath()).then(parseIni).then(getSsoSessionData).catch(Rc),fl=async e=>{const t=await loadSharedConfigFiles(e);return mergeConfigFiles(t.configFile,t.credentialsFile)},$s="AWS_EC2_METADATA_DISABLED",Ac=async e=>{const{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:n,fromContainerMetadata:r,fromInstanceMetadata:s}=await w.e(172).then(w.bind(w,172));if(process.env[n]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");const{fromHttp:o}=await w.e(339).then(w.bind(w,41339));return Cs(o(e),r(e))}return process.env[$s]&&process.env[$s]!=="false"?async()=>{throw new Ke("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(e))};let Fs=!1;const bc=(e={})=>pc(Cs(async()=>{if(e.profile??process.env[Is])throw process.env[Rs]&&process.env[As]&&(Fs||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn:console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),Fs=!0)),new Ke("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),hc(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");const{ssoStartUrl:t,ssoAccountId:n,ssoRegion:r,ssoRoleName:s,ssoSession:o}=e;if(!t&&!n&&!r&&!s&&!o)throw new Ke("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});const{fromSSO:i}=await w.e(117).then(w.bind(w,27117));return i(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");const{fromIni:t}=await w.e(720).then(w.bind(w,30720));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");const{fromProcess:t}=await w.e(96).then(w.bind(w,95096));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");const{fromTokenFile:t}=await w.e(804).then(w.bind(w,38042));return t(e)()},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await Ac(e))()),async()=>{throw new Ke("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}),Ic,Cc),Cc=e=>e?.expiration!==void 0,Ic=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;var Nn=w(932);const vc={isCrtAvailable:!1},Oc=()=>vc.isCrtAvailable?["md/crt-avail"]:null,Pc=({serviceId:e,clientVersion:t})=>async n=>{const r=[["aws-sdk-js",t],["ua","2.1"],[`os/${(0,an.platform)()}`,(0,an.release)()],["lang/js"],["md/nodejs",`${Nn.versions.node}`]],s=Oc();s&&r.push(s),e&&r.push([`api/${e}`,t]),Nn.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${Nn.env.AWS_EXECUTION_ENV}`]);const o=await n?.userAgentAppId?.();return o?[...r,[`app/${o}`]]:[...r]},hl=null,Nc="AWS_SDK_UA_APP_ID",xc="sdk_ua_app_id",Dc="sdk-ua-app-id",kc={environmentVariableSelector:e=>e[Nc],configFileSelector:e=>e[xc]??e[Dc],default:rt};var $c=w(20181);class Fc{constructor(t,n){this.algorithmIdentifier=t,this.secret=n,this.reset()}update(t,n){this.hash.update(Ge(Ms(t,n)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,xr.createHmac)(this.algorithmIdentifier,Ms(this.secret)):(0,xr.createHash)(this.algorithmIdentifier)}}function Ms(e,t){return $c.Buffer.isBuffer(e)?e:typeof e=="string"?(0,$e.s)(e,t):ArrayBuffer.isView(e)?(0,$e.Q)(e.buffer,e.byteOffset,e.byteLength):(0,$e.Q)(e)}var Mc=w(42445),xn=w(58611),Dn=w(65692);const Uc=["ECONNRESET","EPIPE","ETIMEDOUT"],Lc=e=>{const t={};for(const n of Object.keys(e)){const r=e[n];t[n]=Array.isArray(r)?r.join(","):r}return t},ae={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},Us=1e3,Hc=(e,t,n=0)=>{if(!n)return-1;const r=s=>{const o=ae.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${n} ms`),{name:"TimeoutError"}))},n-s),i=c=>{c?.connecting?c.on("connect",()=>{ae.clearTimeout(o)}):ae.clearTimeout(o)};e.socket?i(e.socket):e.on("socket",i)};return n<2e3?(r(0),0):ae.setTimeout(r.bind(null,Us),Us)},Bc=3e3,jc=(e,{keepAlive:t,keepAliveMsecs:n},r=Bc)=>{if(t!==!0)return-1;const s=()=>{e.socket?e.socket.setKeepAlive(t,n||0):e.on("socket",o=>{o.setKeepAlive(t,n||0)})};return r===0?(s(),0):ae.setTimeout(s,r)},Ls=3e3,zc=(e,t,n=Gc)=>{const r=s=>{const o=n-s,i=()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${n} ms`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(o,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(o,i)};return 0<n&&n<6e3?(r(0),0):ae.setTimeout(r.bind(null,n===0?0:Ls),Ls)},Hs=6e3;async function Wc(e,t,n=Hs){const r=t.headers??{},s=r.Expect||r.expect;let o=-1,i=!0;s==="100-continue"&&(i=await Promise.race([new Promise(c=>{o=Number(ae.setTimeout(()=>c(!0),Math.max(Hs,n)))}),new Promise(c=>{e.on("continue",()=>{ae.clearTimeout(o),c(!0)}),e.on("response",()=>{ae.clearTimeout(o),c(!1)}),e.on("error",()=>{ae.clearTimeout(o),c(!1)})})])),i&&Vc(e,t.body)}function Vc(e,t){if(t instanceof Tn.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}const n=t;if(typeof n=="object"&&n.buffer&&typeof n.byteOffset=="number"&&typeof n.byteLength=="number"){e.end(Buffer.from(n.buffer,n.byteOffset,n.byteLength));return}e.end(Buffer.from(t));return}e.end()}const Gc=0;class jt{static create(t){return typeof t?.handle=="function"?t:new jt(t)}static checkSocketUsage(t,n,r=console){const{sockets:s,requests:o,maxSockets:i}=t;if(typeof i!="number"||i===1/0)return n;const c=15e3;if(Date.now()-c<n)return n;if(s&&o)for(const u in s){const f=s[u]?.length??0,y=o[u]?.length??0;if(f>=i&&y>=2*i)return r?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${f} and ${y} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return n}constructor(t){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((n,r)=>{typeof t=="function"?t().then(s=>{n(this.resolveDefaultConfig(s))}).catch(r):n(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){const{requestTimeout:n,connectionTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:o,httpAgent:i,httpsAgent:c}=t||{},u=!0,f=50;return{connectionTimeout:r,requestTimeout:n??s,socketAcquisitionWarningTimeout:o,httpAgent:(()=>i instanceof xn.Agent||typeof i?.destroy=="function"?i:new xn.Agent({keepAlive:u,maxSockets:f,...i}))(),httpsAgent:(()=>c instanceof Dn.Agent||typeof c?.destroy=="function"?c:new Dn.Agent({keepAlive:u,maxSockets:f,...c}))(),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:n}={}){return this.config||(this.config=await this.configProvider),new Promise((r,s)=>{let o;const i=[],c=async O=>{await o,i.forEach(ae.clearTimeout),r(O)},u=async O=>{await o,i.forEach(ae.clearTimeout),s(O)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(n?.aborted){const O=new Error("Request aborted");O.name="AbortError",u(O);return}const f=t.protocol==="https:",y=f?this.config.httpsAgent:this.config.httpAgent;i.push(ae.setTimeout(()=>{this.socketWarningTimestamp=jt.checkSocketUsage(y,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3)));const p=(0,Mc.G)(t.query||{});let g;if(t.username!=null||t.password!=null){const O=t.username??"",$=t.password??"";g=`${O}:${$}`}let S=t.path;p&&(S+=`?${p}`),t.fragment&&(S+=`#${t.fragment}`);let I=t.hostname??"";I[0]==="["&&I.endsWith("]")?I=t.hostname.slice(1,-1):I=t.hostname;const D={headers:t.headers,host:I,method:t.method,path:S,port:t.port,agent:y,auth:g},v=(f?Dn.request:xn.request)(D,O=>{const $=new Je({statusCode:O.statusCode||-1,reason:O.statusMessage,headers:Lc(O.headers),body:O});c({response:$})});if(v.on("error",O=>{Uc.includes(O.code)?u(Object.assign(O,{name:"TimeoutError"})):u(O)}),n){const O=()=>{v.destroy();const $=new Error("Request aborted");$.name="AbortError",u($)};if(typeof n.addEventListener=="function"){const $=n;$.addEventListener("abort",O,{once:!0}),v.once("close",()=>$.removeEventListener("abort",O))}else n.onabort=O}i.push(Hc(v,u,this.config.connectionTimeout)),i.push(zc(v,u,this.config.requestTimeout));const M=D.agent;typeof M=="object"&&"keepAlive"in M&&i.push(jc(v,{keepAlive:M.keepAlive,keepAliveMsecs:M.keepAliveMsecs})),o=Wc(v,t,this.config.requestTimeout).catch(O=>(i.forEach(ae.clearTimeout),s(O)))})}updateHttpClientConfig(t,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>({...r,[t]:n}))}httpHandlerConfigs(){return this.config??{}}}var pl=w(85675);class gl{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(n=>n!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(const n of this.sessions)n===t&&(n.destroyed||n.destroy())}}class ml{constructor(t){if(this.sessionCache=new Map,this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(t,n){const r=this.getUrlString(t),s=this.sessionCache.get(r);if(s){const u=s.poll();if(u&&!this.config.disableConcurrency)return u}const o=http2.connect(r);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},u=>{if(u)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),o.unref();const i=()=>{o.destroy(),this.deleteSession(r,o)};o.on("goaway",i),o.on("error",i),o.on("frameError",i),o.on("close",()=>this.deleteSession(r,o)),n.requestTimeout&&o.setTimeout(n.requestTimeout,i);const c=this.sessionCache.get(r)||new NodeHttp2ConnectionPool;return c.offerLast(o),this.sessionCache.set(r,c),o}deleteSession(t,n){const r=this.sessionCache.get(t);!r||!r.contains(n)||(r.remove(n),this.sessionCache.set(t,r))}release(t,n){const r=this.getUrlString(t);this.sessionCache.get(r)?.offerLast(n)}destroy(){for(const[t,n]of this.sessionCache){for(const r of n)r.destroyed||r.destroy(),n.remove(r);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}}class Bs{static create(t){return typeof t?.handle=="function"?t:new Bs(t)}constructor(t){this.metadata={handlerProtocol:"h2"},this.connectionManager=new NodeHttp2ConnectionManager({}),this.configProvider=new Promise((n,r)=>{typeof t=="function"?t().then(s=>{n(s||{})}).catch(r):n(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));const{requestTimeout:r,disableConcurrentStreams:s}=this.config;return new Promise((o,i)=>{let c=!1,u;const f=async q=>{await u,o(q)},y=async q=>{await u,i(q)};if(n?.aborted){c=!0;const q=new Error("Request aborted");q.name="AbortError",y(q);return}const{hostname:p,method:g,port:S,protocol:I,query:D}=t;let b="";if(t.username!=null||t.password!=null){const q=t.username??"",ye=t.password??"";b=`${q}:${ye}@`}const v=`${I}//${b}${p}${S?`:${S}`:""}`,M={destination:new URL(v)},O=this.connectionManager.lease(M,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:s||!1}),$=q=>{s&&this.destroySession(O),c=!0,y(q)},Ne=buildQueryString(D||{});let Fe=t.path;Ne&&(Fe+=`?${Ne}`),t.fragment&&(Fe+=`#${t.fragment}`);const pe=O.request({...t.headers,[constants.HTTP2_HEADER_PATH]:Fe,[constants.HTTP2_HEADER_METHOD]:g});if(O.ref(),pe.on("response",q=>{const ye=new HttpResponse({statusCode:q[":status"]||-1,headers:getTransformedHeaders(q),body:pe});c=!0,f({response:ye}),s&&(O.close(),this.connectionManager.deleteSession(v,O))}),r&&pe.setTimeout(r,()=>{pe.close();const q=new Error(`Stream timed out because of no activity for ${r} ms`);q.name="TimeoutError",$(q)}),n){const q=()=>{pe.close();const ye=new Error("Request aborted");ye.name="AbortError",$(ye)};if(typeof n.addEventListener=="function"){const ye=n;ye.addEventListener("abort",q,{once:!0}),pe.once("close",()=>ye.removeEventListener("abort",q))}else n.onabort=q}pe.on("frameError",(q,ye,Qd)=>{$(new Error(`Frame type id ${q} in stream id ${Qd} has failed with code ${ye}.`))}),pe.on("error",$),pe.on("aborted",()=>{$(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${pe.rstCode}.`))}),pe.on("close",()=>{O.unref(),s&&O.destroy(),c||$(new Error("Unexpected error: http2 request did not get a response"))}),u=writeRequestBody(pe,t,r)})}updateHttpClientConfig(t,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>({...r,[t]:n}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}}class qc extends Tn.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,n,r){this.bufferedBytes.push(t),r()}}const Kc=e=>Xc(e)?Yc(e):new Promise((t,n)=>{const r=new qc;e.pipe(r),e.on("error",s=>{r.end(),n(s)}),r.on("error",n),r.on("finish",function(){const s=new Uint8Array(Buffer.concat(this.bufferedBytes));t(s)})}),Xc=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function Yc(e){const t=[],n=e.getReader();let r=!1,s=0;for(;!r;){const{done:c,value:u}=await n.read();u&&(t.push(u),s+=u.length),r=c}const o=new Uint8Array(s);let i=0;for(const c of t)o.set(c,i),i+=c.length;return o}const Qc=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,Le.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Le.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)},js=e=>new Date(Date.now()+e),zs=e=>Je.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,Jc=(e,t)=>Math.abs(js(t).getTime()-e)>=3e5,Ws=(e,t)=>{const n=Date.parse(e);return Jc(n,t)?n-Date.now():t},ft=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Zc=async e=>{const t=ft("context",e.context),n=ft("config",e.config),r=t.endpointV2?.properties?.authSchemes?.[0],o=await ft("signer",n.signer)(r),i=e?.signingRegion,c=e?.signingRegionSet,u=e?.signingName;return{config:n,signer:o,signingRegion:i,signingRegionSet:c,signingName:u}};class ed{async sign(t,n,r){if(!Q.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await Zc(r),{config:o,signer:i}=s;let{signingRegion:c,signingName:u}=s;const f=r.context;if(f?.authSchemes?.length??0>1){const[p,g]=f.authSchemes;p?.name==="sigv4a"&&g?.name==="sigv4"&&(c=g?.signingRegion??c,u=g?.signingName??u)}return await i.sign(t,{signingDate:js(o.systemClockOffset),signingRegion:c,signingService:u})}errorHandler(t){return n=>{const r=n.ServerTime??zs(n.$response);if(r){const s=ft("config",t.config),o=s.systemClockOffset;s.systemClockOffset=Ws(r,s.systemClockOffset),s.systemClockOffset!==o&&n.$metadata&&(n.$metadata.clockSkewCorrected=!0)}throw n}}successHandler(t,n){const r=zs(t);if(r){const s=ft("config",n.config);s.systemClockOffset=Ws(r,s.systemClockOffset)}}}const yl=null,td=/^[A-Za-z0-9+/]*={0,2}$/,nd=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!td.exec(e))throw new TypeError("Invalid base64 string.");const t=(0,$e.s)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},rd=e=>{let t;if(typeof e=="string"?t=ut(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,$e.Q)(t.buffer,t.byteOffset,t.byteLength).toString("base64")},Vs="required",le="fn",fe="argv",Xe="ref",Gs=!0,qs="isSet",ht="booleanEquals",Ye="error",Qe="endpoint",be="tree",kn="PartitionResult",$n="getAttr",Ks={[Vs]:!1,type:"String"},Xs={[Vs]:!0,default:!1,type:"Boolean"},Ys={[Xe]:"Endpoint"},Qs={[le]:ht,[fe]:[{[Xe]:"UseFIPS"},!0]},Js={[le]:ht,[fe]:[{[Xe]:"UseDualStack"},!0]},he={},Zs={[le]:$n,[fe]:[{[Xe]:kn},"supportsFIPS"]},eo={[Xe]:kn},to={[le]:ht,[fe]:[!0,{[le]:$n,[fe]:[eo,"supportsDualStack"]}]},no=[Qs],ro=[Js],so=[{[Xe]:"Region"}],sd={version:"1.0",parameters:{Region:Ks,UseDualStack:Xs,UseFIPS:Xs,Endpoint:Ks},rules:[{conditions:[{[le]:qs,[fe]:[Ys]}],rules:[{conditions:no,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ye},{conditions:ro,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ye},{endpoint:{url:Ys,properties:he,headers:he},type:Qe}],type:be},{conditions:[{[le]:qs,[fe]:so}],rules:[{conditions:[{[le]:"aws.partition",[fe]:so,assign:kn}],rules:[{conditions:[Qs,Js],rules:[{conditions:[{[le]:ht,[fe]:[Gs,Zs]},to],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:he,headers:he},type:Qe}],type:be},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ye}],type:be},{conditions:no,rules:[{conditions:[{[le]:ht,[fe]:[Zs,Gs]}],rules:[{conditions:[{[le]:"stringEquals",[fe]:[{[le]:$n,[fe]:[eo,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:he,headers:he},type:Qe},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:he,headers:he},type:Qe}],type:be},{error:"FIPS is enabled but this partition does not support FIPS",type:Ye}],type:be},{conditions:ro,rules:[{conditions:[to],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:he,headers:he},type:Qe}],type:be},{error:"DualStack is enabled but this partition does not support DualStack",type:Ye}],type:be},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:he,headers:he},type:Qe}],type:be}],type:be},{error:"Invalid Configuration: Missing Region",type:Ye}]},od=new d({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),id=(e,t={})=>od.get(e,()=>mo(sd,{endpointParams:e,logger:t.logger}));E.aws=Tr;const ad=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??nd,base64Encoder:e?.base64Encoder??rd,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??id,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??nc,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new ed},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new en}],logger:e?.logger??new is,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??xt,utf8Decoder:e?.utf8Decoder??ut,utf8Encoder:e?.utf8Encoder??Oa}),cd="AWS_EXECUTION_ENV",oo="AWS_REGION",io="AWS_DEFAULT_REGION",dd="AWS_EC2_METADATA_DISABLED",ud=["in-region","cross-region","mobile","standard","legacy"],ld="/latest/meta-data/placement/region",fd="AWS_DEFAULTS_MODE",hd="defaults_mode",pd={environmentVariableSelector:e=>e[fd],configFileSelector:e=>e[hd],default:"legacy"},gd=({region:e=Re(br),defaultsMode:t=Re(pd)}={})=>Pr(async()=>{const n=typeof t=="function"?await t():t;switch(n?.toLowerCase()){case"auto":return md(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(n?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${ud.join(", ")}, got ${n}`)}}),md=async e=>{if(e){const t=typeof e=="function"?await e():e,n=await yd();return n?t===n?"in-region":"cross-region":"standard"}return"standard"},yd=async()=>{if(process.env[cd]&&(process.env[oo]||process.env[io]))return process.env[oo]??process.env[io];if(!process.env[dd])try{const{getInstanceMetadataEndpoint:e,httpRequest:t}=await w.e(172).then(w.bind(w,172)),n=await e();return(await t({...n,path:ld})).toString()}catch{}},Ed=e=>{ua(process.version);const t=gd(e),n=()=>t().then(da),r=ad(e);ac(process.version);const s={profile:e?.profile};return{...r,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??Qc,credentialDefaultProvider:e?.credentialDefaultProvider??bc,defaultUserAgentProvider:e?.defaultUserAgentProvider??Pc({serviceId:r.serviceId,clientVersion:ic.rE}),maxAttempts:e?.maxAttempts??Re(Di,e),region:e?.region??Re(br,{...Lo,...s}),requestHandler:jt.create(e?.requestHandler??n),retryMode:e?.retryMode??Re({...Mi,default:async()=>(await n()).retryMode||Hr},e),sha256:e?.sha256??Fc.bind(null,"sha256"),streamCollector:e?.streamCollector??Kc,useDualstackEndpoint:e?.useDualstackEndpoint??Re(Do,s),useFipsEndpoint:e?.useFipsEndpoint??Re(Fo,s),userAgentAppId:e?.userAgentAppId??Re(kc,s)}},Sd=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");const n=e.region;return typeof n=="string"?n:n()};return{setRegion(n){t=n},region(){return t}}},wd=e=>({region:e.region()}),Td="AWS_REGION",_d="region",Sl={environmentVariableSelector:e=>e[Td],configFileSelector:e=>e[_d],default:()=>{throw new Error("Region is missing")}},wl={preferredFile:"credentials"},Rd=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(s){const o=t.findIndex(i=>i.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){r=s},credentials(){return r}}},Ad=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),zt=e=>e,bd=(e,t)=>{const n={...zt(Sd(e)),...zt(ga(e)),...zt(V(e)),...zt(Rd(e))};return t.forEach(r=>r.configure(n)),{...e,...wd(n),...ma(n),...U(n),...Ad(n)}};class Cd extends Hi{constructor(...[n]){const r=Ed(n||{}),s=sc(r),o=hr(s),i=ki(o),c=Ho(i),u=c,f=bi(u),y=rc(f),p=bd(y,n?.extensions||[]);super(p);A(this,"config");this.config=p,this.middlewareStack.use(Po(this.config)),this.middlewareStack.use(Ca(this.config)),this.middlewareStack.use(zo(this.config)),this.middlewareStack.use(gt(this.config)),this.middlewareStack.use(Me(this.config)),this.middlewareStack.use(St(this.config)),this.middlewareStack.use(rr(this.config,{httpAuthSchemeParametersProvider:ec,identityProviderConfigProvider:async g=>new Zt({"aws.auth#sigv4":g.credentials})})),this.middlewareStack.use(ur(this.config))}destroy(){super.destroy()}}class Y extends We{constructor(t){super(t),Object.setPrototypeOf(this,Y.prototype)}}class Fn extends Y{constructor(n){super({name:"AccessDeniedException",$fault:"client",...n});A(this,"name","AccessDeniedException");A(this,"$fault","client");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,Fn.prototype),this.error=n.error,this.error_description=n.error_description}}class Mn extends Y{constructor(n){super({name:"AuthorizationPendingException",$fault:"client",...n});A(this,"name","AuthorizationPendingException");A(this,"$fault","client");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,Mn.prototype),this.error=n.error,this.error_description=n.error_description}}class Un extends Y{constructor(n){super({name:"ExpiredTokenException",$fault:"client",...n});A(this,"name","ExpiredTokenException");A(this,"$fault","client");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,Un.prototype),this.error=n.error,this.error_description=n.error_description}}class Ln extends Y{constructor(n){super({name:"InternalServerException",$fault:"server",...n});A(this,"name","InternalServerException");A(this,"$fault","server");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,Ln.prototype),this.error=n.error,this.error_description=n.error_description}}class Hn extends Y{constructor(n){super({name:"InvalidClientException",$fault:"client",...n});A(this,"name","InvalidClientException");A(this,"$fault","client");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,Hn.prototype),this.error=n.error,this.error_description=n.error_description}}class Bn extends Y{constructor(n){super({name:"InvalidGrantException",$fault:"client",...n});A(this,"name","InvalidGrantException");A(this,"$fault","client");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,Bn.prototype),this.error=n.error,this.error_description=n.error_description}}class jn extends Y{constructor(n){super({name:"InvalidRequestException",$fault:"client",...n});A(this,"name","InvalidRequestException");A(this,"$fault","client");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,jn.prototype),this.error=n.error,this.error_description=n.error_description}}class zn extends Y{constructor(n){super({name:"InvalidScopeException",$fault:"client",...n});A(this,"name","InvalidScopeException");A(this,"$fault","client");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,zn.prototype),this.error=n.error,this.error_description=n.error_description}}class Wn extends Y{constructor(n){super({name:"SlowDownException",$fault:"client",...n});A(this,"name","SlowDownException");A(this,"$fault","client");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,Wn.prototype),this.error=n.error,this.error_description=n.error_description}}class Vn extends Y{constructor(n){super({name:"UnauthorizedClientException",$fault:"client",...n});A(this,"name","UnauthorizedClientException");A(this,"$fault","client");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,Vn.prototype),this.error=n.error,this.error_description=n.error_description}}class Gn extends Y{constructor(n){super({name:"UnsupportedGrantTypeException",$fault:"client",...n});A(this,"name","UnsupportedGrantTypeException");A(this,"$fault","client");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,Gn.prototype),this.error=n.error,this.error_description=n.error_description}}class qn extends Y{constructor(n){super({name:"InvalidRequestRegionException",$fault:"client",...n});A(this,"name","InvalidRequestRegionException");A(this,"$fault","client");A(this,"error");A(this,"error_description");A(this,"endpoint");A(this,"region");Object.setPrototypeOf(this,qn.prototype),this.error=n.error,this.error_description=n.error_description,this.endpoint=n.endpoint,this.region=n.region}}class Kn extends Y{constructor(n){super({name:"InvalidClientMetadataException",$fault:"client",...n});A(this,"name","InvalidClientMetadataException");A(this,"$fault","client");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,Kn.prototype),this.error=n.error,this.error_description=n.error_description}}class Xn extends Y{constructor(n){super({name:"InvalidRedirectUriException",$fault:"client",...n});A(this,"name","InvalidRedirectUriException");A(this,"$fault","client");A(this,"error");A(this,"error_description");Object.setPrototypeOf(this,Xn.prototype),this.error=n.error,this.error_description=n.error_description}}const Id=e=>({...e,...e.clientSecret&&{clientSecret:Be},...e.refreshToken&&{refreshToken:Be},...e.codeVerifier&&{codeVerifier:Be}}),vd=e=>({...e,...e.accessToken&&{accessToken:Be},...e.refreshToken&&{refreshToken:Be},...e.idToken&&{idToken:Be}}),Tl=e=>({...e,...e.refreshToken&&{refreshToken:SENSITIVE_STRING},...e.assertion&&{assertion:SENSITIVE_STRING},...e.subjectToken&&{subjectToken:SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:SENSITIVE_STRING}}),_l=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING},...e.refreshToken&&{refreshToken:SENSITIVE_STRING},...e.idToken&&{idToken:SENSITIVE_STRING}}),Rl=e=>({...e,...e.clientSecret&&{clientSecret:SENSITIVE_STRING}}),Al=e=>({...e,...e.clientSecret&&{clientSecret:SENSITIVE_STRING}}),Od=(e,t)=>Yt(e,t).then(n=>t.utf8Encoder(n)),ao=(e,t)=>Od(e,t).then(n=>{if(n.length)try{return JSON.parse(n)}catch(r){throw r?.name==="SyntaxError"&&Object.defineProperty(r,"$responseBodyText",{value:n}),r}return{}}),Pd=async(e,t)=>{const n=await ao(e,t);return n.message=n.message??n.Message,n},Nd=(e,t)=>{const n=(o,i)=>Object.keys(o).find(c=>c.toLowerCase()===i.toLowerCase()),r=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=n(e.headers,"x-amzn-errortype");if(s!==void 0)return r(e.headers[s]);if(t.code!==void 0)return r(t.code);if(t.__type!==void 0)return r(t.__type)},xd=async(e,t)=>{const n=nt(e,t),r={"content-type":"application/json"};n.bp("/token");let s;return s=JSON.stringify(Z(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:o=>wn(o)})),n.m("POST").h(r).b(s),n.build()},bl=async(e,t)=>{const n=rb(e,t),r={"content-type":"application/json"};n.bp("/token");const s=map({[Xd]:[,"t"]});let o;return o=JSON.stringify(take(e,{assertion:[],clientId:[],code:[],codeVerifier:[],grantType:[],redirectUri:[],refreshToken:[],requestedTokenType:[],scope:i=>_json(i),subjectToken:[],subjectTokenType:[]})),n.m("POST").h(r).q(s).b(o),n.build()},Cl=async(e,t)=>{const n=rb(e,t),r={"content-type":"application/json"};n.bp("/client/register");let s;return s=JSON.stringify(take(e,{clientName:[],clientType:[],entitledApplicationArn:[],grantTypes:o=>_json(o),issuerUrl:[],redirectUris:o=>_json(o),scopes:o=>_json(o)})),n.m("POST").h(r).b(s),n.build()},Il=async(e,t)=>{const n=rb(e,t),r={"content-type":"application/json"};n.bp("/device_authorization");let s;return s=JSON.stringify(take(e,{clientId:[],clientSecret:[],startUrl:[]})),n.m("POST").h(r).b(s),n.build()},Dd=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Wt(e,t);const n=J({$metadata:K(e)}),r=Wi(rs(await ao(e.body,t)),"body"),s=Z(r,{accessToken:x,expiresIn:mn,idToken:x,refreshToken:x,tokenType:x});return Object.assign(n,s),n},vl=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Wt(e,t);const n=map({$metadata:K(e)}),r=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),s=take(r,{accessToken:__expectString,expiresIn:__expectInt32,idToken:__expectString,issuedTokenType:__expectString,refreshToken:__expectString,scope:_json,tokenType:__expectString});return Object.assign(n,s),n},Ol=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Wt(e,t);const n=map({$metadata:K(e)}),r=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),s=take(r,{authorizationEndpoint:__expectString,clientId:__expectString,clientIdIssuedAt:__expectLong,clientSecret:__expectString,clientSecretExpiresAt:__expectLong,tokenEndpoint:__expectString});return Object.assign(n,s),n},Pl=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Wt(e,t);const n=map({$metadata:K(e)}),r=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),s=take(r,{deviceCode:__expectString,expiresIn:__expectInt32,interval:__expectInt32,userCode:__expectString,verificationUri:__expectString,verificationUriComplete:__expectString});return Object.assign(n,s),n},Wt=async(e,t)=>{const n={...e,body:await Pd(e.body,t)},r=Nd(e,n.body);switch(r){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await $d(n,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await Fd(n,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await Md(n,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Ud(n,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Ld(n,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await Bd(n,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await zd(n,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await Vd(n,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await Gd(n,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await qd(n,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await Kd(n,t);case"InvalidRequestRegionException":case"com.amazonaws.ssooidc#InvalidRequestRegionException":throw await Wd(n,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await Hd(n,t);case"InvalidRedirectUriException":case"com.amazonaws.ssooidc#InvalidRedirectUriException":throw await jd(n,t);default:const s=n.body;return kd({output:e,parsedBody:s,errorCode:r})}},kd=aa(Y),$d=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new Fn({$metadata:K(e),...n});return se(o,e.body)},Fd=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new Mn({$metadata:K(e),...n});return se(o,e.body)},Md=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new Un({$metadata:K(e),...n});return se(o,e.body)},Ud=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new Ln({$metadata:K(e),...n});return se(o,e.body)},Ld=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new Hn({$metadata:K(e),...n});return se(o,e.body)},Hd=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new Kn({$metadata:K(e),...n});return se(o,e.body)},Bd=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new Bn({$metadata:K(e),...n});return se(o,e.body)},jd=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new Xn({$metadata:K(e),...n});return se(o,e.body)},zd=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new jn({$metadata:K(e),...n});return se(o,e.body)},Wd=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{endpoint:x,error:x,error_description:x,region:x});Object.assign(n,s);const o=new qn({$metadata:K(e),...n});return se(o,e.body)},Vd=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new zn({$metadata:K(e),...n});return se(o,e.body)},Gd=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new Wn({$metadata:K(e),...n});return se(o,e.body)},qd=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new Vn({$metadata:K(e),...n});return se(o,e.body)},Kd=async(e,t)=>{const n=J({}),r=e.body,s=Z(r,{error:x,error_description:x});Object.assign(n,s);const o=new Gn({$metadata:K(e),...n});return se(o,e.body)},K=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Nl=(e,t)=>collectBody(e,t).then(n=>t.utf8Encoder(n)),Xd="aws_iam";class Yd extends es.classBuilder().ep(oc).m(function(t,n,r,s){return[Rt(r,this.serialize,this.deserialize),Ai(r,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(Id,vd).ser(xd).de(Dd).build(){}},57487:(oe,j,w)=>{w.d(j,{m:()=>V});const V=U=>typeof ArrayBuffer=="function"&&U instanceof ArrayBuffer||Object.prototype.toString.call(U)==="[object ArrayBuffer]"},42445:(oe,j,w)=>{w.d(j,{G:()=>U});var V=w(21651);function U(z){const X=[];for(let N of Object.keys(z).sort()){const C=z[N];if(N=(0,V.o)(N),Array.isArray(C))for(let F=0,de=C.length;F<de;F++)X.push(`${N}=${(0,V.o)(C[F])}`);else{let F=N;(C||typeof C=="string")&&(F+=`=${(0,V.o)(C)}`),X.push(F)}}return X.join("&")}},57413:(oe,j,w)=>{w.d(j,{J:()=>V});function V(U){const z={};if(U=U.replace(/^\?/,""),U)for(const X of U.split("&")){let[N,C=null]=X.split("=");N=decodeURIComponent(N),C&&(C=decodeURIComponent(C)),N in z?Array.isArray(z[N])?z[N].push(C):z[N]=[z[N],C]:z[N]=C}return z}},16206:(oe,j,w)=>{w.d(j,{h5:()=>F,S0:()=>C,GQ:()=>ge,Qb:()=>pt,bV:()=>Ee});const V=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],U=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],z=["TimeoutError","RequestTimeout","RequestTimeoutException"],X=[500,502,503,504],N=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],C=W=>W.$retryable!==void 0,F=W=>V.includes(W.name),de=W=>W.$metadata?.clockSkewCorrected,pt=W=>W.$metadata?.httpStatusCode===429||U.includes(W.name)||W.$retryable?.throttling==!0,Ee=(W,ue=0)=>de(W)||z.includes(W.name)||N.includes(W?.code||"")||X.includes(W.$metadata?.httpStatusCode||0)||W.cause!==void 0&&ue<=10&&Ee(W.cause,ue+1),ge=W=>{if(W.$metadata?.httpStatusCode!==void 0){const ue=W.$metadata.httpStatusCode;return 500<=ue&&ue<=599&&!Ee(W)}return!1}},86170:(oe,j,w)=>{w.d(j,{Q:()=>X,s:()=>N});var V=w(57487),U=w(20181),z=w.n(U);const X=(C,F=0,de=C.byteLength-F)=>{if(!(0,V.m)(C))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof C} (${C})`);return U.Buffer.from(C,F,de)},N=(C,F)=>{if(typeof C!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof C} (${C})`);return F?U.Buffer.from(C,F):U.Buffer.from(C)}},73828:(oe,j,w)=>{w.d(j,{a:()=>z,n:()=>X});const V={},U={};for(let N=0;N<256;N++){let C=N.toString(16).toLowerCase();C.length===1&&(C=`0${C}`),V[N]=C,U[C]=N}function z(N){if(N.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const C=new Uint8Array(N.length/2);for(let F=0;F<N.length;F+=2){const de=N.slice(F,F+2).toLowerCase();if(de in U)C[F/2]=U[de];else throw new Error(`Cannot decode unrecognized sequence ${de} as hexadecimal`)}return C}function X(N){let C="";for(let F=0;F<N.byteLength;F++)C+=V[N[F]];return C}},4902:(oe,j,w)=>{w.d(j,{Mu:()=>Ee,c9:()=>nn});var V=w(86170);const U=/^[A-Za-z0-9+/]*={0,2}$/,z=d=>{if(d.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!U.exec(d))throw new TypeError("Invalid base64 string.");const a=(0,V.s)(d,"base64");return new Uint8Array(a.buffer,a.byteOffset,a.byteLength)},X=d=>{const a=(0,V.s)(d,"utf8");return new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT)},N=d=>typeof d=="string"?fromUtf8(d):ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(d),C=d=>{if(typeof d=="string")return d;if(typeof d!="object"||typeof d.byteOffset!="number"||typeof d.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,V.Q)(d.buffer,d.byteOffset,d.byteLength).toString("utf8")},F=d=>{let a;if(typeof d=="string"?a=X(d):a=d,typeof a!="object"||typeof a.byteOffset!="number"||typeof a.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,V.Q)(a.buffer,a.byteOffset,a.byteLength).toString("base64")};function de(d,a="utf-8"){return a==="base64"?F(d):C(d)}function pt(d,a){return a==="base64"?Ee.mutate(z(d)):Ee.mutate(X(d))}class Ee extends Uint8Array{static fromString(a,l="utf-8"){switch(typeof a){case"string":return pt(a,l);default:throw new Error(`Unsupported conversion from ${typeof a} to Uint8ArrayBlobAdapter.`)}}static mutate(a){return Object.setPrototypeOf(a,Ee.prototype),a}transformToString(a="utf-8"){return de(this,a)}}var ge=w(2203);class W extends ge.Duplex{constructor({expectedChecksum:a,checksum:l,source:h,checksumSourceLocation:m,base64Encoder:E}){if(super(),typeof h.pipe=="function")this.source=h;else throw new Error(`@smithy/util-stream: unsupported source type ${h?.constructor?.name??h} in ChecksumStream.`);this.base64Encoder=E??F,this.expectedChecksum=a,this.checksum=l,this.checksumSourceLocation=m,this.source.pipe(this)}_read(a){}_write(a,l,h){try{this.checksum.update(a),this.push(a)}catch(m){return h(m)}return h()}async _final(a){try{const l=await this.checksum.digest(),h=this.base64Encoder(l);if(this.expectedChecksum!==h)return a(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${h}" in response header "${this.checksumSourceLocation}".`))}catch(l){return a(l)}return this.push(null),a()}}const ue=typeof ReadableStream=="function"?ReadableStream:function(){};class Vt extends null{}const co=({expectedChecksum:d,checksum:a,source:l,checksumSourceLocation:h,base64Encoder:m})=>{if(!isReadableStream(l))throw new Error(`@smithy/util-stream: unsupported source type ${l?.constructor?.name??l} in ChecksumStream.`);const E=m??toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const _=new TransformStream({start(){},async transform(T,k){a.update(T),k.enqueue(T)},async flush(T){const k=await a.digest(),L=E(k);if(d!==L){const ee=new Error(`Checksum mismatch: expected "${d}" but received "${L}" in response header "${h}".`);T.error(ee)}else T.terminate()}});l.pipeThrough(_);const R=_.readable;return Object.setPrototypeOf(R,ChecksumStream.prototype),R};function Q(d){return typeof ReadableStream=="function"&&isReadableStream(d.source)?createChecksumStreamWeb(d):new ChecksumStream(d)}var Yn=w(57075);function Je(d,a,l){if(isReadableStream(d))return createBufferedReadableStream(d,a,l);const h=new Readable({read(){}});let m=!1,E=0;const _=["",new ByteArrayCollector(T=>new Uint8Array(T)),new ByteArrayCollector(T=>Buffer.from(new Uint8Array(T)))];let R=-1;return d.on("data",T=>{const k=modeOf(T);if(R!==k&&(R>=0&&h.push(flush(_,R)),R=k),R===-1){h.push(T);return}const L=sizeOf(T);E+=L;const ee=sizeOf(_[R]);if(L>=a&&ee===0)h.push(T);else{const me=merge(_,R,T);!m&&E>a*2&&(m=!0,l?.warn(`@smithy/util-stream - stream chunk size ${L} is below threshold of ${a}, automatically buffering.`)),me>=a&&h.push(flush(_,R))}}),d.on("end",()=>{if(R!==-1){const T=flush(_,R);sizeOf(T)>0&&h.push(T)}h.push(null)}),h}const uo=(d,a)=>{const{base64Encoder:l,bodyLengthChecker:h,checksumAlgorithmFn:m,checksumLocationName:E,streamHasher:_}=a,R=l!==void 0&&m!==void 0&&E!==void 0&&_!==void 0,T=R?_(m,d):void 0,k=new Readable({read:()=>{}});return d.on("data",L=>{const ee=h(L)||0;k.push(`${ee.toString(16)}\r
`),k.push(L),k.push(`\r
`)}),d.on("end",async()=>{if(k.push(`0\r
`),R){const L=l(await T);k.push(`${E}:${L}\r
`),k.push(`\r
`)}k.push(null)}),k},Qn=(d,a)=>isReadableStream(d)?headWebStream(d,a):new Promise((l,h)=>{const m=new Gt;m.limit=a,d.pipe(m),d.on("error",E=>{m.end(),h(E)}),m.on("error",h),m.on("finish",function(){const E=new Uint8Array(Buffer.concat(this.buffers));l(E)})});class Gt extends ge.Writable{constructor(){super(...arguments),this.buffers=[],this.limit=1/0,this.bytesBuffered=0}_write(a,l,h){if(this.buffers.push(a),this.bytesBuffered+=a.byteLength??0,this.bytesBuffered>=this.limit){const m=this.bytesBuffered-this.limit,E=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=E.subarray(0,E.byteLength-m),this.emit("finish")}h()}}var gt;(function(d){d.HEADER="header",d.QUERY="query"})(gt||(gt={}));var mt;(function(d){d.HEADER="header",d.QUERY="query"})(mt||(mt={}));var yt;(function(d){d.HTTP="http",d.HTTPS="https"})(yt||(yt={}));var Me;(function(d){d.MD5="md5",d.CRC32="crc32",d.CRC32C="crc32c",d.SHA1="sha1",d.SHA256="sha256"})(Me||(Me={}));const qt=d=>{const a=[];return d.sha256!==void 0&&a.push({algorithmId:()=>Me.SHA256,checksumConstructor:()=>d.sha256}),d.md5!=null&&a.push({algorithmId:()=>Me.MD5,checksumConstructor:()=>d.md5}),{_checksumAlgorithms:a,addChecksumAlgorithm(l){this._checksumAlgorithms.push(l)},checksumAlgorithms(){return this._checksumAlgorithms}}},Jn=d=>{const a={};return d.checksumAlgorithms().forEach(l=>{a[l.algorithmId()]=l.checksumConstructor()}),a},Zn=d=>({...getChecksumConfiguration(d)}),er=d=>({...resolveChecksumRuntimeConfig(d)});var Et;(function(d){d[d.HEADER=0]="HEADER",d[d.TRAILER=1]="TRAILER"})(Et||(Et={}));var St;(function(d){d.PROFILE="profile",d.SSO_SESSION="sso-session",d.SERVICES="services"})(St||(St={}));var Kt;(function(d){d.HTTP_0_9="http/0.9",d.HTTP_1_0="http/1.0",d.TDS_8_0="tds/8.0"})(Kt||(Kt={}));class Ze{constructor({name:a,kind:l=FieldPosition.HEADER,values:h=[]}){this.name=a,this.kind=l,this.values=h}add(a){this.values.push(a)}set(a){this.values=a}remove(a){this.values=this.values.filter(l=>l!==a)}toString(){return this.values.map(a=>a.includes(",")||a.includes(" ")?`"${a}"`:a).join(", ")}get(){return this.values}}var Te=w(58611),tr=w(65692);const nr={setTimeout:(d,a)=>setTimeout(d,a),clearTimeout:d=>clearTimeout(d)},wt=1e3,rr=(d,a,l=0)=>{if(!l)return-1;const h=m=>{const E=timing.setTimeout(()=>{d.destroy(),a(Object.assign(new Error(`Socket timed out without establishing a connection within ${l} ms`),{name:"TimeoutError"}))},l-m),_=R=>{R?.connecting?R.on("connect",()=>{timing.clearTimeout(E)}):timing.clearTimeout(E)};d.socket?_(d.socket):d.on("socket",_)};return l<2e3?(h(0),0):timing.setTimeout(h.bind(null,wt),wt)},Xt=3e3,sr=(d,{keepAlive:a,keepAliveMsecs:l},h=Xt)=>{if(a!==!0)return-1;const m=()=>{d.socket?d.socket.setKeepAlive(a,l||0):d.on("socket",E=>{E.setKeepAlive(a,l||0)})};return h===0?(m(),0):timing.setTimeout(m,h)},Tt=3e3,_t=(d,a,l=DEFAULT_REQUEST_TIMEOUT)=>{const h=m=>{const E=l-m,_=()=>{d.destroy(),a(Object.assign(new Error(`Connection timed out after ${l} ms`),{name:"TimeoutError"}))};d.socket?(d.socket.setTimeout(E,_),d.on("close",()=>d.socket?.removeListener("timeout",_))):d.setTimeout(E,_)};return 0<l&&l<6e3?(h(0),0):timing.setTimeout(h.bind(null,l===0?0:Tt),Tt)},Rt=6e3;async function or(d,a,l=Rt){const h=a.headers??{},m=h.Expect||h.expect;let E=-1,_=!0;m==="100-continue"&&(_=await Promise.race([new Promise(R=>{E=Number(timing.setTimeout(()=>R(!0),Math.max(Rt,l)))}),new Promise(R=>{d.on("continue",()=>{timing.clearTimeout(E),R(!0)}),d.on("response",()=>{timing.clearTimeout(E),R(!1)}),d.on("error",()=>{timing.clearTimeout(E),R(!1)})})])),_&&ir(d,a.body)}function ir(d,a){if(a instanceof Readable){a.pipe(d);return}if(a){if(Buffer.isBuffer(a)||typeof a=="string"){d.end(a);return}const l=a;if(typeof l=="object"&&l.buffer&&typeof l.byteOffset=="number"&&typeof l.byteLength=="number"){d.end(Buffer.from(l.buffer,l.byteOffset,l.byteLength));return}d.end(Buffer.from(a));return}d.end()}const ar=0;class et{static create(a){return typeof a?.handle=="function"?a:new et(a)}static checkSocketUsage(a,l,h=console){const{sockets:m,requests:E,maxSockets:_}=a;if(typeof _!="number"||_===1/0)return l;const R=15e3;if(Date.now()-R<l)return l;if(m&&E)for(const T in m){const k=m[T]?.length??0,L=E[T]?.length??0;if(k>=_&&L>=2*_)return h?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${k} and ${L} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return l}constructor(a){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((l,h)=>{typeof a=="function"?a().then(m=>{l(this.resolveDefaultConfig(m))}).catch(h):l(this.resolveDefaultConfig(a))})}resolveDefaultConfig(a){const{requestTimeout:l,connectionTimeout:h,socketTimeout:m,socketAcquisitionWarningTimeout:E,httpAgent:_,httpsAgent:R}=a||{},T=!0,k=50;return{connectionTimeout:h,requestTimeout:l??m,socketAcquisitionWarningTimeout:E,httpAgent:(()=>_ instanceof hAgent||typeof _?.destroy=="function"?_:new hAgent({keepAlive:T,maxSockets:k,..._}))(),httpsAgent:(()=>R instanceof hsAgent||typeof R?.destroy=="function"?R:new hsAgent({keepAlive:T,maxSockets:k,...R}))(),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(a,{abortSignal:l}={}){return this.config||(this.config=await this.configProvider),new Promise((h,m)=>{let E;const _=[],R=async P=>{await E,_.forEach(timing.clearTimeout),h(P)},T=async P=>{await E,_.forEach(timing.clearTimeout),m(P)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(l?.aborted){const P=new Error("Request aborted");P.name="AbortError",T(P);return}const k=a.protocol==="https:",L=k?this.config.httpsAgent:this.config.httpAgent;_.push(timing.setTimeout(()=>{this.socketWarningTimestamp=et.checkSocketUsage(L,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3)));const ee=buildQueryString(a.query||{});let me;if(a.username!=null||a.password!=null){const P=a.username??"",B=a.password??"";me=`${P}:${B}`}let te=a.path;ee&&(te+=`?${ee}`),a.fragment&&(te+=`#${a.fragment}`);let ie=a.hostname??"";ie[0]==="["&&ie.endsWith("]")?ie=a.hostname.slice(1,-1):ie=a.hostname;const xe={headers:a.headers,host:ie,method:a.method,path:te,port:a.port,agent:L,auth:me},H=(k?hsRequest:hRequest)(xe,P=>{const B=new HttpResponse({statusCode:P.statusCode||-1,reason:P.statusMessage,headers:getTransformedHeaders(P.headers),body:P});R({response:B})});if(H.on("error",P=>{NODEJS_TIMEOUT_ERROR_CODES.includes(P.code)?T(Object.assign(P,{name:"TimeoutError"})):T(P)}),l){const P=()=>{H.destroy();const B=new Error("Request aborted");B.name="AbortError",T(B)};if(typeof l.addEventListener=="function"){const B=l;B.addEventListener("abort",P,{once:!0}),H.once("close",()=>B.removeEventListener("abort",P))}else l.onabort=P}_.push(setConnectionTimeout(H,T,this.config.connectionTimeout)),_.push(setSocketTimeout(H,T,this.config.requestTimeout));const ce=xe.agent;typeof ce=="object"&&"keepAlive"in ce&&_.push(setSocketKeepAlive(H,{keepAlive:ce.keepAlive,keepAliveMsecs:ce.keepAliveMsecs})),E=writeRequestBody(H,a,this.config.requestTimeout).catch(P=>(_.forEach(timing.clearTimeout),m(P)))})}updateHttpClientConfig(a,l){this.config=void 0,this.configProvider=this.configProvider.then(h=>({...h,[a]:l}))}httpHandlerConfigs(){return this.config??{}}}var cr=w(85675);class dr{constructor(a){this.sessions=[],this.sessions=a??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(a){this.sessions.push(a)}contains(a){return this.sessions.includes(a)}remove(a){this.sessions=this.sessions.filter(l=>l!==a)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(a){for(const l of this.sessions)l===a&&(l.destroyed||l.destroy())}}class ur{constructor(a){if(this.sessionCache=new Map,this.config=a,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(a,l){const h=this.getUrlString(a),m=this.sessionCache.get(h);if(m){const T=m.poll();if(T&&!this.config.disableConcurrency)return T}const E=http2.connect(h);this.config.maxConcurrency&&E.settings({maxConcurrentStreams:this.config.maxConcurrency},T=>{if(T)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+a.destination.toString())}),E.unref();const _=()=>{E.destroy(),this.deleteSession(h,E)};E.on("goaway",_),E.on("error",_),E.on("frameError",_),E.on("close",()=>this.deleteSession(h,E)),l.requestTimeout&&E.setTimeout(l.requestTimeout,_);const R=this.sessionCache.get(h)||new NodeHttp2ConnectionPool;return R.offerLast(E),this.sessionCache.set(h,R),E}deleteSession(a,l){const h=this.sessionCache.get(a);!h||!h.contains(l)||(h.remove(l),this.sessionCache.set(a,h))}release(a,l){const h=this.getUrlString(a);this.sessionCache.get(h)?.offerLast(l)}destroy(){for(const[a,l]of this.sessionCache){for(const h of l)h.destroyed||h.destroy(),l.remove(h);this.sessionCache.delete(a)}}setMaxConcurrentStreams(a){if(a&&a<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=a}setDisableConcurrentStreams(a){this.config.disableConcurrency=a}getUrlString(a){return a.destination.toString()}}class Ce{static create(a){return typeof a?.handle=="function"?a:new Ce(a)}constructor(a){this.metadata={handlerProtocol:"h2"},this.connectionManager=new NodeHttp2ConnectionManager({}),this.configProvider=new Promise((l,h)=>{typeof a=="function"?a().then(m=>{l(m||{})}).catch(h):l(a||{})})}destroy(){this.connectionManager.destroy()}async handle(a,{abortSignal:l}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));const{requestTimeout:h,disableConcurrentStreams:m}=this.config;return new Promise((E,_)=>{let R=!1,T;const k=async G=>{await T,E(G)},L=async G=>{await T,_(G)};if(l?.aborted){R=!0;const G=new Error("Request aborted");G.name="AbortError",L(G);return}const{hostname:ee,method:me,port:te,protocol:ie,query:xe}=a;let De="";if(a.username!=null||a.password!=null){const G=a.username??"",re=a.password??"";De=`${G}:${re}@`}const H=`${ie}//${De}${ee}${te?`:${te}`:""}`,ce={destination:new URL(H)},P=this.connectionManager.lease(ce,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:m||!1}),B=G=>{m&&this.destroySession(P),R=!0,L(G)},_e=buildQueryString(xe||{});let Ie=a.path;_e&&(Ie+=`?${_e}`),a.fragment&&(Ie+=`#${a.fragment}`);const ne=P.request({...a.headers,[constants.HTTP2_HEADER_PATH]:Ie,[constants.HTTP2_HEADER_METHOD]:me});if(P.ref(),ne.on("response",G=>{const re=new HttpResponse({statusCode:G[":status"]||-1,headers:getTransformedHeaders(G),body:ne});R=!0,k({response:re}),m&&(P.close(),this.connectionManager.deleteSession(H,P))}),h&&ne.setTimeout(h,()=>{ne.close();const G=new Error(`Stream timed out because of no activity for ${h} ms`);G.name="TimeoutError",B(G)}),l){const G=()=>{ne.close();const re=new Error("Request aborted");re.name="AbortError",B(re)};if(typeof l.addEventListener=="function"){const re=l;re.addEventListener("abort",G,{once:!0}),ne.once("close",()=>re.removeEventListener("abort",G))}else l.onabort=G}ne.on("frameError",(G,re,rn)=>{B(new Error(`Frame type id ${G} in stream id ${rn} has failed with code ${re}.`))}),ne.on("error",B),ne.on("aborted",()=>{B(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${ne.rstCode}.`))}),ne.on("close",()=>{P.unref(),m&&P.destroy(),R||B(new Error("Unexpected error: http2 request did not get a response"))}),T=writeRequestBody(ne,a,h)})}updateHttpClientConfig(a,l){this.config=void 0,this.configProvider=this.configProvider.then(h=>({...h,[a]:l}))}httpHandlerConfigs(){return this.config??{}}destroySession(a){a.destroyed||a.destroy()}}class tt extends ge.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(a,l,h){this.bufferedBytes.push(a),h()}}const Yt=d=>At(d)?Qt(d):new Promise((a,l)=>{const h=new tt;d.pipe(h),d.on("error",m=>{h.end(),l(m)}),h.on("error",l),h.on("finish",function(){const m=new Uint8Array(Buffer.concat(this.bufferedBytes));a(m)})}),At=d=>typeof ReadableStream=="function"&&d instanceof ReadableStream;async function Qt(d){const a=[],l=d.getReader();let h=!1,m=0;for(;!h;){const{done:R,value:T}=await l.read();T&&(a.push(T),m+=T.length),h=R}const E=new Uint8Array(m);let _=0;for(const R of a)E.set(R,_),_+=R.length;return E}const nt={supported:void 0};class bt{static create(a){return typeof a?.handle=="function"?a:new bt(a)}constructor(a){typeof a=="function"?this.configProvider=a().then(l=>l||{}):(this.config=a??{},this.configProvider=Promise.resolve(this.config)),nt.supported===void 0&&(nt.supported=Boolean(typeof Request<"u"&&"keepalive"in createRequest("https://[::1]")))}destroy(){}async handle(a,{abortSignal:l}={}){this.config||(this.config=await this.configProvider);const h=this.config.requestTimeout,m=this.config.keepAlive===!0,E=this.config.credentials;if(l?.aborted){const H=new Error("Request aborted");return H.name="AbortError",Promise.reject(H)}let _=a.path;const R=buildQueryString(a.query||{});R&&(_+=`?${R}`),a.fragment&&(_+=`#${a.fragment}`);let T="";if(a.username!=null||a.password!=null){const H=a.username??"",ce=a.password??"";T=`${H}:${ce}@`}const{port:k,method:L}=a,ee=`${a.protocol}//${T}${a.hostname}${k?`:${k}`:""}${_}`,me=L==="GET"||L==="HEAD"?void 0:a.body,te={body:me,headers:new Headers(a.headers),method:L,credentials:E};this.config?.cache&&(te.cache=this.config.cache),me&&(te.duplex="half"),typeof AbortController<"u"&&(te.signal=l),nt.supported&&(te.keepalive=m),typeof this.config.requestInit=="function"&&Object.assign(te,this.config.requestInit(a));let ie=()=>{};const xe=createRequest(ee,te),De=[fetch(xe).then(H=>{const ce=H.headers,P={};for(const _e of ce.entries())P[_e[0]]=_e[1];return H.body!=null?{response:new HttpResponse({headers:P,reason:H.statusText,statusCode:H.status,body:H.body})}:H.blob().then(_e=>({response:new HttpResponse({headers:P,reason:H.statusText,statusCode:H.status,body:_e})}))}),requestTimeout(h)];return l&&De.push(new Promise((H,ce)=>{const P=()=>{const B=new Error("Request aborted");B.name="AbortError",ce(B)};if(typeof l.addEventListener=="function"){const B=l;B.addEventListener("abort",P,{once:!0}),ie=()=>B.removeEventListener("abort",P)}else l.onabort=P})),Promise.race(De).finally(ie)}updateHttpClientConfig(a,l){this.config=void 0,this.configProvider=this.configProvider.then(h=>(h[a]=l,h))}httpHandlerConfigs(){return this.config??{}}}const Jt=async d=>typeof Blob=="function"&&d instanceof Blob||d.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await d.arrayBuffer()):Zt(d):lr(d);async function Zt(d){const a=await fr(d),l=z(a);return new Uint8Array(l)}async function lr(d){const a=[],l=d.getReader();let h=!1,m=0;for(;!h;){const{done:R,value:T}=await l.read();T&&(a.push(T),m+=T.length),h=R}const E=new Uint8Array(m);let _=0;for(const R of a)E.set(R,_),_+=R.length;return E}function fr(d){return new Promise((a,l)=>{const h=new FileReader;h.onloadend=()=>{if(h.readyState!==2)return l(new Error("Reader aborted too early"));const m=h.result??"",E=m.indexOf(","),_=E>-1?E+1:m.length;a(m.substring(_))},h.onabort=()=>l(new Error("Read aborted")),h.onerror=()=>l(h.error),h.readAsDataURL(d)})}var en=w(73828);const tn=d=>typeof ReadableStream=="function"&&(d?.constructor?.name===ReadableStream.name||d instanceof ReadableStream),lo=d=>typeof Blob=="function"&&(d?.constructor?.name===Blob.name||d instanceof Blob),Ct="The stream has already been transformed.",It=d=>{if(!vt(d)&&!tn(d)){const m=d?.__proto__?.constructor?.name||d;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${m}`)}let a=!1;const l=async()=>{if(a)throw new Error(Ct);return a=!0,await Jt(d)},h=m=>{if(typeof m.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return m.stream()};return Object.assign(d,{transformToByteArray:l,transformToString:async m=>{const E=await l();if(m==="base64")return F(E);if(m==="hex")return(0,en.n)(E);if(m===void 0||m==="utf8"||m==="utf-8")return C(E);if(typeof TextDecoder=="function")return new TextDecoder(m).decode(E);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(a)throw new Error(Ct);if(a=!0,vt(d))return h(d);if(tn(d))return d;throw new Error(`Cannot transform payload to web stream, got ${d}`)}})},vt=d=>typeof Blob=="function"&&d instanceof Blob,rt="The stream has already been transformed.",nn=d=>{if(!(d instanceof ge.Readable))try{return It(d)}catch{const m=d?.__proto__?.constructor?.name||d;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${m}`)}let a=!1;const l=async()=>{if(a)throw new Error(rt);return a=!0,await Yt(d)};return Object.assign(d,{transformToByteArray:l,transformToString:async h=>{const m=await l();return h===void 0||Buffer.isEncoding(h)?(0,V.Q)(m.buffer,m.byteOffset,m.byteLength).toString(h):new TextDecoder(h).decode(m)},transformToWebStream:()=>{if(a)throw new Error(rt);if(d.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof ge.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return a=!0,ge.Readable.toWeb(d)}})};async function hr(d){if(isReadableStream(d)||isBlob(d))return splitWebStream(d);const a=new PassThrough,l=new PassThrough;return d.pipe(a),d.pipe(l),[a,l]}},21651:(oe,j,w)=>{w.d(j,{o:()=>V});const V=z=>encodeURIComponent(z).replace(/[!'()*]/g,U),U=z=>`%${z.charCodeAt(0).toString(16).toUpperCase()}`}};
