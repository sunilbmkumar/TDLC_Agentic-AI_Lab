"use strict";exports.id=27,exports.ids=[27],exports.modules={75408:(bs,Bt,d)=>{d.d(Bt,{getDefaultRoleAssumer:()=>jt,getDefaultRoleAssumerWithWebIdentity:()=>Vt});var ce=d(91316),ae=d(34546),tt=d(8029),r=d(23007);const Zt=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),nt={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class x extends r.ServiceException{constructor(n){super(n),Object.setPrototypeOf(this,x.prototype)}}class de extends x{constructor(n){super({name:"ExpiredTokenException",$fault:"client",...n}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,de.prototype)}}class le extends x{constructor(n){super({name:"MalformedPolicyDocumentException",$fault:"client",...n}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,le.prototype)}}class me extends x{constructor(n){super({name:"PackedPolicyTooLargeException",$fault:"client",...n}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,me.prototype)}}class ue extends x{constructor(n){super({name:"RegionDisabledException",$fault:"client",...n}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,ue.prototype)}}class fe extends x{constructor(n){super({name:"IDPRejectedClaimException",$fault:"client",...n}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,fe.prototype)}}class he extends x{constructor(n){super({name:"InvalidIdentityTokenException",$fault:"client",...n}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,he.prototype)}}class ye extends x{constructor(n){super({name:"IDPCommunicationErrorException",$fault:"client",...n}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,ye.prototype)}}class ge extends x{constructor(n){super({name:"InvalidAuthorizationMessageException",$fault:"client",...n}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,ge.prototype)}}const N=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:r.SENSITIVE_STRING}}),Qt=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Ts=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:SENSITIVE_STRING}}),ws=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),qt=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:r.SENSITIVE_STRING}}),Jt=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Ds=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Ws=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),$s=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}});var Se=d(85165),Ae=d(90130);const Xt=async(e,n)=>{const t=W;let s;return s=G({...mn(e,n),[k]:Nn,[L]:$}),D(n,t,"/",void 0,s)},ks=async(e,n)=>{const t=W;let s;return s=G({...un(e,n),[k]:Hn,[L]:$}),D(n,t,"/",void 0,s)},Yt=async(e,n)=>{const t=W;let s;return s=G({...fn(e,n),[k]:jn,[L]:$}),D(n,t,"/",void 0,s)},Ms=async(e,n)=>{const t=W;let s;return s=G({...hn(e,n),[k]:Vn,[L]:$}),D(n,t,"/",void 0,s)},zs=async(e,n)=>{const t=W;let s;return s=G({...yn(e,n),[k]:Bn,[L]:$}),D(n,t,"/",void 0,s)},Fs=async(e,n)=>{const t=W;let s;return s=G({...gn(e,n),[k]:Zn,[L]:$}),D(n,t,"/",void 0,s)},Ls=async(e,n)=>{const t=W;let s;return s=G({...Sn(e,n),[k]:Qn,[L]:$}),D(n,t,"/",void 0,s)},Gs=async(e,n)=>{const t=W;let s;return s=G({...An(e,n),[k]:qn,[L]:$}),D(n,t,"/",void 0,s)},Us=async(e,n)=>{const t=W;let s;return s=G({...En(e,n),[k]:Jn,[L]:$}),D(n,t,"/",void 0,s)},en=async(e,n)=>{if(e.statusCode>=300)return w(e,n);const t=await(0,Se.t_)(e.body,n);let s={};return s=vn(t.AssumeRoleResult,n),{$metadata:g(e),...s}},Ks=async(e,n)=>{if(e.statusCode>=300)return w(e,n);const t=await parseBody(e.body,n);let s={};return s=Pn(t.AssumeRoleWithSAMLResult,n),{$metadata:g(e),...s}},tn=async(e,n)=>{if(e.statusCode>=300)return w(e,n);const t=await(0,Se.t_)(e.body,n);let s={};return s=xn(t.AssumeRoleWithWebIdentityResult,n),{$metadata:g(e),...s}},Os=async(e,n)=>{if(e.statusCode>=300)return w(e,n);const t=await parseBody(e.body,n);let s={};return s=_n(t.AssumeRootResult,n),{$metadata:g(e),...s}},Ns=async(e,n)=>{if(e.statusCode>=300)return w(e,n);const t=await parseBody(e.body,n);let s={};return s=bn(t.DecodeAuthorizationMessageResult,n),{$metadata:g(e),...s}},Hs=async(e,n)=>{if(e.statusCode>=300)return w(e,n);const t=await parseBody(e.body,n);let s={};return s=Dn(t.GetAccessKeyInfoResult,n),{$metadata:g(e),...s}},js=async(e,n)=>{if(e.statusCode>=300)return w(e,n);const t=await parseBody(e.body,n);let s={};return s=Wn(t.GetCallerIdentityResult,n),{$metadata:g(e),...s}},Vs=async(e,n)=>{if(e.statusCode>=300)return w(e,n);const t=await parseBody(e.body,n);let s={};return s=$n(t.GetFederationTokenResult,n),{$metadata:g(e),...s}},Bs=async(e,n)=>{if(e.statusCode>=300)return w(e,n);const t=await parseBody(e.body,n);let s={};return s=kn(t.GetSessionTokenResult,n),{$metadata:g(e),...s}},w=async(e,n)=>{const t={...e,body:await(0,Se.FI)(e.body,n)},s=Xn(e,t.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await nn(t,n);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await an(t,n);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await dn(t,n);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ln(t,n);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await on(t,n);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await cn(t,n);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await sn(t,n);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await rn(t,n);default:const o=t.body;return On({output:e,parsedBody:o.Error,errorCode:s})}},nn=async(e,n)=>{const t=e.body,s=Tn(t.Error,n),o=new de({$metadata:g(e),...s});return(0,r.decorateServiceException)(o,t)},sn=async(e,n)=>{const t=e.body,s=Mn(t.Error,n),o=new ye({$metadata:g(e),...s});return(0,r.decorateServiceException)(o,t)},on=async(e,n)=>{const t=e.body,s=zn(t.Error,n),o=new fe({$metadata:g(e),...s});return(0,r.decorateServiceException)(o,t)},rn=async(e,n)=>{const t=e.body,s=Fn(t.Error,n),o=new ge({$metadata:g(e),...s});return(0,r.decorateServiceException)(o,t)},cn=async(e,n)=>{const t=e.body,s=Ln(t.Error,n),o=new he({$metadata:g(e),...s});return(0,r.decorateServiceException)(o,t)},an=async(e,n)=>{const t=e.body,s=Gn(t.Error,n),o=new le({$metadata:g(e),...s});return(0,r.decorateServiceException)(o,t)},dn=async(e,n)=>{const t=e.body,s=Un(t.Error,n),o=new me({$metadata:g(e),...s});return(0,r.decorateServiceException)(o,t)},ln=async(e,n)=>{const t=e.body,s=Kn(t.Error,n),o=new ue({$metadata:g(e),...s});return(0,r.decorateServiceException)(o,t)},mn=(e,n)=>{const t={};if(e[F]!=null&&(t[F]=e[F]),e[Z]!=null&&(t[Z]=e[Z]),e[v]!=null){const s=se(e[v],n);e[v]?.length===0&&(t.PolicyArns=[]),Object.entries(s).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}if(e[C]!=null&&(t[C]=e[C]),e[y]!=null&&(t[y]=e[y]),e[q]!=null){const s=ot(e[q],n);e[q]?.length===0&&(t.Tags=[]),Object.entries(s).forEach(([o,a])=>{const i=`Tags.${o}`;t[i]=a})}if(e[He]!=null){const s=Cn(e[He],n);e[He]?.length===0&&(t.TransitiveTagKeys=[]),Object.entries(s).forEach(([o,a])=>{const i=`TransitiveTagKeys.${o}`;t[i]=a})}if(e[ve]!=null&&(t[ve]=e[ve]),e[Q]!=null&&(t[Q]=e[Q]),e[J]!=null&&(t[J]=e[J]),e[R]!=null&&(t[R]=e[R]),e[ke]!=null){const s=pn(e[ke],n);e[ke]?.length===0&&(t.ProvidedContexts=[]),Object.entries(s).forEach(([o,a])=>{const i=`ProvidedContexts.${o}`;t[i]=a})}return t},un=(e,n)=>{const t={};if(e[F]!=null&&(t[F]=e[F]),e[We]!=null&&(t[We]=e[We]),e[Ge]!=null&&(t[Ge]=e[Ge]),e[v]!=null){const s=se(e[v],n);e[v]?.length===0&&(t.PolicyArns=[]),Object.entries(s).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}return e[C]!=null&&(t[C]=e[C]),e[y]!=null&&(t[y]=e[y]),t},fn=(e,n)=>{const t={};if(e[F]!=null&&(t[F]=e[F]),e[Z]!=null&&(t[Z]=e[Z]),e[Be]!=null&&(t[Be]=e[Be]),e[Me]!=null&&(t[Me]=e[Me]),e[v]!=null){const s=se(e[v],n);e[v]?.length===0&&(t.PolicyArns=[]),Object.entries(s).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}return e[C]!=null&&(t[C]=e[C]),e[y]!=null&&(t[y]=e[y]),t},hn=(e,n)=>{const t={};if(e[Ne]!=null&&(t[Ne]=e[Ne]),e[rt]!=null){const s=st(e[rt],n);Object.entries(s).forEach(([o,a])=>{const i=`TaskPolicyArn.${o}`;t[i]=a})}return e[y]!=null&&(t[y]=e[y]),t},yn=(e,n)=>{const t={};return e[Pe]!=null&&(t[Pe]=e[Pe]),t},gn=(e,n)=>{const t={};return e[j]!=null&&(t[j]=e[j]),t},Sn=(e,n)=>({}),An=(e,n)=>{const t={};if(e[we]!=null&&(t[we]=e[we]),e[C]!=null&&(t[C]=e[C]),e[v]!=null){const s=se(e[v],n);e[v]?.length===0&&(t.PolicyArns=[]),Object.entries(s).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}if(e[y]!=null&&(t[y]=e[y]),e[q]!=null){const s=ot(e[q],n);e[q]?.length===0&&(t.Tags=[]),Object.entries(s).forEach(([o,a])=>{const i=`Tags.${o}`;t[i]=a})}return t},En=(e,n)=>{const t={};return e[y]!=null&&(t[y]=e[y]),e[Q]!=null&&(t[Q]=e[Q]),e[J]!=null&&(t[J]=e[J]),t},se=(e,n)=>{const t={};let s=1;for(const o of e){if(o===null)continue;const a=st(o,n);Object.entries(a).forEach(([i,p])=>{t[`member.${s}.${i}`]=p}),s++}return t},st=(e,n)=>{const t={};return e[Ze]!=null&&(t[Ze]=e[Ze]),t},Rn=(e,n)=>{const t={};return e[$e]!=null&&(t[$e]=e[$e]),e[pe]!=null&&(t[pe]=e[pe]),t},pn=(e,n)=>{const t={};let s=1;for(const o of e){if(o===null)continue;const a=Rn(o,n);Object.entries(a).forEach(([i,p])=>{t[`member.${s}.${i}`]=p}),s++}return t},In=(e,n)=>{const t={};return e[Te]!=null&&(t[Te]=e[Te]),e[Ve]!=null&&(t[Ve]=e[Ve]),t},Cn=(e,n)=>{const t={};let s=1;for(const o of e)o!==null&&(t[`member.${s}`]=o,s++);return t},ot=(e,n)=>{const t={};let s=1;for(const o of e){if(o===null)continue;const a=In(o,n);Object.entries(a).forEach(([i,p])=>{t[`member.${s}.${i}`]=p}),s++}return t},Ee=(e,n)=>{const t={};return e[Re]!=null&&(t[Re]=(0,r.expectString)(e[Re])),e[z]!=null&&(t[z]=(0,r.expectString)(e[z])),t},vn=(e,n)=>{const t={};return e[h]!=null&&(t[h]=H(e[h],n)),e[M]!=null&&(t[M]=Ee(e[M],n)),e[P]!=null&&(t[P]=(0,r.strictParseInt32)(e[P])),e[R]!=null&&(t[R]=(0,r.expectString)(e[R])),t},Pn=(e,n)=>{const t={};return e[h]!=null&&(t[h]=H(e[h],n)),e[M]!=null&&(t[M]=Ee(e[M],n)),e[P]!=null&&(t[P]=__strictParseInt32(e[P])),e[Fe]!=null&&(t[Fe]=__expectString(e[Fe])),e[Ke]!=null&&(t[Ke]=__expectString(e[Ke])),e[be]!=null&&(t[be]=__expectString(e[be])),e[B]!=null&&(t[B]=__expectString(e[B])),e[De]!=null&&(t[De]=__expectString(e[De])),e[R]!=null&&(t[R]=__expectString(e[R])),t},xn=(e,n)=>{const t={};return e[h]!=null&&(t[h]=H(e[h],n)),e[Ue]!=null&&(t[Ue]=(0,r.expectString)(e[Ue])),e[M]!=null&&(t[M]=Ee(e[M],n)),e[P]!=null&&(t[P]=(0,r.strictParseInt32)(e[P])),e[ze]!=null&&(t[ze]=(0,r.expectString)(e[ze])),e[B]!=null&&(t[B]=(0,r.expectString)(e[B])),e[R]!=null&&(t[R]=(0,r.expectString)(e[R])),t},_n=(e,n)=>{const t={};return e[h]!=null&&(t[h]=H(e[h],n)),e[R]!=null&&(t[R]=__expectString(e[R])),t},H=(e,n)=>{const t={};return e[j]!=null&&(t[j]=(0,r.expectString)(e[j])),e[Le]!=null&&(t[Le]=(0,r.expectString)(e[Le])),e[Oe]!=null&&(t[Oe]=(0,r.expectString)(e[Oe])),e[Ce]!=null&&(t[Ce]=(0,r.expectNonNull)((0,r.parseRfc3339DateTimeWithOffset)(e[Ce]))),t},bn=(e,n)=>{const t={};return e[Ie]!=null&&(t[Ie]=__expectString(e[Ie])),t},Tn=(e,n)=>{const t={};return e[u]!=null&&(t[u]=(0,r.expectString)(e[u])),t},wn=(e,n)=>{const t={};return e[_e]!=null&&(t[_e]=__expectString(e[_e])),e[z]!=null&&(t[z]=__expectString(e[z])),t},Dn=(e,n)=>{const t={};return e[V]!=null&&(t[V]=__expectString(e[V])),t},Wn=(e,n)=>{const t={};return e[je]!=null&&(t[je]=__expectString(e[je])),e[V]!=null&&(t[V]=__expectString(e[V])),e[z]!=null&&(t[z]=__expectString(e[z])),t},$n=(e,n)=>{const t={};return e[h]!=null&&(t[h]=H(e[h],n)),e[xe]!=null&&(t[xe]=wn(e[xe],n)),e[P]!=null&&(t[P]=__strictParseInt32(e[P])),t},kn=(e,n)=>{const t={};return e[h]!=null&&(t[h]=H(e[h],n)),t},Mn=(e,n)=>{const t={};return e[u]!=null&&(t[u]=(0,r.expectString)(e[u])),t},zn=(e,n)=>{const t={};return e[u]!=null&&(t[u]=(0,r.expectString)(e[u])),t},Fn=(e,n)=>{const t={};return e[u]!=null&&(t[u]=(0,r.expectString)(e[u])),t},Ln=(e,n)=>{const t={};return e[u]!=null&&(t[u]=(0,r.expectString)(e[u])),t},Gn=(e,n)=>{const t={};return e[u]!=null&&(t[u]=(0,r.expectString)(e[u])),t},Un=(e,n)=>{const t={};return e[u]!=null&&(t[u]=(0,r.expectString)(e[u])),t},Kn=(e,n)=>{const t={};return e[u]!=null&&(t[u]=(0,r.expectString)(e[u])),t},g=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Zs=(e,n)=>collectBody(e,n).then(t=>n.utf8Encoder(t)),On=(0,r.withBaseException)(x),D=async(e,n,t,s,o)=>{const{hostname:a,protocol:i="https",port:p,path:b}=await e.endpoint(),T={protocol:i,hostname:a,port:p,method:"POST",path:b.endsWith("/")?b.slice(0,-1)+t:b+t,headers:n};return s!==void 0&&(T.hostname=s),o!==void 0&&(T.body=o),new Ae.Kd(T)},W={"content-type":"application/x-www-form-urlencoded"},$="2011-06-15",k="Action",j="AccessKeyId",Nn="AssumeRole",Re="AssumedRoleId",M="AssumedRoleUser",Hn="AssumeRoleWithSAML",jn="AssumeRoleWithWebIdentity",Vn="AssumeRoot",V="Account",z="Arn",B="Audience",h="Credentials",pe="ContextAssertion",Bn="DecodeAuthorizationMessage",Ie="DecodedMessage",y="DurationSeconds",Ce="Expiration",ve="ExternalId",Pe="EncodedMessage",xe="FederatedUser",_e="FederatedUserId",Zn="GetAccessKeyInfo",Qn="GetCallerIdentity",qn="GetFederationToken",Jn="GetSessionToken",be="Issuer",Te="Key",we="Name",De="NameQualifier",C="Policy",v="PolicyArns",We="PrincipalArn",$e="ProviderArn",ke="ProvidedContexts",Me="ProviderId",P="PackedPolicySize",ze="Provider",F="RoleArn",Z="RoleSessionName",Fe="Subject",Le="SecretAccessKey",Ge="SAMLAssertion",Ue="SubjectFromWebIdentityToken",R="SourceIdentity",Q="SerialNumber",Ke="SubjectType",Oe="SessionToken",q="Tags",J="TokenCode",Ne="TargetPrincipal",rt="TaskPolicyArn",He="TransitiveTagKeys",je="UserId",L="Version",Ve="Value",Be="WebIdentityToken",Ze="arn",u="message",G=e=>Object.entries(e).map(([n,t])=>(0,r.extendedEncodeURIComponent)(n)+"="+(0,r.extendedEncodeURIComponent)(t)).join("&"),Xn=(e,n)=>{if(n.Error?.Code!==void 0)return n.Error.Code;if(e.statusCode==404)return"NotFound"};class Yn extends r.Command.classBuilder().ep(nt).m(function(n,t,s,o){return[(0,tt.TM)(s,this.serialize,this.deserialize),(0,ae.rD)(s,n.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Qt).ser(Xt).de(en).build(){}class es extends r.Command.classBuilder().ep(nt).m(function(n,t,s,o){return[(0,tt.TM)(s,this.serialize,this.deserialize),(0,ae.rD)(s,n.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(qt,Jt).ser(Yt).de(tn).build(){}const it="us-east-1",ct=e=>{if(typeof e?.Arn=="string"){const n=e.Arn.split(":");if(n.length>4&&n[4]!=="")return n[4]}},at=async(e,n,t)=>{const s=typeof e=="function"?await e():e,o=typeof n=="function"?await n():n;return t?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (provider)`,`${o} (parent client)`,`${it} (STS default)`),s??o??it},dt=(e,n)=>{let t,s;return async(o,a)=>{if(s=o,!t){const{logger:O=e?.parentClientConfig?.logger,region:ne,requestHandler:ie=e?.parentClientConfig?.requestHandler,credentialProviderLogger:et}=e,xs=await at(ne,e?.parentClientConfig?.region,et),_s=!mt(ie);t=new n({credentialDefaultProvider:()=>async()=>s,region:xs,requestHandler:_s?ie:void 0,logger:O})}const{Credentials:i,AssumedRoleUser:p}=await t.send(new Yn(a));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);const b=ct(p),T={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...b&&{accountId:b}};return(0,ce.g)(T,"CREDENTIALS_STS_ASSUME_ROLE","i"),T}},lt=(e,n)=>{let t;return async s=>{if(!t){const{logger:b=e?.parentClientConfig?.logger,region:T,requestHandler:O=e?.parentClientConfig?.requestHandler,credentialProviderLogger:ne}=e,ie=await at(T,e?.parentClientConfig?.region,ne),et=!mt(O);t=new n({region:ie,requestHandler:et?O:void 0,logger:b})}const{Credentials:o,AssumedRoleUser:a}=await t.send(new es(s));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);const i=ct(a),p={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...i&&{accountId:i}};return i&&(0,ce.g)(p,"RESOLVED_ACCOUNT_ID","T"),(0,ce.g)(p,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),p}},Qs=e=>n=>e({roleAssumer:dt(n,n.stsClientCtor),roleAssumerWithWebIdentity:lt(n,n.stsClientCtor),...n}),mt=e=>e?.metadata?.handlerProtocol==="h2";var ut=d(45703),ts=d(90111),ns=d(2649),ft=d(16241),ee=d(57801),te=d(25158),ss=d(51320),oe=d(25263),os=d(44421),ht=d(42952);const rs=async(e,n,t)=>({operation:(0,ht.u)(n).operation,region:await(0,ht.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function is(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(n,t)=>({signingProperties:{config:n,context:t}})}}function yt(e){return{schemeId:"smithy.api#noAuth"}}const cs=e=>{const n=[];switch(e.operation){case"AssumeRoleWithSAML":{n.push(yt(e));break}case"AssumeRoleWithWebIdentity":{n.push(yt(e));break}default:n.push(is(e))}return n},as=e=>({...e,stsClientCtor:Ye}),ds=e=>{const n=as(e);return{...(0,os.h)(n)}},ls={rE:"3.693.0"};var ms=d(45570),gt=d(93482),St=d(2673),At=d(52039),us=d(51461),X=d(75854),Et=d(32117),fs=d(88226),hs=d(94134),ys=d(42640),Rt=d(61821),pt=d(82869),gs=d(22780),Qe=d(5332);const It="required",c="type",l="fn",m="argv",U="ref",Ct=!1,qe=!0,K="booleanEquals",S="stringEquals",vt="sigv4",Pt="sts",xt="us-east-1",f="endpoint",_t="https://sts.{Region}.{PartitionResult#dnsSuffix}",_="tree",Y="error",Je="getAttr",bt={[It]:!1,[c]:"String"},Xe={[It]:!0,default:!1,[c]:"Boolean"},Tt={[U]:"Endpoint"},wt={[l]:"isSet",[m]:[{[U]:"Region"}]},A={[U]:"Region"},Dt={[l]:"aws.partition",[m]:[A],assign:"PartitionResult"},Wt={[U]:"UseFIPS"},$t={[U]:"UseDualStack"},E={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:vt,signingName:Pt,signingRegion:xt}]},headers:{}},I={},kt={conditions:[{[l]:S,[m]:[A,"aws-global"]}],[f]:E,[c]:f},Mt={[l]:K,[m]:[Wt,!0]},zt={[l]:K,[m]:[$t,!0]},Ft={[l]:Je,[m]:[{[U]:"PartitionResult"},"supportsFIPS"]},Lt={[U]:"PartitionResult"},Gt={[l]:K,[m]:[!0,{[l]:Je,[m]:[Lt,"supportsDualStack"]}]},Ut=[{[l]:"isSet",[m]:[Tt]}],Kt=[Mt],Ot=[zt],Ss={version:"1.0",parameters:{Region:bt,UseDualStack:Xe,UseFIPS:Xe,Endpoint:bt,UseGlobalEndpoint:Xe},rules:[{conditions:[{[l]:K,[m]:[{[U]:"UseGlobalEndpoint"},qe]},{[l]:"not",[m]:Ut},wt,Dt,{[l]:K,[m]:[Wt,Ct]},{[l]:K,[m]:[$t,Ct]}],rules:[{conditions:[{[l]:S,[m]:[A,"ap-northeast-1"]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,"ap-south-1"]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,"ap-southeast-1"]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,"ap-southeast-2"]}],endpoint:E,[c]:f},kt,{conditions:[{[l]:S,[m]:[A,"ca-central-1"]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,"eu-central-1"]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,"eu-north-1"]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,"eu-west-1"]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,"eu-west-2"]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,"eu-west-3"]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,"sa-east-1"]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,xt]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,"us-east-2"]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,"us-west-1"]}],endpoint:E,[c]:f},{conditions:[{[l]:S,[m]:[A,"us-west-2"]}],endpoint:E,[c]:f},{endpoint:{url:_t,properties:{authSchemes:[{name:vt,signingName:Pt,signingRegion:"{Region}"}]},headers:I},[c]:f}],[c]:_},{conditions:Ut,rules:[{conditions:Kt,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[c]:Y},{conditions:Ot,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[c]:Y},{endpoint:{url:Tt,properties:I,headers:I},[c]:f}],[c]:_},{conditions:[wt],rules:[{conditions:[Dt],rules:[{conditions:[Mt,zt],rules:[{conditions:[{[l]:K,[m]:[qe,Ft]},Gt],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:I,headers:I},[c]:f}],[c]:_},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[c]:Y}],[c]:_},{conditions:Kt,rules:[{conditions:[{[l]:K,[m]:[Ft,qe]}],rules:[{conditions:[{[l]:S,[m]:[{[l]:Je,[m]:[Lt,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:I,headers:I},[c]:f},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:I,headers:I},[c]:f}],[c]:_},{error:"FIPS is enabled but this partition does not support FIPS",[c]:Y}],[c]:_},{conditions:Ot,rules:[{conditions:[Gt],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:I,headers:I},[c]:f}],[c]:_},{error:"DualStack is enabled but this partition does not support DualStack",[c]:Y}],[c]:_},kt,{endpoint:{url:_t,properties:I,headers:I},[c]:f}],[c]:_}],[c]:_},{error:"Invalid Configuration: Missing Region",[c]:Y}]},As=new Qe.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),Es=(e,n={})=>As.get(e,()=>(0,Qe.sO)(Ss,{endpointParams:e,logger:n.logger}));Qe.mw.aws=gs.UF;const Rs=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Rt.E,base64Encoder:e?.base64Encoder??Rt.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Es,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??cs,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:n=>n.getIdentityProvider("aws.auth#sigv4"),signer:new gt.f2},{schemeId:"smithy.api#noAuth",identityProvider:n=>n.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new te.mR}],logger:e?.logger??new r.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??ys.D,utf8Decoder:e?.utf8Decoder??pt.ar,utf8Encoder:e?.utf8Encoder??pt.Pq});var ps=d(12165);const Is=e=>{(0,r.emitWarningIfUnsupportedVersion)(process.version);const n=(0,ps.I)(e),t=()=>n().then(r.loadConfigsForDefaultMode),s=Rs(e);return(0,ms.I)(process.version),{...s,...e,runtime:"node",defaultsMode:n,bodyLengthChecker:e?.bodyLengthChecker??fs.n,credentialDefaultProvider:e?.credentialDefaultProvider??St.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,At.pf)({serviceId:s.serviceId,clientVersion:ls.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async a=>await(0,St.v6)(a?.__config||{})()),signer:new gt.f2},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new te.mR}],maxAttempts:e?.maxAttempts??(0,X.Z)(oe.qs),region:e?.region??(0,X.Z)(ee.GG,ee.zH),requestHandler:Et.$c.create(e?.requestHandler??t),retryMode:e?.retryMode??(0,X.Z)({...oe.kN,default:async()=>(await t()).retryMode||hs.L0}),sha256:e?.sha256??us.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Et.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,X.Z)(ee.e$),useFipsEndpoint:e?.useFipsEndpoint??(0,X.Z)(ee.Ko),userAgentAppId:e?.userAgentAppId??(0,X.Z)(At.hV)}};var Nt=d(54848);const Cs=e=>{const n=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(o){const a=n.findIndex(i=>i.schemeId===o.schemeId);a===-1?n.push(o):n.splice(a,1,o)},httpAuthSchemes(){return n},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){s=o},credentials(){return s}}},vs=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),re=e=>e,Ps=(e,n)=>{const t={...re((0,Nt.Rq)(e)),...re((0,r.getDefaultExtensionConfiguration)(e)),...re((0,Ae.eS)(e)),...re(Cs(e))};return n.forEach(s=>s.configure(t)),{...e,...(0,Nt.$3)(t),...(0,r.resolveDefaultRuntimeConfig)(t),...(0,Ae.jt)(t),...vs(t)}};class Ye extends r.Client{constructor(...[n]){const t=Is(n||{}),s=Zt(t),o=(0,ft.Dc)(s),a=(0,oe.$z)(o),i=(0,ee.TD)(a),p=(0,ut.OV)(i),b=(0,ae.Co)(p),T=ds(b),O=Ps(T,n?.extensions||[]);super(O),this.config=O,this.middlewareStack.use((0,ft.sM)(this.config)),this.middlewareStack.use((0,oe.ey)(this.config)),this.middlewareStack.use((0,ss.vK)(this.config)),this.middlewareStack.use((0,ut.TC)(this.config)),this.middlewareStack.use((0,ts.Y7)(this.config)),this.middlewareStack.use((0,ns.n4)(this.config)),this.middlewareStack.use((0,te.wB)(this.config,{httpAuthSchemeParametersProvider:rs,identityProviderConfigProvider:async ne=>new te.h$({"aws.auth#sigv4":ne.credentials})})),this.middlewareStack.use((0,te.lW)(this.config))}destroy(){super.destroy()}}const Ht=(e,n)=>n?class extends e{constructor(s){super(s);for(const o of n)this.middlewareStack.use(o)}}:e,jt=(e={},n)=>dt(e,Ht(Ye,n)),Vt=(e={},n)=>lt(e,Ht(Ye,n)),Js=e=>n=>e({roleAssumer:jt(n),roleAssumerWithWebIdentity:Vt(n),...n})}};
