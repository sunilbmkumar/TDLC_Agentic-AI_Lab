"use strict";var St=Object.defineProperty;var Et=(I,f,o)=>f in I?St(I,f,{enumerable:!0,configurable:!0,writable:!0,value:o}):I[f]=o;var S=(I,f,o)=>(Et(I,typeof f!="symbol"?f+"":f,o),o);exports.id=171,exports.ids=[171],exports.modules={74171:(I,f,o)=>{o.d(f,{GetRoleCredentialsCommand:()=>_e,SSOClient:()=>ht});var $=o(90325),J=o(89744),i=o(96572);const W=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),ne={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class R extends i.TJ{constructor(s){super(s),Object.setPrototypeOf(this,R.prototype)}}class D extends R{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t});S(this,"name","InvalidRequestException");S(this,"$fault","client");Object.setPrototypeOf(this,D.prototype)}}class O extends R{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t});S(this,"name","ResourceNotFoundException");S(this,"$fault","client");Object.setPrototypeOf(this,O.prototype)}}class F extends R{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t});S(this,"name","TooManyRequestsException");S(this,"$fault","client");Object.setPrototypeOf(this,F.prototype)}}class k extends R{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t});S(this,"name","UnauthorizedException");S(this,"$fault","client");Object.setPrototypeOf(this,k.prototype)}}const L=e=>({...e,...e.accessToken&&{accessToken:i.$H}}),V=e=>({...e,...e.secretAccessKey&&{secretAccessKey:i.$H},...e.sessionToken&&{sessionToken:i.$H}}),_=e=>({...e,...e.roleCredentials&&{roleCredentials:V(e.roleCredentials)}}),oe=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}}),Y=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}}),K=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}});var C=o(43351),A=o(23464);const Q=async(e,s)=>{const t=(0,A.lI)(e,s),d=(0,i.Tj)({},i.eU,{[H]:e[M]});t.bp("/federation/credentials");const a=(0,i.Tj)({[Ve]:[,(0,i.Y0)(e[Le],"roleName")],[le]:[,(0,i.Y0)(e[P],"accountId")]});let m;return t.m("GET").h(d).q(a).b(m),t.build()},re=async(e,s)=>{const t=rb(e,s),d=map({},isSerializableHeaderValue,{[H]:e[M]});t.bp("/assignment/roles");const a=map({[me]:[,e[he]],[pe]:[()=>e.maxResults!==void 0,()=>e[ue].toString()],[le]:[,__expectNonNull(e[P],"accountId")]});let m;return t.m("GET").h(d).q(a).b(m),t.build()},z=async(e,s)=>{const t=rb(e,s),d=map({},isSerializableHeaderValue,{[H]:e[M]});t.bp("/assignment/accounts");const a=map({[me]:[,e[he]],[pe]:[()=>e.maxResults!==void 0,()=>e[ue].toString()]});let m;return t.m("GET").h(d).q(a).b(m),t.build()},ie=async(e,s)=>{const t=rb(e,s),d=map({},isSerializableHeaderValue,{[H]:e[M]});t.bp("/logout");let a;return t.m("POST").h(d).b(a),t.build()},X=async(e,s)=>{if(e.statusCode!==200&&e.statusCode>=300)return n(e,s);const t=(0,i.Tj)({$metadata:r(e)}),d=(0,i.Y0)((0,i.Xk)(await(0,C.Y2)(e.body,s)),"body"),a=(0,i.s)(d,{roleCredentials:i.Ss});return Object.assign(t,a),t},ae=async(e,s)=>{if(e.statusCode!==200&&e.statusCode>=300)return n(e,s);const t=map({$metadata:r(e)}),d=__expectNonNull(__expectObject(await parseBody(e.body,s)),"body"),a=take(d,{nextToken:__expectString,roleList:_json});return Object.assign(t,a),t},ce=async(e,s)=>{if(e.statusCode!==200&&e.statusCode>=300)return n(e,s);const t=map({$metadata:r(e)}),d=__expectNonNull(__expectObject(await parseBody(e.body,s)),"body"),a=take(d,{accountList:_json,nextToken:__expectString});return Object.assign(t,a),t},de=async(e,s)=>{if(e.statusCode!==200&&e.statusCode>=300)return n(e,s);const t=map({$metadata:r(e)});return await collectBody(e.body,s),t},n=async(e,s)=>{const t={...e,body:await(0,C.CG)(e.body,s)},d=(0,C.cJ)(e,t.body);switch(d){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await c(t,s);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await p(t,s);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await l(t,s);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await h(t,s);default:const a=t.body;return u({output:e,parsedBody:a,errorCode:d})}},u=(0,i.jr)(R),c=async(e,s)=>{const t=(0,i.Tj)({}),d=e.body,a=(0,i.s)(d,{message:i.lK});Object.assign(t,a);const m=new D({$metadata:r(e),...t});return(0,i.Mw)(m,e.body)},p=async(e,s)=>{const t=(0,i.Tj)({}),d=e.body,a=(0,i.s)(d,{message:i.lK});Object.assign(t,a);const m=new O({$metadata:r(e),...t});return(0,i.Mw)(m,e.body)},l=async(e,s)=>{const t=(0,i.Tj)({}),d=e.body,a=(0,i.s)(d,{message:i.lK});Object.assign(t,a);const m=new F({$metadata:r(e),...t});return(0,i.Mw)(m,e.body)},h=async(e,s)=>{const t=(0,i.Tj)({}),d=e.body,a=(0,i.s)(d,{message:i.lK});Object.assign(t,a);const m=new k({$metadata:r(e),...t});return(0,i.Mw)(m,e.body)},r=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),x=(e,s)=>collectBody(e,s).then(t=>s.utf8Encoder(t)),P="accountId",M="accessToken",le="account_id",ue="maxResults",pe="max_result",he="nextToken",me="next_token",Le="roleName",Ve="role_name",H="x-amz-sso_bearer_token";class _e extends i.uB.classBuilder().ep(ne).m(function(s,t,d,a){return[(0,J.TM)(d,this.serialize,this.deserialize),(0,$.rD)(d,s.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(L,_).ser(Q).de(X).build(){}var ge=o(48735),Me=o(71815),He=o(44833),ye=o(83174),j=o(40777),Ge=o(71905),G=o(80339),Be=o(37376),ve=o(61415);const Ze=async(e,s,t)=>({operation:(0,ve.u)(s).operation,region:await(0,ve.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Je(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(s,t)=>({signingProperties:{config:s,context:t}})}}function B(e){return{schemeId:"smithy.api#noAuth"}}const We=e=>{const s=[];switch(e.operation){case"GetRoleCredentials":{s.push(B(e));break}case"ListAccountRoles":{s.push(B(e));break}case"ListAccounts":{s.push(B(e));break}case"Logout":{s.push(B(e));break}default:s.push(Je(e))}return s},Ye=e=>({...(0,Be.h)(e)}),Ke={rE:"3.731.0"};var Qe=o(12106),fe=o(8732),Xe=o(62845),b=o(25691),Se=o(46215),qe=o(59753),et=o(35155),tt=o(13884),st=o(99993),Ee=o(65860),Re=o(42677),nt=o(87220),q=o(59161);const Pe="required",g="fn",y="argv",w="ref",Ie=!0,Ae="isSet",U="booleanEquals",T="error",N="endpoint",E="tree",ee="PartitionResult",te="getAttr",Ce={[Pe]:!1,type:"String"},xe={[Pe]:!0,default:!1,type:"Boolean"},be={[w]:"Endpoint"},we={[g]:U,[y]:[{[w]:"UseFIPS"},!0]},Te={[g]:U,[y]:[{[w]:"UseDualStack"},!0]},v={},Ne={[g]:te,[y]:[{[w]:ee},"supportsFIPS"]},De={[w]:ee},Oe={[g]:U,[y]:[!0,{[g]:te,[y]:[De,"supportsDualStack"]}]},Fe=[we],ke=[Te],ze=[{[w]:"Region"}],ot={version:"1.0",parameters:{Region:Ce,UseDualStack:xe,UseFIPS:xe,Endpoint:Ce},rules:[{conditions:[{[g]:Ae,[y]:[be]}],rules:[{conditions:Fe,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:T},{conditions:ke,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:T},{endpoint:{url:be,properties:v,headers:v},type:N}],type:E},{conditions:[{[g]:Ae,[y]:ze}],rules:[{conditions:[{[g]:"aws.partition",[y]:ze,assign:ee}],rules:[{conditions:[we,Te],rules:[{conditions:[{[g]:U,[y]:[Ie,Ne]},Oe],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:v,headers:v},type:N}],type:E},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:T}],type:E},{conditions:Fe,rules:[{conditions:[{[g]:U,[y]:[Ne,Ie]}],rules:[{conditions:[{[g]:"stringEquals",[y]:[{[g]:te,[y]:[De,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:v,headers:v},type:N},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:v,headers:v},type:N}],type:E},{error:"FIPS is enabled but this partition does not support FIPS",type:T}],type:E},{conditions:ke,rules:[{conditions:[Oe],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:v,headers:v},type:N}],type:E},{error:"DualStack is enabled but this partition does not support DualStack",type:T}],type:E},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:v,headers:v},type:N}],type:E}],type:E},{error:"Invalid Configuration: Missing Region",type:T}]},rt=new q.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),it=(e,s={})=>rt.get(e,()=>(0,q.sO)(ot,{endpointParams:e,logger:s.logger}));q.mw.aws=nt.UF;const at=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Ee.E,base64Encoder:e?.base64Encoder??Ee.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??it,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??We,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new tt.f2},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new A.mR}],logger:e?.logger??new i.N4,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??st.D,utf8Decoder:e?.utf8Decoder??Re.ar,utf8Encoder:e?.utf8Encoder??Re.Pq});var ct=o(17449);const dt=e=>{(0,i.I9)(process.version);const s=(0,ct.I)(e),t=()=>s().then(i.lT),d=at(e);(0,Qe.I)(process.version);const a={profile:e?.profile};return{...d,...e,runtime:"node",defaultsMode:s,bodyLengthChecker:e?.bodyLengthChecker??qe.n,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,fe.pf)({serviceId:d.serviceId,clientVersion:Ke.rE}),maxAttempts:e?.maxAttempts??(0,b.Z)(G.qs,e),region:e?.region??(0,b.Z)(j.GG,{...j.zH,...a}),requestHandler:Se.$c.create(e?.requestHandler??t),retryMode:e?.retryMode??(0,b.Z)({...G.kN,default:async()=>(await t()).retryMode||et.L0},e),sha256:e?.sha256??Xe.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Se.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,b.Z)(j.e$,a),useFipsEndpoint:e?.useFipsEndpoint??(0,b.Z)(j.Ko,a),userAgentAppId:e?.userAgentAppId??(0,b.Z)(fe.hV,a)}};var je=o(18232),Ue=o(7711);const lt=e=>{const s=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,d=e.credentials;return{setHttpAuthScheme(a){const m=s.findIndex(se=>se.schemeId===a.schemeId);m===-1?s.push(a):s.splice(m,1,a)},httpAuthSchemes(){return s},setHttpAuthSchemeProvider(a){t=a},httpAuthSchemeProvider(){return t},setCredentials(a){d=a},credentials(){return d}}},ut=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Z=e=>e,pt=(e,s)=>{const t={...Z((0,je.Rq)(e)),...Z((0,i.xA)(e)),...Z((0,Ue.eS)(e)),...Z(lt(e))};return s.forEach(d=>d.configure(t)),{...e,...(0,je.$3)(t),...(0,i.uv)(t),...(0,Ue.jt)(t),...ut(t)}};class ht extends i.Kj{constructor(...[t]){const d=dt(t||{}),a=W(d),m=(0,ye.Dc)(a),se=(0,G.$z)(m),mt=(0,j.TD)(se),gt=(0,ge.OV)(mt),yt=(0,$.Co)(gt),vt=Ye(yt),$e=pt(vt,t?.extensions||[]);super($e);S(this,"config");this.config=$e,this.middlewareStack.use((0,ye.sM)(this.config)),this.middlewareStack.use((0,G.ey)(this.config)),this.middlewareStack.use((0,Ge.vK)(this.config)),this.middlewareStack.use((0,ge.TC)(this.config)),this.middlewareStack.use((0,Me.Y7)(this.config)),this.middlewareStack.use((0,He.n4)(this.config)),this.middlewareStack.use((0,A.wB)(this.config,{httpAuthSchemeParametersProvider:Ze,identityProviderConfigProvider:async ft=>new A.h$({"aws.auth#sigv4":ft.credentials})})),this.middlewareStack.use((0,A.lW)(this.config))}destroy(){super.destroy()}}},90325:(I,f,o)=>{o.d(f,{rD:()=>ce,Co:()=>de});const $=async n=>{const u=n?.Bucket||"";if(typeof n.Bucket=="string"&&(n.Bucket=u.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),O(u)){if(n.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!D(u)||u.indexOf(".")!==-1&&!String(n.Endpoint).startsWith("http:")||u.toLowerCase()!==u||u.length<3)&&(n.ForcePathStyle=!0);return n.DisableMultiRegionAccessPoints&&(n.disableMultiRegionAccessPoints=!0,n.DisableMRAP=!0),n},J=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,i=/(\d+\.){3}\d+/,W=/\.\./,ne=/\./,R=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,D=n=>J.test(n)&&!i.test(n)&&!W.test(n),O=n=>{const[u,c,p,,,l]=n.split(":"),h=u==="arn"&&n.split(":").length>=6,r=Boolean(h&&c&&p&&l);if(h&&!r)throw new Error(`Invalid ARN: ${n} was an invalid ARN.`);return r},F=(n,u,c)=>{const p=async()=>{const l=c[n]??c[u];return typeof l=="function"?l():l};return n==="credentialScope"||u==="CredentialScope"?async()=>{const l=typeof c.credentials=="function"?await c.credentials():c.credentials;return l?.credentialScope??l?.CredentialScope}:n==="accountId"||u==="AccountId"?async()=>{const l=typeof c.credentials=="function"?await c.credentials():c.credentials;return l?.accountId??l?.AccountId}:n==="endpoint"||u==="endpoint"?async()=>{const l=await p();if(l&&typeof l=="object"){if("url"in l)return l.url.href;if("hostname"in l){const{protocol:h,hostname:r,port:x,path:P}=l;return`${h}//${r}${x?":"+x:""}${P}`}}return l}:p};var k=o(25691),L=o(16950);const V="AWS_ENDPOINT_URL",_="endpoint_url",oe=n=>({environmentVariableSelector:u=>{const c=n.split(" ").map(h=>h.toUpperCase()),p=u[[V,...c].join("_")];if(p)return p;const l=u[V];if(l)return l},configFileSelector:(u,c)=>{if(c&&u.services){const l=c[["services",u.services].join(L.QD)];if(l){const h=n.split(" ").map(x=>x.toLowerCase()),r=l[[h.join("_"),_].join(L.QD)];if(r)return r}}const p=u[_];if(p)return p},default:void 0}),Y=async n=>(0,k.Z)(oe(n??""))();var K=o(99993);const C=n=>typeof n=="object"?"url"in n?(0,K.D)(n.url):n:(0,K.D)(n),A=async(n,u,c,p)=>{if(!c.endpoint){let r;c.serviceConfiguredEndpoint?r=await c.serviceConfiguredEndpoint():r=await Y(c.serviceId),r&&(c.endpoint=()=>Promise.resolve(C(r)))}const l=await Q(n,u,c);if(typeof c.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return c.endpointProvider(l,p)},Q=async(n,u,c)=>{const p={},l=u?.getEndpointParameterInstructions?.()||{};for(const[h,r]of Object.entries(l))switch(r.type){case"staticContextParams":p[h]=r.value;break;case"contextParams":p[h]=n[r.name];break;case"clientContextParams":case"builtInParams":p[h]=await F(r.name,h,c)();break;case"operationContextParams":p[h]=r.get(n);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(r))}return Object.keys(l).length===0&&Object.assign(p,c),String(c.serviceId).toLowerCase()==="s3"&&await $(p),p};var re=o(23464),z=o(61415);const ie=({config:n,instructions:u})=>(c,p)=>async l=>{n.endpoint&&(0,re.J7)(p,"ENDPOINT_OVERRIDE","N");const h=await A(l.input,{getEndpointParameterInstructions(){return u}},{...n},p);p.endpointV2=h,p.authSchemes=h.properties?.authSchemes;const r=p.authSchemes?.[0];if(r){p.signing_region=r.signingRegion,p.signing_service=r.signingName;const P=(0,z.u)(p)?.selectedHttpAuthScheme?.httpAuthOption;P&&(P.signingProperties=Object.assign(P.signingProperties||{},{signing_region:r.signingRegion,signingRegion:r.signingRegion,signing_service:r.signingName,signingName:r.signingName,signingRegionSet:r.signingRegionSet},r.properties))}return c({...l})};var X=o(89744);const ae={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:X.Ou.name},ce=(n,u)=>({applyToStack:c=>{c.addRelativeTo(ie({config:n,instructions:u}),ae)}}),de=n=>{const u=n.tls??!0,{endpoint:c}=n,p=c!=null?async()=>C(await(0,z.t)(c)()):void 0,h={...n,endpoint:p,tls:u,isCustomEndpoint:!!c,useDualstackEndpoint:(0,z.t)(n.useDualstackEndpoint??!1),useFipsEndpoint:(0,z.t)(n.useFipsEndpoint??!1)};let r;return h.serviceConfiguredEndpoint=async()=>(n.serviceId&&!r&&(r=Y(n.serviceId)),r),h}}};
