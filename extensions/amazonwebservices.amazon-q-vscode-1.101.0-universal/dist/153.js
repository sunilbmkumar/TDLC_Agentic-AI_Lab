"use strict";var Un=Object.defineProperty;var zn=(O,I,u)=>I in O?Un(O,I,{enumerable:!0,configurable:!0,writable:!0,value:u}):O[I]=u;var c=(O,I,u)=>(zn(O,typeof I!="symbol"?I+"":I,u),u);exports.id=153,exports.ids=[153],exports.modules={82153:(O,I,u)=>{u.d(I,{CreateTokenCommand:()=>nt,SSOOIDCClient:()=>tt});var pe=u(54306),rt=u(33086),ot=u(13560),ge=u(81884),U=u(61230),y=u(92949),it=u(85668);const at=async e=>{const n=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=n.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),ht(n)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!ut(n)||n.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||n.toLowerCase()!==n||n.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},ct=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,dt=/(\d+\.){3}\d+/,lt=/\.\./,Hn=/\./,Mn=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,ut=e=>ct.test(e)&&!dt.test(e)&&!lt.test(e),ht=e=>{const[n,t,s,,,r]=e.split(":"),o=n==="arn"&&e.split(":").length>=6,a=Boolean(o&&t&&s&&r);if(o&&!a)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return a},pt=(e,n,t)=>{const s=async()=>{const r=t[e]??t[n];return typeof r=="function"?r():r};return e==="credentialScope"||n==="CredentialScope"?async()=>{const r=typeof t.credentials=="function"?await t.credentials():t.credentials;return r?.credentialScope??r?.CredentialScope}:e==="accountId"||n==="AccountId"?async()=>{const r=typeof t.credentials=="function"?await t.credentials():t.credentials;return r?.accountId??r?.AccountId}:e==="endpoint"||n==="endpoint"?async()=>{const r=await s();if(r&&typeof r=="object"){if("url"in r)return r.url.href;if("hostname"in r){const{protocol:o,hostname:a,port:d,path:l}=r;return`${o}//${a}${d?":"+d:""}${l}`}}return r}:s};var D=u(62661),fe=u(48607);const me="AWS_ENDPOINT_URL",ye="endpoint_url",gt=e=>({environmentVariableSelector:n=>{const t=e.split(" ").map(o=>o.toUpperCase()),s=n[[me,...t].join("_")];if(s)return s;const r=n[me];if(r)return r},configFileSelector:(n,t)=>{if(t&&n.services){const r=t[["services",n.services].join(fe.QD)];if(r){const o=e.split(" ").map(d=>d.toLowerCase()),a=r[[o.join("_"),ye].join(fe.QD)];if(a)return a}}const s=n[ye];if(s)return s},default:void 0}),we=async e=>(0,D.Z)(gt(e??""))();var B=u(91964);const Se=e=>typeof e=="object"?"url"in e?(0,B.D)(e.url):e:(0,B.D)(e),ft=async(e,n,t,s)=>{if(!t.endpoint){let a;t.serviceConfiguredEndpoint?a=await t.serviceConfiguredEndpoint():a=await we(t.serviceId),a&&(t.endpoint=()=>Promise.resolve(Se(a)))}const r=await mt(e,n,t);if(typeof t.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return t.endpointProvider(r,s)},mt=async(e,n,t)=>{const s={},r=n?.getEndpointParameterInstructions?.()||{};for(const[o,a]of Object.entries(r))switch(a.type){case"staticContextParams":s[o]=a.value;break;case"contextParams":s[o]=e[a.name];break;case"clientContextParams":case"builtInParams":s[o]=await pt(a.name,o,t)();break;case"operationContextParams":s[o]=a.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(r).length===0&&Object.assign(s,t),String(t.serviceId).toLowerCase()==="s3"&&await at(s),s};var b=u(55636);const yt=({config:e,instructions:n})=>(t,s)=>async r=>{e.endpoint&&(0,y.J7)(s,"ENDPOINT_OVERRIDE","N");const o=await ft(r.input,{getEndpointParameterInstructions(){return n}},{...e},s);s.endpointV2=o,s.authSchemes=o.properties?.authSchemes;const a=s.authSchemes?.[0];if(a){s.signing_region=a.signingRegion,s.signing_service=a.signingName;const l=(0,b.u)(s)?.selectedHttpAuthScheme?.httpAuthOption;l&&(l.signingProperties=Object.assign(l.signingProperties||{},{signing_region:a.signingRegion,signingRegion:a.signingRegion,signing_service:a.signingName,signingName:a.signingName,signingRegionSet:a.signingRegionSet},a.properties))}return t({...r})};var ve=u(55041);const wt={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:ve.Ou.name},St=(e,n)=>({applyToStack:t=>{t.addRelativeTo(yt({config:e,instructions:n}),wt)}}),vt=e=>{const n=e.tls??!0,{endpoint:t}=e,s=t!=null?async()=>Se(await(0,b.t)(t)()):void 0,o={...e,endpoint:s,tls:n,isCustomEndpoint:!!t,useDualstackEndpoint:(0,b.t)(e.useDualstackEndpoint??!1),useFipsEndpoint:(0,b.t)(e.useFipsEndpoint??!1)};let a;return o.serviceConfiguredEndpoint=async()=>(e.serviceId&&!a&&(a=we(e.serviceId)),a),o};var M=u(31382),i=u(66380);function Et(e,n,t){return e.$source||(e.$source={}),e.$source[n]=t,e}var P=u(52685),K=u(66416),C=u(178);const At="X-Amz-Algorithm",It="X-Amz-Credential",Ee="X-Amz-Date",Ct="X-Amz-SignedHeaders",xt="X-Amz-Expires",Ae="X-Amz-Signature",Ie="X-Amz-Security-Token",Kn="X-Amz-Region-Set",Ce="authorization",xe=Ee.toLowerCase(),Rt=[Ce,xe,"date"],bt=Ae.toLowerCase(),W="x-amz-content-sha256",Pt=Ie.toLowerCase(),Ln="host",Dt={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Tt=/^proxy-/,Ot=/^sec-/,Vn=null,X="AWS4-HMAC-SHA256",Gn="AWS4-ECDSA-P256-SHA256",kt="AWS4-HMAC-SHA256-PAYLOAD",$t="UNSIGNED-PAYLOAD",Nt=50,Re="aws4_request",jt=60*60*24*7,k={},F=[],Q=(e,n,t)=>`${e}/${n}/${t}/${Re}`,_t=async(e,n,t,s,r)=>{const o=await be(e,n.secretAccessKey,n.accessKeyId),a=`${t}:${s}:${r}:${(0,P.n)(o)}:${n.sessionToken}`;if(a in k)return k[a];for(F.push(a);F.length>Nt;)delete k[F.shift()];let d=`AWS4${n.secretAccessKey}`;for(const l of[t,s,r,Re])d=await be(e,d,l);return k[a]=d},Bn=()=>{F.length=0,Object.keys(k).forEach(e=>{delete k[e]})},be=(e,n,t)=>{const s=new e(n);return s.update((0,C.Fo)(t)),s.digest()},Pe=({headers:e},n,t)=>{const s={};for(const r of Object.keys(e).sort()){if(e[r]==null)continue;const o=r.toLowerCase();(o in Dt||n?.has(o)||Tt.test(o)||Ot.test(o))&&(!t||t&&!t.has(o))||(s[o]=e[r].trim().replace(/\s+/g," "))}return s},Ut=({query:e={}})=>{const n=[],t={};for(const s of Object.keys(e)){if(s.toLowerCase()===bt)continue;const r=(0,K.o)(s);n.push(r);const o=e[s];typeof o=="string"?t[r]=`${r}=${(0,K.o)(o)}`:Array.isArray(o)&&(t[r]=o.slice(0).reduce((a,d)=>a.concat([`${r}=${(0,K.o)(d)}`]),[]).sort().join("&"))}return n.sort().map(s=>t[s]).filter(s=>s).join("&")};var zt=u(26);const Z=async({headers:e,body:n},t)=>{for(const s of Object.keys(e))if(s.toLowerCase()===W)return e[s];if(n==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof n=="string"||ArrayBuffer.isView(n)||(0,zt.m)(n)){const s=new t;return s.update((0,C.Fo)(n)),(0,P.n)(await s.digest())}return $t};class Ht{format(n){const t=[];for(const o of Object.keys(n)){const a=(0,C.ar)(o);t.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(n[o]))}const s=new Uint8Array(t.reduce((o,a)=>o+a.byteLength,0));let r=0;for(const o of t)s.set(o,r),r+=o.byteLength;return s}formatHeaderValue(n){switch(n.type){case"boolean":return Uint8Array.from([n.value?0:1]);case"byte":return Uint8Array.from([2,n.value]);case"short":const t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,n.value,!1),new Uint8Array(t.buffer);case"integer":const s=new DataView(new ArrayBuffer(5));return s.setUint8(0,4),s.setInt32(1,n.value,!1),new Uint8Array(s.buffer);case"long":const r=new Uint8Array(9);return r[0]=5,r.set(n.value.bytes,1),r;case"binary":const o=new DataView(new ArrayBuffer(3+n.value.byteLength));o.setUint8(0,6),o.setUint16(1,n.value.byteLength,!1);const a=new Uint8Array(o.buffer);return a.set(n.value,3),a;case"string":const d=(0,C.ar)(n.value),l=new DataView(new ArrayBuffer(3+d.byteLength));l.setUint8(0,7),l.setUint16(1,d.byteLength,!1);const h=new Uint8Array(l.buffer);return h.set(d,3),h;case"timestamp":const g=new Uint8Array(9);return g[0]=8,g.set(J.fromNumber(n.value.valueOf()).bytes,1),g;case"uuid":if(!Mt.test(n.value))throw new Error(`Invalid UUID received: ${n.value}`);const p=new Uint8Array(17);return p[0]=9,p.set((0,P.a)(n.value.replace(/\-/g,"")),1),p}}}var De;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(De||(De={}));const Mt=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class J{constructor(n){if(this.bytes=n,n.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(n){if(n>9223372036854776e3||n<-9223372036854776e3)throw new Error(`${n} is too large (or, if negative, too small) to represent as an Int64`);const t=new Uint8Array(8);for(let s=7,r=Math.abs(Math.round(n));s>-1&&r>0;s--,r/=256)t[s]=r;return n<0&&Te(t),new J(t)}valueOf(){const n=this.bytes.slice(0),t=n[0]&128;return t&&Te(n),parseInt((0,P.n)(n),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function Te(e){for(let n=0;n<8;n++)e[n]^=255;for(let n=7;n>-1&&(e[n]++,e[n]===0);n--);}const Kt=(e,n)=>{e=e.toLowerCase();for(const t of Object.keys(n))if(e===t.toLowerCase())return!0;return!1},Wn=(e,n)=>{e=e.toLowerCase();for(const t of Object.keys(n))if(e===t.toLowerCase())return n[t]},Xn=(e,n)=>{e=e.toLowerCase();for(const t of Object.keys(n))e===t.toLowerCase()&&delete n[t]};var $=u(28596);const Ft=(e,n={})=>{const{headers:t,query:s={}}=$.Kd.clone(e);for(const r of Object.keys(t)){const o=r.toLowerCase();(o.slice(0,6)==="x-amz-"&&!n.unhoistableHeaders?.has(o)||n.hoistableHeaders?.has(o))&&(s[r]=t[r],delete t[r])}return{...e,headers:t,query:s}},Oe=e=>{e=$.Kd.clone(e);for(const n of Object.keys(e.headers))Rt.indexOf(n.toLowerCase())>-1&&delete e.headers[n];return e},Lt=e=>Vt(e).toISOString().replace(/\.\d{3}Z$/,"Z"),Vt=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class ke{constructor({applyChecksum:n,credentials:t,region:s,service:r,sha256:o,uriEscapePath:a=!0}){this.headerFormatter=new Ht,this.service=r,this.sha256=o,this.uriEscapePath=a,this.applyChecksum=typeof n=="boolean"?n:!0,this.regionProvider=(0,b.t)(s),this.credentialProvider=(0,b.t)(t)}async presign(n,t={}){const{signingDate:s=new Date,expiresIn:r=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:d,hoistableHeaders:l,signingRegion:h,signingService:g}=t,p=await this.credentialProvider();this.validateResolvedCredentials(p);const f=h??await this.regionProvider(),{longDate:R,shortDate:T}=L(s);if(r>jt)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const G=Q(T,f,g??this.service),A=Ft(Oe(n),{unhoistableHeaders:a,hoistableHeaders:l});p.sessionToken&&(A.query[Ie]=p.sessionToken),A.query[At]=X,A.query[It]=`${p.accessKeyId}/${G}`,A.query[Ee]=R,A.query[xt]=r.toString(10);const st=Pe(A,o,d);return A.query[Ct]=$e(st),A.query[Ae]=await this.getSignature(R,G,this.getSigningKey(p,f,T,g),this.createCanonicalRequest(A,st,await Z(n,this.sha256))),A}async sign(n,t){return typeof n=="string"?this.signString(n,t):n.headers&&n.payload?this.signEvent(n,t):n.message?this.signMessage(n,t):this.signRequest(n,t)}async signEvent({headers:n,payload:t},{signingDate:s=new Date,priorSignature:r,signingRegion:o,signingService:a}){const d=o??await this.regionProvider(),{shortDate:l,longDate:h}=L(s),g=Q(l,d,a??this.service),p=await Z({headers:{},body:t},this.sha256),f=new this.sha256;f.update(n);const R=(0,P.n)(await f.digest()),T=[kt,h,g,r,R,p].join(`
`);return this.signString(T,{signingDate:s,signingRegion:d,signingService:a})}async signMessage(n,{signingDate:t=new Date,signingRegion:s,signingService:r}){return this.signEvent({headers:this.headerFormatter.format(n.message.headers),payload:n.message.body},{signingDate:t,signingRegion:s,signingService:r,priorSignature:n.priorSignature}).then(a=>({message:n.message,signature:a}))}async signString(n,{signingDate:t=new Date,signingRegion:s,signingService:r}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const a=s??await this.regionProvider(),{shortDate:d}=L(t),l=new this.sha256(await this.getSigningKey(o,a,d,r));return l.update((0,C.Fo)(n)),(0,P.n)(await l.digest())}async signRequest(n,{signingDate:t=new Date,signableHeaders:s,unsignableHeaders:r,signingRegion:o,signingService:a}={}){const d=await this.credentialProvider();this.validateResolvedCredentials(d);const l=o??await this.regionProvider(),h=Oe(n),{longDate:g,shortDate:p}=L(t),f=Q(p,l,a??this.service);h.headers[xe]=g,d.sessionToken&&(h.headers[Pt]=d.sessionToken);const R=await Z(h,this.sha256);!Kt(W,h.headers)&&this.applyChecksum&&(h.headers[W]=R);const T=Pe(h,r,s),G=await this.getSignature(g,f,this.getSigningKey(d,l,p,a),this.createCanonicalRequest(h,T,R));return h.headers[Ce]=`${X} Credential=${d.accessKeyId}/${f}, SignedHeaders=${$e(T)}, Signature=${G}`,h}createCanonicalRequest(n,t,s){const r=Object.keys(t).sort();return`${n.method}
${this.getCanonicalPath(n)}
${Ut(n)}
${r.map(o=>`${o}:${t[o]}`).join(`
`)}

${r.join(";")}
${s}`}async createStringToSign(n,t,s){const r=new this.sha256;r.update((0,C.Fo)(s));const o=await r.digest();return`${X}
${n}
${t}
${(0,P.n)(o)}`}getCanonicalPath({path:n}){if(this.uriEscapePath){const t=[];for(const o of n.split("/"))o?.length!==0&&o!=="."&&(o===".."?t.pop():t.push(o));const s=`${n?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&n?.endsWith("/")?"/":""}`;return(0,K.o)(s).replace(/%2F/g,"/")}return n}async getSignature(n,t,s,r){const o=await this.createStringToSign(n,t,r),a=new this.sha256(await s);return a.update((0,C.Fo)(o)),(0,P.n)(await a.digest())}getSigningKey(n,t,s,r){return _t(this.sha256,n,s,t,r||this.service)}validateResolvedCredentials(n){if(typeof n!="object"||typeof n.accessKeyId!="string"||typeof n.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const L=e=>{const n=Lt(e).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}},$e=e=>Object.keys(e).sort().join(";"),Gt=e=>{let n=!1,t;e.credentials&&(n=!0,t=(0,y.K4)(e.credentials,y.OC,y.e)),t||(e.credentialDefaultProvider?t=(0,y.te)(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):t=async()=>{throw new Error("`credentials` is missing")});const s=async()=>t({callerClientConfig:e}),{signingEscapePath:r=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:a}=e;let d;return e.signer?d=(0,y.te)(e.signer):e.regionInfoProvider?d=()=>(0,y.te)(e.region)().then(async l=>[await e.regionInfoProvider(l,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},l]).then(([l,h])=>{const{signingRegion:g,signingService:p}=l;e.signingRegion=e.signingRegion||g||h,e.signingName=e.signingName||p||e.serviceId;const f={...e,credentials:s,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:r},R=e.signerConstructor||ke;return new R(f)}):d=async l=>{l=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await(0,y.te)(e.region)(),properties:{}},l);const h=l.signingRegion,g=l.signingName;e.signingRegion=e.signingRegion||h,e.signingName=e.signingName||g||e.serviceId;const p={...e,credentials:s,region:e.signingRegion,service:e.signingName,sha256:a,uriEscapePath:r},f=e.signerConstructor||ke;return new f(p)},{...e,systemClockOffset:o,signingEscapePath:r,credentials:n?async()=>s().then(l=>Et(l,"CREDENTIALS_CODE","e")):s,signer:d}},Qn=null,Bt=async(e,n,t)=>({operation:(0,b.u)(n).operation,region:await(0,b.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Wt(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(n,t)=>({signingProperties:{config:n,context:t}})}}function Xt(e){return{schemeId:"smithy.api#noAuth"}}const Qt=e=>{const n=[];switch(e.operation){case"CreateToken":{n.push(Xt(e));break}default:n.push(Wt(e))}return n},Zt=e=>({...Gt(e)}),Jt=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),qt={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Yt={rE:"3.731.1"};var en=u(86351),Ne=u(99912),tn=u(10112),je=u(30876),nn=u(55046),sn=u(25746);const _e=e=>new Date(Date.now()+e),Ue=e=>$.cS.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,rn=(e,n)=>Math.abs(_e(n).getTime()-e)>=3e5,ze=(e,n)=>{const t=Date.parse(e);return rn(t,n)?t-Date.now():n},z=(e,n)=>{if(!n)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return n},on=async e=>{const n=z("context",e.context),t=z("config",e.config),s=n.endpointV2?.properties?.authSchemes?.[0],o=await z("signer",t.signer)(s),a=e?.signingRegion,d=e?.signingRegionSet,l=e?.signingName;return{config:t,signer:o,signingRegion:a,signingRegionSet:d,signingName:l}};class an{async sign(n,t,s){if(!$.Kd.isInstance(n))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const r=await on(s),{config:o,signer:a}=r;let{signingRegion:d,signingName:l}=r;const h=s.context;if(h?.authSchemes?.length??0>1){const[p,f]=h.authSchemes;p?.name==="sigv4a"&&f?.name==="sigv4"&&(d=f?.signingRegion??d,l=f?.signingName??l)}return await a.sign(n,{signingDate:_e(o.systemClockOffset),signingRegion:d,signingService:l})}errorHandler(n){return t=>{const s=t.ServerTime??Ue(t.$response);if(s){const r=z("config",n.config),o=r.systemClockOffset;r.systemClockOffset=ze(s,r.systemClockOffset),r.systemClockOffset!==o&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(n,t){const s=Ue(n);if(s){const r=z("config",t.config);r.systemClockOffset=ze(s,r.systemClockOffset)}}}const Zn=null;var He=u(79463),cn=u(23131),q=u(81632);const Me="required",w="fn",S="argv",N="ref",Ke=!0,Fe="isSet",H="booleanEquals",j="error",_="endpoint",x="tree",Y="PartitionResult",ee="getAttr",Le={[Me]:!1,type:"String"},Ve={[Me]:!0,default:!1,type:"Boolean"},Ge={[N]:"Endpoint"},Be={[w]:H,[S]:[{[N]:"UseFIPS"},!0]},We={[w]:H,[S]:[{[N]:"UseDualStack"},!0]},v={},Xe={[w]:ee,[S]:[{[N]:Y},"supportsFIPS"]},Qe={[N]:Y},Ze={[w]:H,[S]:[!0,{[w]:ee,[S]:[Qe,"supportsDualStack"]}]},Je=[Be],qe=[We],Ye=[{[N]:"Region"}],dn={version:"1.0",parameters:{Region:Le,UseDualStack:Ve,UseFIPS:Ve,Endpoint:Le},rules:[{conditions:[{[w]:Fe,[S]:[Ge]}],rules:[{conditions:Je,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:j},{conditions:qe,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:j},{endpoint:{url:Ge,properties:v,headers:v},type:_}],type:x},{conditions:[{[w]:Fe,[S]:Ye}],rules:[{conditions:[{[w]:"aws.partition",[S]:Ye,assign:Y}],rules:[{conditions:[Be,We],rules:[{conditions:[{[w]:H,[S]:[Ke,Xe]},Ze],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:v,headers:v},type:_}],type:x},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:j}],type:x},{conditions:Je,rules:[{conditions:[{[w]:H,[S]:[Xe,Ke]}],rules:[{conditions:[{[w]:"stringEquals",[S]:[{[w]:ee,[S]:[Qe,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:v,headers:v},type:_},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:v,headers:v},type:_}],type:x},{error:"FIPS is enabled but this partition does not support FIPS",type:j}],type:x},{conditions:qe,rules:[{conditions:[Ze],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:v,headers:v},type:_}],type:x},{error:"DualStack is enabled but this partition does not support DualStack",type:j}],type:x},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:v,headers:v},type:_}],type:x}],type:x},{error:"Invalid Configuration: Missing Region",type:j}]},ln=new q.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),un=(e,n={})=>ln.get(e,()=>(0,q.sO)(dn,{endpointParams:e,logger:n.logger}));q.mw.aws=cn.UF;const hn=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??He.E,base64Encoder:e?.base64Encoder??He.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??un,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Qt,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:n=>n.getIdentityProvider("aws.auth#sigv4"),signer:new an},{schemeId:"smithy.api#noAuth",identityProvider:n=>n.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new y.mR}],logger:e?.logger??new i.N4,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??B.D,utf8Decoder:e?.utf8Decoder??C.ar,utf8Encoder:e?.utf8Encoder??C.Pq});var pn=u(21670);const gn=e=>{(0,i.I9)(process.version);const n=(0,pn.I)(e),t=()=>n().then(i.lT),s=hn(e);(0,en.I)(process.version);const r={profile:e?.profile};return{...s,...e,runtime:"node",defaultsMode:n,bodyLengthChecker:e?.bodyLengthChecker??nn.n,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Ne.pf)({serviceId:s.serviceId,clientVersion:Yt.rE}),maxAttempts:e?.maxAttempts??(0,D.Z)(M.qs,e),region:e?.region??(0,D.Z)(U.GG,{...U.zH,...r}),requestHandler:je.$c.create(e?.requestHandler??t),retryMode:e?.retryMode??(0,D.Z)({...M.kN,default:async()=>(await t()).retryMode||sn.L0},e),sha256:e?.sha256??tn.V.bind(null,"sha256"),streamCollector:e?.streamCollector??je.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,D.Z)(U.e$,r),useFipsEndpoint:e?.useFipsEndpoint??(0,D.Z)(U.Ko,r),userAgentAppId:e?.userAgentAppId??(0,D.Z)(Ne.hV,r)}};var et=u(41891);const fn=e=>{const n=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(r){const o=n.findIndex(a=>a.schemeId===r.schemeId);o===-1?n.push(r):n.splice(o,1,r)},httpAuthSchemes(){return n},setHttpAuthSchemeProvider(r){t=r},httpAuthSchemeProvider(){return t},setCredentials(r){s=r},credentials(){return s}}},mn=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),V=e=>e,yn=(e,n)=>{const t={...V((0,et.Rq)(e)),...V((0,i.xA)(e)),...V((0,$.eS)(e)),...V(fn(e))};return n.forEach(s=>s.configure(t)),{...e,...(0,et.$3)(t),...(0,i.uv)(t),...(0,$.jt)(t),...mn(t)}};class tt extends i.Kj{constructor(...[t]){const s=gn(t||{}),r=Jt(s),o=(0,ge.Dc)(r),a=(0,M.$z)(o),d=(0,U.TD)(a),l=(0,pe.OV)(d),h=vt(l),g=Zt(h),p=yn(g,t?.extensions||[]);super(p);c(this,"config");this.config=p,this.middlewareStack.use((0,ge.sM)(this.config)),this.middlewareStack.use((0,M.ey)(this.config)),this.middlewareStack.use((0,it.vK)(this.config)),this.middlewareStack.use((0,pe.TC)(this.config)),this.middlewareStack.use((0,rt.Y7)(this.config)),this.middlewareStack.use((0,ot.n4)(this.config)),this.middlewareStack.use((0,y.wB)(this.config,{httpAuthSchemeParametersProvider:Bt,identityProviderConfigProvider:async f=>new y.h$({"aws.auth#sigv4":f.credentials})})),this.middlewareStack.use((0,y.lW)(this.config))}destroy(){super.destroy()}}class m extends i.TJ{constructor(n){super(n),Object.setPrototypeOf(this,m.prototype)}}class te extends m{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t});c(this,"name","AccessDeniedException");c(this,"$fault","client");c(this,"error");c(this,"error_description");Object.setPrototypeOf(this,te.prototype),this.error=t.error,this.error_description=t.error_description}}class ne extends m{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t});c(this,"name","AuthorizationPendingException");c(this,"$fault","client");c(this,"error");c(this,"error_description");Object.setPrototypeOf(this,ne.prototype),this.error=t.error,this.error_description=t.error_description}}const wn=e=>({...e,...e.clientSecret&&{clientSecret:i.$H},...e.refreshToken&&{refreshToken:i.$H},...e.codeVerifier&&{codeVerifier:i.$H}}),Sn=e=>({...e,...e.accessToken&&{accessToken:i.$H},...e.refreshToken&&{refreshToken:i.$H},...e.idToken&&{idToken:i.$H}});class se extends m{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t});c(this,"name","ExpiredTokenException");c(this,"$fault","client");c(this,"error");c(this,"error_description");Object.setPrototypeOf(this,se.prototype),this.error=t.error,this.error_description=t.error_description}}class re extends m{constructor(t){super({name:"InternalServerException",$fault:"server",...t});c(this,"name","InternalServerException");c(this,"$fault","server");c(this,"error");c(this,"error_description");Object.setPrototypeOf(this,re.prototype),this.error=t.error,this.error_description=t.error_description}}class oe extends m{constructor(t){super({name:"InvalidClientException",$fault:"client",...t});c(this,"name","InvalidClientException");c(this,"$fault","client");c(this,"error");c(this,"error_description");Object.setPrototypeOf(this,oe.prototype),this.error=t.error,this.error_description=t.error_description}}class ie extends m{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t});c(this,"name","InvalidGrantException");c(this,"$fault","client");c(this,"error");c(this,"error_description");Object.setPrototypeOf(this,ie.prototype),this.error=t.error,this.error_description=t.error_description}}class ae extends m{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t});c(this,"name","InvalidRequestException");c(this,"$fault","client");c(this,"error");c(this,"error_description");Object.setPrototypeOf(this,ae.prototype),this.error=t.error,this.error_description=t.error_description}}class ce extends m{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t});c(this,"name","InvalidScopeException");c(this,"$fault","client");c(this,"error");c(this,"error_description");Object.setPrototypeOf(this,ce.prototype),this.error=t.error,this.error_description=t.error_description}}class de extends m{constructor(t){super({name:"SlowDownException",$fault:"client",...t});c(this,"name","SlowDownException");c(this,"$fault","client");c(this,"error");c(this,"error_description");Object.setPrototypeOf(this,de.prototype),this.error=t.error,this.error_description=t.error_description}}class le extends m{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t});c(this,"name","UnauthorizedClientException");c(this,"$fault","client");c(this,"error");c(this,"error_description");Object.setPrototypeOf(this,le.prototype),this.error=t.error,this.error_description=t.error_description}}class ue extends m{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t});c(this,"name","UnsupportedGrantTypeException");c(this,"$fault","client");c(this,"error");c(this,"error_description");Object.setPrototypeOf(this,ue.prototype),this.error=t.error,this.error_description=t.error_description}}var he=u(65181);const vn=async(e,n)=>{const t=(0,y.lI)(e,n),s={"content-type":"application/json"};t.bp("/token");let r;return r=JSON.stringify((0,i.s)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:o=>(0,i.Ss)(o)})),t.m("POST").h(s).b(r),t.build()},En=async(e,n)=>{if(e.statusCode!==200&&e.statusCode>=300)return An(e,n);const t=(0,i.Tj)({$metadata:E(e)}),s=(0,i.Y0)((0,i.Xk)(await(0,he.Y2)(e.body,n)),"body"),r=(0,i.s)(s,{accessToken:i.lK,expiresIn:i.ET,idToken:i.lK,refreshToken:i.lK,tokenType:i.lK});return Object.assign(t,r),t},An=async(e,n)=>{const t={...e,body:await(0,he.CG)(e.body,n)},s=(0,he.cJ)(e,t.body);switch(s){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await Cn(t,n);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await xn(t,n);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await Rn(t,n);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await bn(t,n);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Pn(t,n);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await Dn(t,n);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Tn(t,n);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await On(t,n);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await kn(t,n);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await $n(t,n);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await Nn(t,n);default:const r=t.body;return In({output:e,parsedBody:r,errorCode:s})}},In=(0,i.jr)(m),Cn=async(e,n)=>{const t=(0,i.Tj)({}),s=e.body,r=(0,i.s)(s,{error:i.lK,error_description:i.lK});Object.assign(t,r);const o=new te({$metadata:E(e),...t});return(0,i.Mw)(o,e.body)},xn=async(e,n)=>{const t=(0,i.Tj)({}),s=e.body,r=(0,i.s)(s,{error:i.lK,error_description:i.lK});Object.assign(t,r);const o=new ne({$metadata:E(e),...t});return(0,i.Mw)(o,e.body)},Rn=async(e,n)=>{const t=(0,i.Tj)({}),s=e.body,r=(0,i.s)(s,{error:i.lK,error_description:i.lK});Object.assign(t,r);const o=new se({$metadata:E(e),...t});return(0,i.Mw)(o,e.body)},bn=async(e,n)=>{const t=(0,i.Tj)({}),s=e.body,r=(0,i.s)(s,{error:i.lK,error_description:i.lK});Object.assign(t,r);const o=new re({$metadata:E(e),...t});return(0,i.Mw)(o,e.body)},Pn=async(e,n)=>{const t=(0,i.Tj)({}),s=e.body,r=(0,i.s)(s,{error:i.lK,error_description:i.lK});Object.assign(t,r);const o=new oe({$metadata:E(e),...t});return(0,i.Mw)(o,e.body)},Dn=async(e,n)=>{const t=(0,i.Tj)({}),s=e.body,r=(0,i.s)(s,{error:i.lK,error_description:i.lK});Object.assign(t,r);const o=new ie({$metadata:E(e),...t});return(0,i.Mw)(o,e.body)},Tn=async(e,n)=>{const t=(0,i.Tj)({}),s=e.body,r=(0,i.s)(s,{error:i.lK,error_description:i.lK});Object.assign(t,r);const o=new ae({$metadata:E(e),...t});return(0,i.Mw)(o,e.body)},On=async(e,n)=>{const t=(0,i.Tj)({}),s=e.body,r=(0,i.s)(s,{error:i.lK,error_description:i.lK});Object.assign(t,r);const o=new ce({$metadata:E(e),...t});return(0,i.Mw)(o,e.body)},kn=async(e,n)=>{const t=(0,i.Tj)({}),s=e.body,r=(0,i.s)(s,{error:i.lK,error_description:i.lK});Object.assign(t,r);const o=new de({$metadata:E(e),...t});return(0,i.Mw)(o,e.body)},$n=async(e,n)=>{const t=(0,i.Tj)({}),s=e.body,r=(0,i.s)(s,{error:i.lK,error_description:i.lK});Object.assign(t,r);const o=new le({$metadata:E(e),...t});return(0,i.Mw)(o,e.body)},Nn=async(e,n)=>{const t=(0,i.Tj)({}),s=e.body,r=(0,i.s)(s,{error:i.lK,error_description:i.lK});Object.assign(t,r);const o=new ue({$metadata:E(e),...t});return(0,i.Mw)(o,e.body)},E=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),qn=(e,n)=>collectBody(e,n).then(t=>n.utf8Encoder(t));class nt extends i.uB.classBuilder().ep(qt).m(function(n,t,s,r){return[(0,ve.TM)(s,this.serialize,this.deserialize),St(s,n.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(wn,Sn).ser(vn).de(En).build(){}const jn={CreateTokenCommand:nt};class _n extends tt{}(0,i.J1)(jn,_n)}};
